import{r as v,g as k}from"./phaser-MUclhth5.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))t(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const n of a.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&t(n)}).observe(document,{childList:!0,subtree:!0});function s(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function t(o){if(o.ep)return;o.ep=!0;const a=s(o);fetch(o.href,a)}})();var T=v();const h=k(T);class Y extends h.GameObjects.Sprite{constructor(e,s,t,o){super(e,s,t,32,32,65280),this.setOrigin(.5),this.scene.add.existing(this),this.scene.physics.add.existing(this),this.body.collideWorldBounds=!0,this.setScale(1),this.jumping=!1,this.invincible=!1,this.health=10,this.body.mass=10,this.body.setDragY=10}}class C extends h.GameObjects.Rectangle{constructor(e,s,t){super(e,s,t,32,32,65280),e.add.existing(this),e.physics.add.existing(this),this.body.setAllowGravity(!1),this.init()}init(){this.scene.tweens.add({targets:this,x:{from:1024,to:-100},duration:2e3,onComplete:()=>{this.destroy()}})}}class J extends h.GameObjects.GameObject{constructor(e){super(e,"Generator"),this.scene=e,this.init()}init(){this.generateCloud(),this.generateObstacle(),this.generateCoin(),this.generateIcon(),this.generateButton()}generateCloud(){new E(this.scene),this.scene.time.delayedCall(h.Math.Between(2e3,3e3),()=>this.generateCloud(),null,this)}generateObstacle(){this.scene.obstacles.add(new b(this.scene,800,this.scene.scale.height-h.Math.Between(32,128))),this.scene.time.delayedCall(h.Math.Between(1500,2500),()=>this.generateObstacle(),null,this)}generateCoin(){this.scene.coins.add(new M(this.scene,800,this.scene.scale.height-h.Math.Between(32,128))),this.scene.time.delayedCall(h.Math.Between(500,1500),()=>this.generateCoin(),null,this)}generateIcon(){new C(this.scene,h.Math.Between(100,700),h.Math.Between(100,500)),this.scene.time.delayedCall(h.Math.Between(3e3,5e3),()=>this.generateIcon(),null,this)}generateButton(){new q(this.scene,h.Math.Between(100,700),h.Math.Between(100,500)),this.scene.time.delayedCall(h.Math.Between(3e3,5e3),()=>this.generateButton(),null,this)}}class E extends h.GameObjects.Rectangle{constructor(e,s=800,t=h.Math.Between(0,100)){super(e,s,t,98,32,16777215),e.add.existing(this);const o=1/h.Math.Between(1,3);this.setScale(o),this.init()}init(){this.scene.tweens.add({targets:this,x:{from:800,to:-100},duration:2e3/this.scale,onComplete:()=>{this.destroy()}})}}class b extends h.GameObjects.Rectangle{constructor(e,s=800,t=h.Math.Between(32,368)){super(e,s,t,32,32,16711680),e.add.existing(this),e.physics.add.existing(this),this.body.setAllowGravity(!1);const o=1/h.Math.Between(1,3);this.setScale(o),this.init()}init(){this.scene.tweens.add({targets:this,x:{from:820,to:-100},duration:2e3,onComplete:()=>{this.destroy()}}),this.body.setVelocityX(-200)}handleCollision(e,s){this.scene.gameOver()}}class M extends h.GameObjects.Sprite{constructor(e,s=800,t=h.Math.Between(32,368)){super(e,s,t,"coin"),e.add.existing(this),e.physics.add.existing(this),this.body.setAllowGravity(!1);const o=1/h.Math.Between(1,3);this.setScale(o),this.init()}init(){this.scene.tweens.add({targets:this,x:{from:820,to:-100},duration:2e3,onComplete:()=>{this.destroy()}}),this.scene.anims.create({key:"coin_anim",frames:this.scene.anims.generateFrameNumbers("coin",{start:0,end:7}),frameRate:8,repeat:-1}),this.play({key:"coin_anim",repeat:-1})}collectCoin(e,s){this.scene.score+=50,this.scene.updateScore(),this.scene.playSound("coinCollect"),e.destroy()}}class q extends h.GameObjects.Rectangle{constructor(e,s=800,t=h.Math.Between(100,500)){super(e,s,t,32,32,65280),e.add.existing(this),e.physics.add.existing(this),this.body.setAllowGravity(!1),this.setInteractive(),this.init()}init(){this.scene.tweens.add({targets:this,x:{from:1024,to:-100},duration:2e3,onComplete:()=>{this.destroy()}}),this.setInteractive(),this.on("pointerdown",()=>{console.log("Button Clicked"),this.scene.togglePause()})}}function c(u){u=u.startsWith("/")?u.substring(1):u;const e="";return u.startsWith("assets/")||(u="assets/"+u),`${e}/${u}`}class I extends h.Scene{constructor(){super({key:"bootscene"})}preload(){console.log("BootScene preload started");const e=this.add.text(400,300,"Loading...",{fontFamily:"Arial",fontSize:24,color:"#ffffff"}).setOrigin(.5);this.load.on("complete",()=>{console.log("BootScene: preload complete"),e.destroy()});const s=this.add.graphics(),t=this.add.graphics();t.fillStyle(2236962,.8),t.fillRect(240,270,320,50),this.load.on("progress",function(o){s.clear(),s.fillStyle(65280,1),s.fillRect(250,280,300*o,30)}),this.load.on("complete",function(){s.destroy(),t.destroy(),e.destroy()})}create(){console.log("BootScene: create called"),this.scene.start("BootScene")}update(){this.scene.next("MainMenu")}}class S extends h.Scene{constructor(){super({key:"gameover"})}create(){this.width=this.sys.game.config.width,this.height=this.sys.game.config.height,this.center_width=this.width/2,this.center_height=this.height/2,this.cameras.main.setBackgroundColor(8900331),this.add.bitmapText(this.center_width,50,"arcade",this.registry.get("score"),25).setOrigin(.5),this.add.bitmapText(this.center_width,this.center_height,"arcade","GAME OVER",45).setOrigin(.5),this.add.bitmapText(this.center_width,250,"arcade","Press SPACE or Click to restart!",15).setOrigin(.5),this.input.keyboard.on("keydown-SPACE",this.startGame,this),this.input.on("pointerdown",e=>this.startGame(),this)}showLine(e,s){let t=this.introLayer.add(this.add.bitmapText(this.center_width,s,"pixelFont",e,25).setOrigin(.5).setAlpha(0));this.tweens.add({targets:t,duration:2e3,alpha:1})}startGame(){this.scene.start("map4_game4")}}class A extends h.Scene{constructor(){super({key:"map1scene1"}),this.player=null,this.score=0,this.scoreText=null,this.currentMap=1,this.questions=null,this.icons=[],this.answeredQuestions=0,this.isTransitioning=!1,this.clickCooldown=!1}init(e){e&&typeof e.score=="number"&&(this.score=e.score)}preload(){this.load.image("map1scene1",c("images/map1scene1.png")),this.load.json("map-config",c("data/map1/map-config.json")),this.load.json("questions",c("data/questions.json")),this.load.image("checkMark",c("images/checkmark.png")),this.load.image("xMark",c("images/xmark.png")),this.load.bitmapFont("arcade",c("fonts/arcade.png"),c("fonts/arcade.xml")),this.load.on("loaderror",e=>{if(console.error("Error loading file:",e.key),e.key==="checkMark"){const s=this.add.graphics();s.fillStyle(65280),s.fillCircle(0,0,20),s.generateTexture("checkMark",40,40),s.destroy()}else if(e.key==="xMark"){const s=this.add.graphics();s.lineStyle(4,16711680),s.moveTo(-10,-10),s.lineTo(10,10),s.moveTo(10,-10),s.lineTo(-10,10),s.generateTexture("xMark",40,40),s.destroy()}})}create(){this.sound&&this.sound.context&&(this.sound.pauseOnBlur=!1),this.setupScore();try{const e=this.cache.json.get("map-config");if(this.questions=this.cache.json.get("questions"),console.log("MapConfig loaded:",e),!e)throw new Error("Error: Map configuration not found");if(!this.questions)throw new Error("Error: Questions not found");if(!e.zones)throw new Error("Invalid map config structure");const s=e.zones[0];if(!s)throw new Error("No valid zone found in config");const t=this.add.image(s.x||400,s.y||300,"map1scene1");t.setOrigin(.5),t.setScale(s.scale||1),this.loadAwsIcons(e)}catch(e){console.error("Error in create:",e),this.add.text(400,300,e.message,{fontSize:"24px",fill:"#fff",backgroundColor:"#ff0000",padding:{x:10,y:5}}).setOrigin(.5),setTimeout(()=>{this.scene.start("map1scene1")},2e3)}}loadAwsIcons(e){const s=()=>this.createIcons(e);this.load.once("complete",s),this.load.start&&this.load.start()}createIcons(e){e.zones.forEach(s=>{s.icons.forEach(t=>{const o=this.add.image(t.x,t.y,"icon").setInteractive().setScale(.5);console.log("Creating icon sprite:",t.name||t.service),this.setupIconInteraction(o,t),this.icons.push(o)})})}setupIconInteraction(e,s){e.setTint(16777215),e.isAnswered=!1,e.on("pointerover",()=>{e.isAnswered||(e.setScale(1.3),e.setTint(65280),this.showTooltip(s.name||s.service,e.x,e.y))}),e.on("pointerout",()=>{e.isAnswered||(e.setScale(1.3),e.setTint(16777215),this.hideTooltip())}),this.tweens&&this.tweens.add&&this.tweens.add({targets:e,scale:{from:1,to:1.4},duration:1e3,yoyo:!0,repeat:-1,ease:"Sine.easeInOut"}),e.on("pointerdown",()=>this.handleIconClick(e,s))}handleIconClick(e,s){if(e.isAnswered||this.clickCooldown)return;this.clickCooldown=!0,e.setTint(16711680);let t,o=this.questions&&s&&s.questionTypes?this.questions.filter(a=>s.questionTypes.some(n=>a.question.toLowerCase().includes(n.toLowerCase()))):this.questions;(!o||o.length===0)&&(o=this.questions),o&&(t=h.Utils.Array.GetRandom(o),this.showQuestion(t,e)),setTimeout(()=>{this.clickCooldown=!1,e.isAnswered||e.clearTint()},1e3)}showTooltip(e,s,t){this.tooltip=this.add.text(s,t-60,e,{fontSize:"16px",fill:"#fff",backgroundColor:"#000",padding:{x:5,y:3}}).setOrigin(1).setDepth(150)}hideTooltip(){this.tooltip&&this.tooltip.destroy()}showQuestion(e,s){const t=document.createElement("div");t.className="question-container";const o=document.createElement("div");o.className="overlay";const a=document.createElement("div");a.className="question",a.textContent=e.question,t.appendChild(a),Object.entries(e.options).forEach(([n,r])=>{const i=document.createElement("div");i.className="option";const d=document.createElement("span");d.className="option-letter",d.textContent=n;const l=document.createElement("span");l.className="option-text",l.textContent=r,i.appendChild(d),i.appendChild(l),i.addEventListener("click",()=>{this.handleAnswer(n===e.answer,s,e),document.body.removeChild(t),document.body.removeChild(o)}),t.appendChild(i)}),document.body.appendChild(o),document.body.appendChild(t)}handleAnswer(e,s,t){if(s.isAnswered=!0,this.answeredQuestions++,e){if(this.score+=100,this.scoreText.setText("Score: "+this.score),this.add.image(s.x,s.y,"checkMark").setScale(.5).setDepth(100),t.explanation){const o=document.createElement("div");o.className="explanation-container",o.textContent=t.explanation,document.body.appendChild(o),setTimeout(()=>{document.body.removeChild(o)},5e3)}}else this.add.image(s.x,s.y,"xMark").setScale(.5).setDepth(100);this.answeredQuestions>=this.icons.length&&setTimeout(()=>{this.transitionToNextScene()},1e3)}setupScore(){this.scoreText=this.add.text(16,16,"Score: "+this.score,{fontSize:"32px",fill:"#fff"})}transitionToNextScene(){this.isTransitioning||(this.isTransitioning=!0,this.cameras.main.fadeOut(500),this.cameras.main.once("camerafadeoutcomplete",()=>{this.scene.start("space_invaders",{nextScene:"map1scene2",score:this.score})}))}}class z extends h.Scene{constructor(){super({key:"map1scene2"}),this.player=null,this.score=0,this.scoreText=null,this.currentMap=1,this.questions=null,this.icons=[],this.answeredQuestions=0,this.isTransitioning=!1,this.clickCooldown=!1}init(e){this.score=e.score||0}preload(){this.load.image("map1scene2",c("images/map1scene2.png")),this.load.json("map-config2",c("data/map1/map-config2.json")),this.load.json("questions",c("data/questions.json")),this.load.bitmapFont("arcade",c("fonts/arcade.png"),c("fonts/arcade.xml")),this.load.image("checkMark",c("images/checkmark.png")),this.load.image("xMark",c("images/xmark.png"))}create(){this.sound&&this.sound.context&&(this.sound.pauseOnBlur=!1),this.questions=this.cache.json.get("questions");const e=this.cache.json.get("map-config2"),s=e.zones[0];this.add.image(s.x,s.y,"map1scene2").setScale(s.scale),this.loadAwsIcons(e),this.setupScore()}loadAwsIcons(e){e.zones.forEach(s=>{s.icons.forEach(t=>{const o=this.questions.find(a=>t.questionTypes.some(n=>a.question.toLowerCase().includes(n.toLowerCase())));if(o&&o.image)console.log("Loading icon from question:",o.image),this.load.image(`icon_${t.name}`,o.image);else{const a=`assets/images/services16/${t.category}/48/${t.name}.png`;console.log("Loading icon with constructed path:",a),this.load.image(`icon_${t.name}`,a)}})}),this.load.on("loaderror",s=>{console.error("Error loading file:",s.key)}),this.load.once("complete",()=>{e.zones.forEach(s=>{s.icons.forEach(t=>{const o=this.add.image(t.x,t.y,`icon_${t.name}`).setInteractive().setScale(1);console.log("Creating icon sprite:",t.name),this.setupIconInteraction(o,t),this.icons.push(o)})})}),this.load.start()}setupIconInteraction(e,s){e.setTint(16777215),e.isAnswered=!1,e.on("pointerover",()=>{e.isAnswered||(e.setScale(1.3),e.setTint(65280),this.showTooltip(s.name,e.x,e.y))}),e.on("pointerout",()=>{e.isAnswered||(e.setScale(1),e.setTint(16777215),this.hideTooltip())}),this.tweens.add({targets:e,scale:{from:1,to:1.4},duration:1e3,yoyo:!0,repeat:-1,ease:"Sine.easeInOut"}),e.on("pointerdown",()=>{if(e.isAnswered||this.clickCooldown)return;this.clickCooldown=!0,this.time.delayedCall(500,()=>{this.clickCooldown=!1});let t,o=this.questions.filter(a=>s.questionTypes.some(n=>a.question.toLowerCase().includes(n.toLowerCase())));o.length===0&&(o=this.questions),t=h.Utils.Array.GetRandom(o),this.showQuestion(t,e)})}showTooltip(e,s,t){this.tooltip=this.add.text(s,t-60,e,{fontSize:"16px",fill:"#fff",backgroundColor:"#000",padding:{x:5,y:3}}).setOrigin(.5).setDepth(150)}hideTooltip(){this.tooltip&&this.tooltip.destroy()}showQuestion(e,s){if(this.isTransitioning)return;const t=document.createElement("div");t.className="question-container";const o=document.createElement("div");o.className="overlay";const a=document.createElement("div");a.className="question",a.textContent=e.question,t.appendChild(a);let n=!1;Object.entries(e.options).forEach(([r,i])=>{const d=document.createElement("div");d.className="option";const l=document.createElement("span");l.className="option-letter",l.textContent=r;const m=document.createElement("span");m.className="option-text",m.textContent=i,d.appendChild(l),d.appendChild(m),d.addEventListener("click",()=>{if(n)return;n=!0;const p=r===e.answer;p&&(this.score+=100,this.scoreText.setText(`Score: ${this.score}`));const g=p?"checkMark":"xMark",f=this.add.image(s.x,s.y,g).setScale(.5).setDepth(150);if(s.isAnswered=!0,s.setAlpha(.5),this.tweens.killTweensOf(s),s.setScale(1),s.disableInteractive(),this.answeredQuestions++,e.explanation){const y=document.createElement("div");y.className="explanation",y.textContent=e.explanation,t.appendChild(y)}this.answeredQuestions===5&&(this.isTransitioning=!0),setTimeout(()=>{document.body.removeChild(o),document.body.removeChild(t),f.destroy(),this.answeredQuestions===5&&(console.log("All 5 questions answered, transitioning to Space Invaders..."),this.cameras.main.fade(1e3,0,0,0,!1,(y,w)=>{w===1&&this.scene.start("map1scene2",{nextScene:"space_invaders",score:this.score})}))},2e3)}),t.appendChild(d)}),document.body.appendChild(o),document.body.appendChild(t)}setupScore(){this.scoreText=this.add.text(16,16,`Score: ${this.score}`,{fontSize:"32px",fill:"#fff",backgroundColor:"#000",padding:{x:10,y:5}}).setScrollFactor(0).setDepth(200)}transitionToNextScene(){this.isTransitioning||(this.isTransitioning=!0,this.cameras.main.fadeOut(500),this.cameras.main.once("camerafadeoutcomplete",()=>{this.scene.start("space_invaders",{nextScene:"map1scene3",score:this.score})}))}}class $ extends h.Scene{constructor(){super({key:"map1scene3"}),this.player=null,this.score=0,this.scoreText=null,this.currentMap=1,this.questions=null,this.icons=[],this.answeredQuestions=0}preload(){this.load.image("map1scene3",c("images/map1scene3.png")),this.load.json("map-config3",c("data/map1/map-config3.json")),this.load.json("questions",c("data/questions.json")),this.load.image("checkMark",c("images/checkmark.png")),this.load.image("xMark",c("images/xmark.png")),this.load.on("loaderror",e=>{if(console.error("Error loading file:",e.key),e.key==="checkMark"){const s=this.add.graphics();s.fillStyle(65280),s.fillCircle(0,0,20),s.generateTexture("checkMark",40,40),s.destroy()}else if(e.key==="xMark"){const s=this.add.graphics();s.lineStyle(4,16711680),s.moveTo(-10,-10),s.lineTo(10,10),s.moveTo(10,-10),s.lineTo(-10,10),s.generateTexture("xMark",40,40),s.destroy()}})}create(){this.sound&&this.sound.context&&(this.sound.pauseOnBlur=!1);try{this.questions=this.cache.json.get("questions");const e=this.cache.json.get("map-config3");if(console.log("MapConfig loaded:",e),!e||!e.zones)throw new Error("Invalid map config structure");const t=e.zones[1]||e.zones[0];if(!t)throw new Error("No valid zone found in config");const o=this.add.image(t.x||400,t.y||300,"map1scene3");o.setOrigin(.5),o.setScale(t.scale||1),this.loadAwsIcons(e),this.setupScore()}catch(e){console.error("Error in create:",e),this.add.text(400,300,"Error loading level. Restarting...",{fontSize:"24px",fill:"#fff",backgroundColor:"#ff0000",padding:{x:10,y:5}}).setOrigin(.5),setTimeout(()=>{this.scene.start("map1scene3")},2e3)}}loadAwsIcons(e){e.zones.forEach(s=>{s.icons.forEach(t=>{const o=this.questions.find(n=>t.questionTypes.some(r=>n.question.toLowerCase().includes(r.toLowerCase())));if(o&&o.image)console.log("Loading icon from question:",o.image),this.load.image(`icon_${t.name}`,o.image);else{const n=`assets/images/services16/${t.category}/48/${t.name}`;console.log("Loading icon with constructed path:",n),this.load.image(`icon_${t.name}`,n)}const a=`/assets/images/services16/${t.category}/48/${t.name}`;this.load.image(`icon_${t.name}`,a)})}),this.load.once("complete",()=>{e.zones.forEach(s=>{s.icons.forEach(t=>{const o=this.add.image(t.x,t.y,`icon_${t.name}`).setInteractive().setScale(.5);console.log("Creating icon sprite:",t.name),this.setupIconInteraction(o,t),this.icons.push(o)})})}),this.load.start()}setupIconInteraction(e,s){e.setTint(16777215),e.isAnswered=!1,e.on("pointerover",()=>{e.isAnswered||(e.setScale(1.3),e.setTint(65280),this.showTooltip(s.name,e.x,e.y))}),e.on("pointerout",()=>{e.isAnswered||(e.setScale(1.3),e.setTint(16777215),this.hideTooltip())}),this.tweens.add({targets:e,scale:{from:1,to:1.4},duration:1e3,yoyo:!0,repeat:-1,ease:"Sine.easeInOut"}),e.on("pointerdown",()=>{if(e.isAnswered)return;let t,o=this.questions.filter(a=>s.questionTypes.some(n=>a.question.toLowerCase().includes(n.toLowerCase())));o.length===0&&(o=this.questions),t=h.Utils.Array.GetRandom(o),this.showQuestion(t,e)})}showTooltip(e,s,t){this.tooltip=this.add.text(s,t-60,e,{fontSize:"16px",fill:"#fff",backgroundColor:"#000",padding:{x:5,y:3}}).setOrigin(1).setDepth(150)}hideTooltip(){this.tooltip&&this.tooltip.destroy()}showQuestion(e,s){const t=document.createElement("div");t.className="question-container";const o=document.createElement("div");o.className="overlay";const a=document.createElement("div");a.className="question",a.textContent=e.question,t.appendChild(a),Object.entries(e.options).forEach(([n,r])=>{const i=document.createElement("div");i.className="option";const d=document.createElement("span");d.className="option-letter",d.textContent=n;const l=document.createElement("span");l.className="option-text",l.textContent=r,i.appendChild(d),i.appendChild(l),i.addEventListener("click",()=>{const m=n===e.answer;m&&(this.score+=100,this.scoreText.setText(`Score: ${this.score}`));const p=m?"checkMark":"xMark",g=this.add.image(s.x,s.y,p).setScale(1).setDepth(150);if(s.isAnswered=!0,s.setAlpha(.5),this.tweens.killTweensOf(s),s.setScale(1),s.disableInteractive(),this.answeredQuestions++,e.explanation){const f=document.createElement("div");f.className="explanation",f.textContent=e.explanation,t.appendChild(f)}setTimeout(()=>{document.body.removeChild(o),document.body.removeChild(t),g.destroy(),this.answeredQuestions===5&&(console.log("All 5 questions answered, transitioning to Space Invaders..."),setTimeout(()=>{this.scene.start("space_invaders",{nextScene:"map1scene4"})},3e3))},2e3)}),t.appendChild(i)}),document.body.appendChild(o),document.body.appendChild(t)}setupScore(){this.scoreText=this.add.text(16,16,"Score: 0",{fontSize:"32px",fill:"#fff",backgroundColor:"#000",padding:{x:10,y:5}}).setScrollFactor(0).setDepth(200)}}class O extends h.Scene{constructor(){super({key:"map1scene4"}),this.player=null,this.score=0,this.scoreText=null,this.currentMap=1,this.questions=null,this.icons=[],this.answeredQuestions=0}preload(){this.load.image("map1scene4",c("images/map1scene4.png")),this.load.json("map-config4",c("data/map1/map-config4.json")),this.load.json("questions",c("data/questions.json")),this.load.image("checkMark",c("images/checkmark.png")),this.load.image("xMark",c("images/xmark.png")),this.load.on("loaderror",e=>{if(console.error("Error loading file:",e.key),e.key==="checkMark"){const s=this.add.graphics();s.fillStyle(65280),s.fillCircle(0,0,20),s.generateTexture("checkMark",40,40),s.destroy()}else if(e.key==="xMark"){const s=this.add.graphics();s.lineStyle(4,16711680),s.moveTo(-10,-10),s.lineTo(10,10),s.moveTo(10,-10),s.lineTo(-10,10),s.generateTexture("xMark",40,40),s.destroy()}})}create(){this.sound&&this.sound.context&&(this.sound.pauseOnBlur=!1);try{this.questions=this.cache.json.get("questions");const e=this.cache.json.get("map-config4");if(console.log("MapConfig loaded:",e),!e||!e.zones)throw new Error("Invalid map config structure");const t=e.zones[1]||e.zones[0];if(!t)throw new Error("No valid zone found in config");const o=this.add.image(t.x||400,t.y||300,"map1scene4");o.setOrigin(.5),o.setScale(t.scale||1),this.loadAwsIcons(e),this.setupScore()}catch(e){console.error("Error in create:",e),this.add.text(400,300,"Error loading level. Restarting...",{fontSize:"24px",fill:"#fff",backgroundColor:"#ff0000",padding:{x:10,y:5}}).setOrigin(.5),setTimeout(()=>{this.scene.start("map1scene1")},2e3)}}loadAwsIcons(e){e.zones.forEach(s=>{s.icons.forEach(t=>{const o=this.questions.find(n=>t.questionTypes.some(r=>n.question.toLowerCase().includes(r.toLowerCase())));if(o&&o.image)console.log("Loading icon from question:",o.image),this.load.image(`icon_${t.name}`,o.image);else{const n=`assets/images/services16/${t.category}/48/${t.name}`;console.log("Loading icon with constructed path:",n),this.load.image(`icon_${t.name}`,n)}const a=`/assets/images/services16/${t.category}/48/${t.name}`;this.load.image(`icon_${t.name}`,a)})}),this.load.once("complete",()=>{e.zones.forEach(s=>{s.icons.forEach(t=>{const o=this.add.image(t.x,t.y,`icon_${t.name}`).setInteractive().setScale(.5);console.log("Creating icon sprite:",t.name),this.setupIconInteraction(o,t),this.icons.push(o)})})}),this.load.start()}setupIconInteraction(e,s){e.setTint(16777215),e.isAnswered=!1,e.on("pointerover",()=>{e.isAnswered||(e.setScale(1.3),e.setTint(65280),this.showTooltip(s.name,e.x,e.y))}),e.on("pointerout",()=>{e.isAnswered||(e.setScale(1.3),e.setTint(16777215),this.hideTooltip())}),this.tweens.add({targets:e,scale:{from:1,to:1.4},duration:1e3,yoyo:!0,repeat:-1,ease:"Sine.easeInOut"}),e.on("pointerdown",()=>{if(e.isAnswered)return;let t,o=this.questions.filter(a=>s.questionTypes.some(n=>a.question.toLowerCase().includes(n.toLowerCase())));o.length===0&&(o=this.questions),t=h.Utils.Array.GetRandom(o),this.showQuestion(t,e)})}showTooltip(e,s,t){this.tooltip=this.add.text(s,t-60,e,{fontSize:"16px",fill:"#fff",backgroundColor:"#000",padding:{x:5,y:3}}).setOrigin(1).setDepth(150)}hideTooltip(){this.tooltip&&this.tooltip.destroy()}showQuestion(e,s){const t=document.createElement("div");t.className="question-container";const o=document.createElement("div");o.className="overlay";const a=document.createElement("div");a.className="question",a.textContent=e.question,t.appendChild(a),Object.entries(e.options).forEach(([n,r])=>{const i=document.createElement("div");i.className="option";const d=document.createElement("span");d.className="option-letter",d.textContent=n;const l=document.createElement("span");l.className="option-text",l.textContent=r,i.appendChild(d),i.appendChild(l),i.addEventListener("click",()=>{const m=n===e.answer;m&&(this.score+=100,this.scoreText.setText(`Score: ${this.score}`));const p=m?"checkMark":"xMark",g=this.add.image(s.x,s.y,p).setScale(1).setDepth(150);if(s.isAnswered=!0,s.setAlpha(.5),this.tweens.killTweensOf(s),s.setScale(1),s.disableInteractive(),this.answeredQuestions++,e.explanation){const f=document.createElement("div");f.className="explanation",f.textContent=e.explanation,t.appendChild(f)}setTimeout(()=>{document.body.removeChild(o),document.body.removeChild(t),g.destroy(),this.answeredQuestions===5&&(console.log("All 5 questions answered, transitioning to Space Invaders..."),setTimeout(()=>{this.scene.start("space_invaders",{nextScene:"map2scene1"})},3e3))},2e3)}),t.appendChild(i)}),document.body.appendChild(o),document.body.appendChild(t)}setupScore(){this.scoreText=this.add.text(16,16,"Score: 0",{fontSize:"32px",fill:"#fff",backgroundColor:"#000",padding:{x:10,y:5}}).setScrollFactor(0).setDepth(200)}}class N extends h.Scene{constructor(){super({key:"map2scene2"}),this.player=null,this.score=0,this.scoreText=null,this.currentMap=1,this.questions=null,this.icons=[],this.answeredQuestions=0}preload(){this.load.image("map2scene2",c("images/map2scene2.png")),this.load.json("map-config2",c("data/map2/map-config2.json")),this.load.json("questions",c("data/questions.json")),this.load.image("checkMark",c("images/checkmark.png")),this.load.image("xMark",c("images/xmark.png")),this.load.on("loaderror",e=>{if(console.error("Error loading file:",e.key),e.key==="checkMark"){const s=this.add.graphics();s.fillStyle(65280),s.fillCircle(0,0,20),s.generateTexture("checkMark",40,40),s.destroy()}else if(e.key==="xMark"){const s=this.add.graphics();s.lineStyle(4,16711680),s.moveTo(-10,-10),s.lineTo(10,10),s.moveTo(10,-10),s.lineTo(-10,10),s.generateTexture("xMark",40,40),s.destroy()}})}create(){this.sound&&this.sound.context&&(this.sound.pauseOnBlur=!1);try{this.questions=this.cache.json.get("questions");const e=this.cache.json.get("map-config2");if(console.log("MapConfig loaded:",e),!e||!e.zones)throw new Error("Invalid map config structure");const t=e.zones[1]||e.zones[0];if(!t)throw new Error("No valid zone found in config");const o=this.add.image(t.x||400,t.y||300,"map2scene2");o.setOrigin(.5),o.setScale(t.scale||1),this.loadAwsIcons(e),this.setupScore()}catch(e){console.error("Error in create:",e),this.add.text(400,300,"Error loading level. Restarting...",{fontSize:"24px",fill:"#fff",backgroundColor:"#ff0000",padding:{x:10,y:5}}).setOrigin(.5),setTimeout(()=>{this.scene.start("map2scene2")},2e3)}}loadAwsIcons(e){e.zones.forEach(s=>{s.icons.forEach(t=>{const o=this.questions.find(n=>t.questionTypes.some(r=>n.question.toLowerCase().includes(r.toLowerCase())));if(o&&o.image)console.log("Loading icon from question:",o.image),this.load.image(`icon_${t.name}`,o.image);else{const n=`assets/images/services16/${t.category}/48/${t.name}`;console.log("Loading icon with constructed path:",n),this.load.image(`icon_${t.name}`,n)}const a=`/assets/images/services16/${t.category}/48/${t.name}`;this.load.image(`icon_${t.name}`,a)})}),this.load.once("complete",()=>{e.zones.forEach(s=>{s.icons.forEach(t=>{const o=this.add.image(t.x,t.y,`icon_${t.name}`).setInteractive().setScale(.5);console.log("Creating icon sprite:",t.name),this.setupIconInteraction(o,t),this.icons.push(o)})})}),this.load.start()}setupIconInteraction(e,s){e.setTint(16777215),e.isAnswered=!1,e.on("pointerover",()=>{e.isAnswered||(e.setScale(1.3),e.setTint(65280),this.showTooltip(s.name,e.x,e.y))}),e.on("pointerout",()=>{e.isAnswered||(e.setScale(1.3),e.setTint(16777215),this.hideTooltip())}),this.tweens.add({targets:e,scale:{from:1,to:1.4},duration:1e3,yoyo:!0,repeat:-1,ease:"Sine.easeInOut"}),e.on("pointerdown",()=>{if(e.isAnswered)return;let t,o=this.questions.filter(a=>s.questionTypes.some(n=>a.question.toLowerCase().includes(n.toLowerCase())));o.length===0&&(o=this.questions),t=h.Utils.Array.GetRandom(o),this.showQuestion(t,e)})}showTooltip(e,s,t){this.tooltip=this.add.text(s,t-60,e,{fontSize:"16px",fill:"#fff",backgroundColor:"#000",padding:{x:5,y:3}}).setOrigin(1).setDepth(150)}hideTooltip(){this.tooltip&&this.tooltip.destroy()}showQuestion(e,s){const t=document.createElement("div");t.className="question-container";const o=document.createElement("div");o.className="overlay";const a=document.createElement("div");a.className="question",a.textContent=e.question,t.appendChild(a),Object.entries(e.options).forEach(([n,r])=>{const i=document.createElement("div");i.className="option";const d=document.createElement("span");d.className="option-letter",d.textContent=n;const l=document.createElement("span");l.className="option-text",l.textContent=r,i.appendChild(d),i.appendChild(l),i.addEventListener("click",()=>{const m=n===e.answer;m&&(this.score+=100,this.scoreText.setText(`Score: ${this.score}`));const p=m?"checkMark":"xMark",g=this.add.image(s.x,s.y,p).setScale(1).setDepth(150);if(s.isAnswered=!0,s.setAlpha(.5),this.tweens.killTweensOf(s),s.setScale(1),s.disableInteractive(),this.answeredQuestions++,e.explanation){const f=document.createElement("div");f.className="explanation",f.textContent=e.explanation,t.appendChild(f)}setTimeout(()=>{document.body.removeChild(o),document.body.removeChild(t),g.destroy(),this.answeredQuestions===5&&(console.log("All 5 questions answered, transitioning to Space Invaders..."),setTimeout(()=>{this.scene.start("space_invaders",{nextScene:"map2scene3"})},3e3))},2e3)}),t.appendChild(i)}),document.body.appendChild(o),document.body.appendChild(t)}setupScore(){this.scoreText=this.add.text(16,16,"Score: 0",{fontSize:"32px",fill:"#fff",backgroundColor:"#000",padding:{x:10,y:5}}).setScrollFactor(0).setDepth(200)}}class Q extends h.Scene{constructor(){super({key:"map2scene1"}),this.player=null,this.score=0,this.scoreText=null,this.currentMap=1,this.questions=null,this.icons=[],this.answeredQuestions=0}preload(){this.load.image("map2scene1",c("images/map2scene1.png")),this.load.json("map-config",c("data/map2/map-config.json")),this.load.json("questions",c("data/questions.json")),this.load.image("checkMark",c("images/checkmark.png")),this.load.image("xMark",c("images/xmark.png")),this.load.on("loaderror",e=>{if(console.error("Error loading file:",e.key),e.key==="checkMark"){const s=this.add.graphics();s.fillStyle(65280),s.fillCircle(0,0,20),s.generateTexture("checkMark",40,40),s.destroy()}else if(e.key==="xMark"){const s=this.add.graphics();s.lineStyle(4,16711680),s.moveTo(-10,-10),s.lineTo(10,10),s.moveTo(10,-10),s.lineTo(-10,10),s.generateTexture("xMark",40,40),s.destroy()}})}create(){this.sound&&this.sound.context&&(this.sound.pauseOnBlur=!1);try{this.questions=this.cache.json.get("questions");const e=this.cache.json.get("map-config");if(console.log("MapConfig loaded:",e),!e||!e.zones)throw new Error("Invalid map config structure");const t=e.zones[1]||e.zones[0];if(!t)throw new Error("No valid zone found in config");const o=this.add.image(t.x||400,t.y||300,"map2scene1");o.setOrigin(.5),o.setScale(t.scale||1),this.loadAwsIcons(e),this.setupScore()}catch(e){console.error("Error in create:",e),this.add.text(400,300,"Error loading level. Restarting...",{fontSize:"24px",fill:"#fff",backgroundColor:"#ff0000",padding:{x:10,y:5}}).setOrigin(.5),setTimeout(()=>{this.scene.start("map2scene1")},2e3)}}loadAwsIcons(e){e.zones.forEach(s=>{s.icons.forEach(t=>{const o=this.questions.find(n=>t.questionTypes.some(r=>n.question.toLowerCase().includes(r.toLowerCase())));if(o&&o.image)console.log("Loading icon from question:",o.image),this.load.image(`icon_${t.name}`,o.image);else{const n=`assets/images/services16/${t.category}/48/${t.name}`;console.log("Loading icon with constructed path:",n),this.load.image(`icon_${t.name}`,n)}const a=`/assets/images/services16/${t.category}/48/${t.name}`;this.load.image(`icon_${t.name}`,a)})}),this.load.once("complete",()=>{e.zones.forEach(s=>{s.icons.forEach(t=>{const o=this.add.image(t.x,t.y,`icon_${t.name}`).setInteractive().setScale(.5);console.log("Creating icon sprite:",t.name),this.setupIconInteraction(o,t),this.icons.push(o)})})}),this.load.start()}setupIconInteraction(e,s){e.setTint(16777215),e.isAnswered=!1,e.on("pointerover",()=>{e.isAnswered||(e.setScale(1.3),e.setTint(65280),this.showTooltip(s.name,e.x,e.y))}),e.on("pointerout",()=>{e.isAnswered||(e.setScale(1.3),e.setTint(16777215),this.hideTooltip())}),this.tweens.add({targets:e,scale:{from:1,to:1.4},duration:1e3,yoyo:!0,repeat:-1,ease:"Sine.easeInOut"}),e.on("pointerdown",()=>{if(e.isAnswered)return;let t,o=this.questions.filter(a=>s.questionTypes.some(n=>a.question.toLowerCase().includes(n.toLowerCase())));o.length===0&&(o=this.questions),t=h.Utils.Array.GetRandom(o),this.showQuestion(t,e)})}showTooltip(e,s,t){this.tooltip=this.add.text(s,t-60,e,{fontSize:"16px",fill:"#fff",backgroundColor:"#000",padding:{x:5,y:3}}).setOrigin(1).setDepth(150)}hideTooltip(){this.tooltip&&this.tooltip.destroy()}showQuestion(e,s){const t=document.createElement("div");t.className="question-container";const o=document.createElement("div");o.className="overlay";const a=document.createElement("div");a.className="question",a.textContent=e.question,t.appendChild(a),Object.entries(e.options).forEach(([n,r])=>{const i=document.createElement("div");i.className="option";const d=document.createElement("span");d.className="option-letter",d.textContent=n;const l=document.createElement("span");l.className="option-text",l.textContent=r,i.appendChild(d),i.appendChild(l),i.addEventListener("click",()=>{const m=n===e.answer;m&&(this.score+=100,this.scoreText.setText(`Score: ${this.score}`));const p=m?"checkMark":"xMark",g=this.add.image(s.x,s.y,p).setScale(1).setDepth(150);if(s.isAnswered=!0,s.setAlpha(.5),this.tweens.killTweensOf(s),s.setScale(1),s.disableInteractive(),this.answeredQuestions++,e.explanation){const f=document.createElement("div");f.className="explanation",f.textContent=e.explanation,t.appendChild(f)}setTimeout(()=>{document.body.removeChild(o),document.body.removeChild(t),g.destroy(),this.answeredQuestions===5&&(console.log("All 5 questions answered, transitioning to Space Invaders..."),setTimeout(()=>{this.scene.start("space_invaders",{nextScene:"map2scene2"})},3e3))},2e3)}),t.appendChild(i)}),document.body.appendChild(o),document.body.appendChild(t)}setupScore(){this.scoreText=this.add.text(16,16,"Score: 0",{fontSize:"32px",fill:"#fff",backgroundColor:"#000",padding:{x:10,y:5}}).setScrollFactor(0).setDepth(200)}}class j extends h.Scene{constructor(){super({key:"map2scene3"}),this.player=null,this.score=0,this.scoreText=null,this.currentMap=1,this.questions=null,this.icons=[],this.answeredQuestions=0}preload(){this.load.image("map2scene3",c("images/map2scene3.png")),this.load.json("map-config3",c("data/map2/map-config3.json")),this.load.json("questions",c("data/questions.json")),this.load.image("checkMark",c("images/checkmark.png")),this.load.image("xMark",c("images/xmark.png")),this.load.on("loaderror",e=>{if(console.error("Error loading file:",e.key),e.key==="checkMark"){const s=this.add.graphics();s.fillStyle(65280),s.fillCircle(0,0,20),s.generateTexture("checkMark",40,40),s.destroy()}else if(e.key==="xMark"){const s=this.add.graphics();s.lineStyle(4,16711680),s.moveTo(-10,-10),s.lineTo(10,10),s.moveTo(10,-10),s.lineTo(-10,10),s.generateTexture("xMark",40,40),s.destroy()}})}create(){this.sound&&this.sound.context&&(this.sound.pauseOnBlur=!1);try{this.questions=this.cache.json.get("questions");const e=this.cache.json.get("map-config3");if(console.log("MapConfig loaded:",e),!e||!e.zones)throw new Error("Invalid map config structure");const t=e.zones[1]||e.zones[0];if(!t)throw new Error("No valid zone found in config");const o=this.add.image(t.x||400,t.y||300,"map2scene3");o.setOrigin(.5),o.setScale(t.scale||1),this.loadAwsIcons(e),this.setupScore()}catch(e){console.error("Error in create:",e),this.add.text(400,300,"Error loading level. Restarting...",{fontSize:"24px",fill:"#fff",backgroundColor:"#ff0000",padding:{x:10,y:5}}).setOrigin(.5),setTimeout(()=>{this.scene.start("map2scene3")},2e3)}}loadAwsIcons(e){e.zones.forEach(s=>{s.icons.forEach(t=>{const o=this.questions.find(n=>t.questionTypes.some(r=>n.question.toLowerCase().includes(r.toLowerCase())));if(o&&o.image)console.log("Loading icon from question:",o.image),this.load.image(`icon_${t.name}`,o.image);else{const n=`assets/images/services16/${t.category}/48/${t.name}`;console.log("Loading icon with constructed path:",n),this.load.image(`icon_${t.name}`,n)}const a=`/assets/images/services16/${t.category}/48/${t.name}`;this.load.image(`icon_${t.name}`,a)})}),this.load.once("complete",()=>{e.zones.forEach(s=>{s.icons.forEach(t=>{const o=this.add.image(t.x,t.y,`icon_${t.name}`).setInteractive().setScale(.5);console.log("Creating icon sprite:",t.name),this.setupIconInteraction(o,t),this.icons.push(o)})})}),this.load.start()}setupIconInteraction(e,s){e.setTint(16777215),e.isAnswered=!1,e.on("pointerover",()=>{e.isAnswered||(e.setScale(1.3),e.setTint(65280),this.showTooltip(s.name,e.x,e.y))}),e.on("pointerout",()=>{e.isAnswered||(e.setScale(1.3),e.setTint(16777215),this.hideTooltip())}),this.tweens.add({targets:e,scale:{from:1,to:1.4},duration:1e3,yoyo:!0,repeat:-1,ease:"Sine.easeInOut"}),e.on("pointerdown",()=>{if(e.isAnswered)return;let t,o=this.questions.filter(a=>s.questionTypes.some(n=>a.question.toLowerCase().includes(n.toLowerCase())));o.length===0&&(o=this.questions),t=h.Utils.Array.GetRandom(o),this.showQuestion(t,e)})}showTooltip(e,s,t){this.tooltip=this.add.text(s,t-60,e,{fontSize:"16px",fill:"#fff",backgroundColor:"#000",padding:{x:5,y:3}}).setOrigin(1).setDepth(150)}hideTooltip(){this.tooltip&&this.tooltip.destroy()}showQuestion(e,s){const t=document.createElement("div");t.className="question-container";const o=document.createElement("div");o.className="overlay";const a=document.createElement("div");a.className="question",a.textContent=e.question,t.appendChild(a),Object.entries(e.options).forEach(([n,r])=>{const i=document.createElement("div");i.className="option";const d=document.createElement("span");d.className="option-letter",d.textContent=n;const l=document.createElement("span");l.className="option-text",l.textContent=r,i.appendChild(d),i.appendChild(l),i.addEventListener("click",()=>{const m=n===e.answer;m&&(this.score+=100,this.scoreText.setText(`Score: ${this.score}`));const p=m?"checkMark":"xMark",g=this.add.image(s.x,s.y,p).setScale(1).setDepth(150);if(s.isAnswered=!0,s.setAlpha(.5),this.tweens.killTweensOf(s),s.setScale(1),s.disableInteractive(),this.answeredQuestions++,e.explanation){const f=document.createElement("div");f.className="explanation",f.textContent=e.explanation,t.appendChild(f)}setTimeout(()=>{document.body.removeChild(o),document.body.removeChild(t),g.destroy(),this.answeredQuestions===5&&(console.log("All 5 questions answered, transitioning to Space Invaders..."),setTimeout(()=>{this.scene.start("space_invaders",{nextScene:"map2scene4"})},3e3))},2e3)}),t.appendChild(i)}),document.body.appendChild(o),document.body.appendChild(t)}setupScore(){this.scoreText=this.add.text(16,16,"Score: 0",{fontSize:"32px",fill:"#fff",backgroundColor:"#000",padding:{x:10,y:5}}).setScrollFactor(0).setDepth(200)}}class L extends h.Scene{constructor(){super({key:"map2scene4"}),this.player=null,this.score=0,this.scoreText=null,this.currentMap=1,this.questions=null,this.icons=[],this.answeredQuestions=0}preload(){this.load.image("map2scene4",c("images/map2scene4.png")),this.load.json("map-config4",c("data/map2/map-config4.json")),this.load.json("questions",c("data/questions.json")),this.load.image("checkMark",c("images/checkmark.png")),this.load.image("xMark",c("images/xmark.png")),this.load.on("loaderror",e=>{if(console.error("Error loading file:",e.key),e.key==="checkMark"){const s=this.add.graphics();s.fillStyle(65280),s.fillCircle(0,0,20),s.generateTexture("checkMark",40,40),s.destroy()}else if(e.key==="xMark"){const s=this.add.graphics();s.lineStyle(4,16711680),s.moveTo(-10,-10),s.lineTo(10,10),s.moveTo(10,-10),s.lineTo(-10,10),s.generateTexture("xMark",40,40),s.destroy()}})}create(){this.sound&&this.sound.context&&(this.sound.pauseOnBlur=!1);try{this.questions=this.cache.json.get("questions");const e=this.cache.json.get("map-config4");if(console.log("MapConfig loaded:",e),!e||!e.zones)throw new Error("Invalid map config structure");const t=e.zones[1]||e.zones[0];if(!t)throw new Error("No valid zone found in config");const o=this.add.image(t.x||400,t.y||300,"map2scene4");o.setOrigin(.5),o.setScale(t.scale||1),this.loadAwsIcons(e),this.setupScore()}catch(e){console.error("Error in create:",e),this.add.text(400,300,"Error loading level. Restarting...",{fontSize:"24px",fill:"#fff",backgroundColor:"#ff0000",padding:{x:10,y:5}}).setOrigin(.5),setTimeout(()=>{this.scene.start("map2scene4")},2e3)}}loadAwsIcons(e){e.zones.forEach(s=>{s.icons.forEach(t=>{const o=this.questions.find(n=>t.questionTypes.some(r=>n.question.toLowerCase().includes(r.toLowerCase())));if(o&&o.image)console.log("Loading icon from question:",o.image),this.load.image(`icon_${t.name}`,o.image);else{const n=`assets/images/services16/${t.category}/48/${t.name}`;console.log("Loading icon with constructed path:",n),this.load.image(`icon_${t.name}`,n)}const a=`/assets/images/services16/${t.category}/48/${t.name}`;this.load.image(`icon_${t.name}`,a)})}),this.load.once("complete",()=>{e.zones.forEach(s=>{s.icons.forEach(t=>{const o=this.add.image(t.x,t.y,`icon_${t.name}`).setInteractive().setScale(.5);console.log("Creating icon sprite:",t.name),this.setupIconInteraction(o,t),this.icons.push(o)})})}),this.load.start()}setupIconInteraction(e,s){e.setTint(16777215),e.isAnswered=!1,e.on("pointerover",()=>{e.isAnswered||(e.setScale(1.3),e.setTint(65280),this.showTooltip(s.name,e.x,e.y))}),e.on("pointerout",()=>{e.isAnswered||(e.setScale(1.3),e.setTint(16777215),this.hideTooltip())}),this.tweens.add({targets:e,scale:{from:1,to:1.4},duration:1e3,yoyo:!0,repeat:-1,ease:"Sine.easeInOut"}),e.on("pointerdown",()=>{if(e.isAnswered)return;let t,o=this.questions.filter(a=>s.questionTypes.some(n=>a.question.toLowerCase().includes(n.toLowerCase())));o.length===0&&(o=this.questions),t=h.Utils.Array.GetRandom(o),this.showQuestion(t,e)})}showTooltip(e,s,t){this.tooltip=this.add.text(s,t-60,e,{fontSize:"16px",fill:"#fff",backgroundColor:"#000",padding:{x:5,y:3}}).setOrigin(1).setDepth(150)}hideTooltip(){this.tooltip&&this.tooltip.destroy()}showQuestion(e,s){const t=document.createElement("div");t.className="question-container";const o=document.createElement("div");o.className="overlay";const a=document.createElement("div");a.className="question",a.textContent=e.question,t.appendChild(a),Object.entries(e.options).forEach(([n,r])=>{const i=document.createElement("div");i.className="option";const d=document.createElement("span");d.className="option-letter",d.textContent=n;const l=document.createElement("span");l.className="option-text",l.textContent=r,i.appendChild(d),i.appendChild(l),i.addEventListener("click",()=>{const m=n===e.answer;m&&(this.score+=100,this.scoreText.setText(`Score: ${this.score}`));const p=m?"checkMark":"xMark",g=this.add.image(s.x,s.y,p).setScale(1).setDepth(150);if(s.isAnswered=!0,s.setAlpha(.5),this.tweens.killTweensOf(s),s.setScale(1),s.disableInteractive(),this.answeredQuestions++,e.explanation){const f=document.createElement("div");f.className="explanation",f.textContent=e.explanation,t.appendChild(f)}setTimeout(()=>{document.body.removeChild(o),document.body.removeChild(t),g.destroy(),this.answeredQuestions===5&&(console.log("All 5 questions answered, transitioning to Space Invaders..."),setTimeout(()=>{this.scene.start("space_invaders",{nextScene:"map3scene1"})},3e3))},2e3)}),t.appendChild(i)}),document.body.appendChild(o),document.body.appendChild(t)}setupScore(){this.scoreText=this.add.text(16,16,"Score: 0",{fontSize:"32px",fill:"#fff",backgroundColor:"#000",padding:{x:10,y:5}}).setScrollFactor(0).setDepth(200)}}class _ extends h.Scene{constructor(){super({key:"map3scene1"}),this.player=null,this.score=0,this.scoreText=null,this.currentMap=1,this.questions=null,this.icons=[],this.answeredQuestions=0}preload(){this.load.image("map3scene1",c("images/map3scene1.png")),this.load.json("map-config",c("data/map3/map-config.json")),this.load.json("questions",c("data/questions.json")),this.load.image("checkMark",c("images/checkmark.png")),this.load.image("xMark",c("images/xmark.png")),this.load.on("loaderror",e=>{if(console.error("Error loading file:",e.key),e.key==="checkMark"){const s=this.add.graphics();s.fillStyle(65280),s.fillCircle(0,0,20),s.generateTexture("checkMark",40,40),s.destroy()}else if(e.key==="xMark"){const s=this.add.graphics();s.lineStyle(4,16711680),s.moveTo(-10,-10),s.lineTo(10,10),s.moveTo(10,-10),s.lineTo(-10,10),s.generateTexture("xMark",40,40),s.destroy()}})}create(){this.sound&&this.sound.context&&(this.sound.pauseOnBlur=!1);try{this.questions=this.cache.json.get("questions");const e=this.cache.json.get("map-config");if(console.log("MapConfig loaded:",e),!e||!e.zones)throw new Error("Invalid map config structure");const t=e.zones[1]||e.zones[0];if(!t)throw new Error("No valid zone found in config");const o=this.add.image(t.x||400,t.y||300,"map3scene1");o.setOrigin(.5),o.setScale(t.scale||1),this.loadAwsIcons(e),this.setupScore()}catch(e){console.error("Error in create:",e),this.add.text(400,300,"Error loading level. Restarting...",{fontSize:"24px",fill:"#fff",backgroundColor:"#ff0000",padding:{x:10,y:5}}).setOrigin(.5),setTimeout(()=>{this.scene.start("map3scene1")},2e3)}}loadAwsIcons(e){e.zones.forEach(s=>{s.icons.forEach(t=>{const o=this.questions.find(n=>t.questionTypes.some(r=>n.question.toLowerCase().includes(r.toLowerCase())));if(o&&o.image)console.log("Loading icon from question:",o.image),this.load.image(`icon_${t.name}`,o.image);else{const n=`assets/images/services16/${t.category}/48/${t.name}`;console.log("Loading icon with constructed path:",n),this.load.image(`icon_${t.name}`,n)}const a=`/assets/images/services16/${t.category}/48/${t.name}`;this.load.image(`icon_${t.name}`,a)})}),this.load.once("complete",()=>{e.zones.forEach(s=>{s.icons.forEach(t=>{const o=this.add.image(t.x,t.y,`icon_${t.name}`).setInteractive().setScale(.5);console.log("Creating icon sprite:",t.name),this.setupIconInteraction(o,t),this.icons.push(o)})})}),this.load.start()}setupIconInteraction(e,s){e.setTint(16777215),e.isAnswered=!1,e.on("pointerover",()=>{e.isAnswered||(e.setScale(1.3),e.setTint(65280),this.showTooltip(s.name,e.x,e.y))}),e.on("pointerout",()=>{e.isAnswered||(e.setScale(1.3),e.setTint(16777215),this.hideTooltip())}),this.tweens.add({targets:e,scale:{from:1,to:1.4},duration:1e3,yoyo:!0,repeat:-1,ease:"Sine.easeInOut"}),e.on("pointerdown",()=>{if(e.isAnswered)return;let t,o=this.questions.filter(a=>s.questionTypes.some(n=>a.question.toLowerCase().includes(n.toLowerCase())));o.length===0&&(o=this.questions),t=h.Utils.Array.GetRandom(o),this.showQuestion(t,e)})}showTooltip(e,s,t){this.tooltip=this.add.text(s,t-60,e,{fontSize:"16px",fill:"#fff",backgroundColor:"#000",padding:{x:5,y:3}}).setOrigin(1).setDepth(150)}hideTooltip(){this.tooltip&&this.tooltip.destroy()}showQuestion(e,s){const t=document.createElement("div");t.className="question-container";const o=document.createElement("div");o.className="overlay";const a=document.createElement("div");a.className="question",a.textContent=e.question,t.appendChild(a),Object.entries(e.options).forEach(([n,r])=>{const i=document.createElement("div");i.className="option";const d=document.createElement("span");d.className="option-letter",d.textContent=n;const l=document.createElement("span");l.className="option-text",l.textContent=r,i.appendChild(d),i.appendChild(l),i.addEventListener("click",()=>{const m=n===e.answer;m&&(this.score+=100,this.scoreText.setText(`Score: ${this.score}`));const p=m?"checkMark":"xMark",g=this.add.image(s.x,s.y,p).setScale(1).setDepth(150);if(s.isAnswered=!0,s.setAlpha(.5),this.tweens.killTweensOf(s),s.setScale(1),s.disableInteractive(),this.answeredQuestions++,e.explanation){const f=document.createElement("div");f.className="explanation",f.textContent=e.explanation,t.appendChild(f)}setTimeout(()=>{document.body.removeChild(o),document.body.removeChild(t),g.destroy(),this.answeredQuestions===5&&(console.log("All 5 questions answered, transitioning to Space Invaders..."),setTimeout(()=>{this.scene.start("space_invaders",{nextScene:"map3scene2"})},3e3))},2e3)}),t.appendChild(i)}),document.body.appendChild(o),document.body.appendChild(t)}setupScore(){this.scoreText=this.add.text(16,16,"Score: 0",{fontSize:"32px",fill:"#fff",backgroundColor:"#000",padding:{x:10,y:5}}).setScrollFactor(0).setDepth(200)}}class P extends h.Scene{constructor(){super({key:"map3scene2"}),this.player=null,this.score=0,this.scoreText=null,this.currentMap=1,this.questions=null,this.icons=[],this.answeredQuestions=0}preload(){this.load.image("map3scene2",c("images/map3scene2.png")),this.load.json("map-config2",c("data/map3/map-config2.json")),this.load.json("questions",c("data/questions.json")),this.load.image("checkMark",c("images/checkmark.png")),this.load.image("xMark",c("images/xmark.png")),this.load.on("loaderror",e=>{if(console.error("Error loading file:",e.key),e.key==="checkMark"){const s=this.add.graphics();s.fillStyle(65280),s.fillCircle(0,0,20),s.generateTexture("checkMark",40,40),s.destroy()}else if(e.key==="xMark"){const s=this.add.graphics();s.lineStyle(4,16711680),s.moveTo(-10,-10),s.lineTo(10,10),s.moveTo(10,-10),s.lineTo(-10,10),s.generateTexture("xMark",40,40),s.destroy()}})}create(){this.sound&&this.sound.context&&(this.sound.pauseOnBlur=!1);try{this.questions=this.cache.json.get("questions");const e=this.cache.json.get("map-config3");if(console.log("MapConfig loaded:",e),!e||!e.zones)throw new Error("Invalid map config structure");const t=e.zones[1]||e.zones[0];if(!t)throw new Error("No valid zone found in config");const o=this.add.image(t.x||400,t.y||300,"map3scene2");o.setOrigin(.5),o.setScale(t.scale||1),this.loadAwsIcons(e),this.setupScore()}catch(e){console.error("Error in create:",e),this.add.text(400,300,"Error loading level. Restarting...",{fontSize:"24px",fill:"#fff",backgroundColor:"#ff0000",padding:{x:10,y:5}}).setOrigin(.5),setTimeout(()=>{this.scene.start("map3scene2")},2e3)}}loadAwsIcons(e){e.zones.forEach(s=>{s.icons.forEach(t=>{const o=this.questions.find(n=>t.questionTypes.some(r=>n.question.toLowerCase().includes(r.toLowerCase())));if(o&&o.image)console.log("Loading icon from question:",o.image),this.load.image(`icon_${t.name}`,o.image);else{const n=`assets/images/services16/${t.category}/48/${t.name}`;console.log("Loading icon with constructed path:",n),this.load.image(`icon_${t.name}`,n)}const a=`/assets/images/services16/${t.category}/48/${t.name}`;this.load.image(`icon_${t.name}`,a)})}),this.load.once("complete",()=>{e.zones.forEach(s=>{s.icons.forEach(t=>{const o=this.add.image(t.x,t.y,`icon_${t.name}`).setInteractive().setScale(.5);console.log("Creating icon sprite:",t.name),this.setupIconInteraction(o,t),this.icons.push(o)})})}),this.load.start()}setupIconInteraction(e,s){e.setTint(16777215),e.isAnswered=!1,e.on("pointerover",()=>{e.isAnswered||(e.setScale(1.3),e.setTint(65280),this.showTooltip(s.name,e.x,e.y))}),e.on("pointerout",()=>{e.isAnswered||(e.setScale(1.3),e.setTint(16777215),this.hideTooltip())}),this.tweens.add({targets:e,scale:{from:1,to:1.4},duration:1e3,yoyo:!0,repeat:-1,ease:"Sine.easeInOut"}),e.on("pointerdown",()=>{if(e.isAnswered)return;let t,o=this.questions.filter(a=>s.questionTypes.some(n=>a.question.toLowerCase().includes(n.toLowerCase())));o.length===0&&(o=this.questions),t=h.Utils.Array.GetRandom(o),this.showQuestion(t,e)})}showTooltip(e,s,t){this.tooltip=this.add.text(s,t-60,e,{fontSize:"16px",fill:"#fff",backgroundColor:"#000",padding:{x:5,y:3}}).setOrigin(1).setDepth(150)}hideTooltip(){this.tooltip&&this.tooltip.destroy()}showQuestion(e,s){const t=document.createElement("div");t.className="question-container";const o=document.createElement("div");o.className="overlay";const a=document.createElement("div");a.className="question",a.textContent=e.question,t.appendChild(a),Object.entries(e.options).forEach(([n,r])=>{const i=document.createElement("div");i.className="option";const d=document.createElement("span");d.className="option-letter",d.textContent=n;const l=document.createElement("span");l.className="option-text",l.textContent=r,i.appendChild(d),i.appendChild(l),i.addEventListener("click",()=>{const m=n===e.answer;m&&(this.score+=100,this.scoreText.setText(`Score: ${this.score}`));const p=m?"checkMark":"xMark",g=this.add.image(s.x,s.y,p).setScale(1).setDepth(150);if(s.isAnswered=!0,s.setAlpha(.5),this.tweens.killTweensOf(s),s.setScale(1),s.disableInteractive(),this.answeredQuestions++,e.explanation){const f=document.createElement("div");f.className="explanation",f.textContent=e.explanation,t.appendChild(f)}setTimeout(()=>{document.body.removeChild(o),document.body.removeChild(t),g.destroy(),this.answeredQuestions===5&&(console.log("All 5 questions answered, transitioning to Space Invaders..."),setTimeout(()=>{this.scene.start("space_invaders",{nextScene:"map3scene3"})},3e3))},2e3)}),t.appendChild(i)}),document.body.appendChild(o),document.body.appendChild(t)}setupScore(){this.scoreText=this.add.text(16,16,"Score: 0",{fontSize:"32px",fill:"#fff",backgroundColor:"#000",padding:{x:10,y:5}}).setScrollFactor(0).setDepth(200)}}class D extends h.Scene{constructor(){super({key:"map3scene3"}),this.player=null,this.score=0,this.scoreText=null,this.currentMap=1,this.questions=null,this.icons=[],this.answeredQuestions=0}preload(){this.load.image("map3scene3",c("images/map3scene3.png")),this.load.json("map-config3",c("data/map3/map-config3.json")),this.load.json("questions",c("data/questions.json")),this.load.image("checkMark",c("images/checkmark.png")),this.load.image("xMark",c("images/xmark.png")),this.load.on("loaderror",e=>{if(console.error("Error loading file:",e.key),e.key==="checkMark"){const s=this.add.graphics();s.fillStyle(65280),s.fillCircle(0,0,20),s.generateTexture("checkMark",40,40),s.destroy()}else if(e.key==="xMark"){const s=this.add.graphics();s.lineStyle(4,16711680),s.moveTo(-10,-10),s.lineTo(10,10),s.moveTo(10,-10),s.lineTo(-10,10),s.generateTexture("xMark",40,40),s.destroy()}})}create(){this.sound&&this.sound.context&&(this.sound.pauseOnBlur=!1);try{this.questions=this.cache.json.get("questions");const e=this.cache.json.get("map-config3");if(console.log("MapConfig loaded:",e),!e||!e.zones)throw new Error("Invalid map config structure");const t=e.zones[1]||e.zones[0];if(!t)throw new Error("No valid zone found in config");const o=this.add.image(t.x||400,t.y||300,"map3scene3");o.setOrigin(.5),o.setScale(t.scale||1),this.loadAwsIcons(e),this.setupScore()}catch(e){console.error("Error in create:",e),this.add.text(400,300,"Error loading level. Restarting...",{fontSize:"24px",fill:"#fff",backgroundColor:"#ff0000",padding:{x:10,y:5}}).setOrigin(.5),setTimeout(()=>{this.scene.start("map3scene3")},2e3)}}loadAwsIcons(e){e.zones.forEach(s=>{s.icons.forEach(t=>{const o=this.questions.find(n=>t.questionTypes.some(r=>n.question.toLowerCase().includes(r.toLowerCase())));if(o&&o.image)console.log("Loading icon from question:",o.image),this.load.image(`icon_${t.name}`,o.image);else{const n=`assets/images/services16/${t.category}/48/${t.name}`;console.log("Loading icon with constructed path:",n),this.load.image(`icon_${t.name}`,n)}const a=`/assets/images/services16/${t.category}/48/${t.name}`;this.load.image(`icon_${t.name}`,a)})}),this.load.once("complete",()=>{e.zones.forEach(s=>{s.icons.forEach(t=>{const o=this.add.image(t.x,t.y,`icon_${t.name}`).setInteractive().setScale(.5);console.log("Creating icon sprite:",t.name),this.setupIconInteraction(o,t),this.icons.push(o)})})}),this.load.start()}setupIconInteraction(e,s){e.setTint(16777215),e.isAnswered=!1,e.on("pointerover",()=>{e.isAnswered||(e.setScale(1.3),e.setTint(65280),this.showTooltip(s.name,e.x,e.y))}),e.on("pointerout",()=>{e.isAnswered||(e.setScale(1.3),e.setTint(16777215),this.hideTooltip())}),this.tweens.add({targets:e,scale:{from:1,to:1.4},duration:1e3,yoyo:!0,repeat:-1,ease:"Sine.easeInOut"}),e.on("pointerdown",()=>{if(e.isAnswered)return;let t,o=this.questions.filter(a=>s.questionTypes.some(n=>a.question.toLowerCase().includes(n.toLowerCase())));o.length===0&&(o=this.questions),t=h.Utils.Array.GetRandom(o),this.showQuestion(t,e)})}showTooltip(e,s,t){this.tooltip=this.add.text(s,t-60,e,{fontSize:"16px",fill:"#fff",backgroundColor:"#000",padding:{x:5,y:3}}).setOrigin(1).setDepth(150)}hideTooltip(){this.tooltip&&this.tooltip.destroy()}showQuestion(e,s){const t=document.createElement("div");t.className="question-container";const o=document.createElement("div");o.className="overlay";const a=document.createElement("div");a.className="question",a.textContent=e.question,t.appendChild(a),Object.entries(e.options).forEach(([n,r])=>{const i=document.createElement("div");i.className="option";const d=document.createElement("span");d.className="option-letter",d.textContent=n;const l=document.createElement("span");l.className="option-text",l.textContent=r,i.appendChild(d),i.appendChild(l),i.addEventListener("click",()=>{const m=n===e.answer;m&&(this.score+=100,this.scoreText.setText(`Score: ${this.score}`));const p=m?"checkMark":"xMark",g=this.add.image(s.x,s.y,p).setScale(1).setDepth(150);if(s.isAnswered=!0,s.setAlpha(.5),this.tweens.killTweensOf(s),s.setScale(1),s.disableInteractive(),this.answeredQuestions++,e.explanation){const f=document.createElement("div");f.className="explanation",f.textContent=e.explanation,t.appendChild(f)}setTimeout(()=>{document.body.removeChild(o),document.body.removeChild(t),g.destroy(),this.answeredQuestions===5&&(console.log("All 5 questions answered, transitioning to Space Invaders..."),setTimeout(()=>{this.scene.start("space_invaders",{nextScene:"map3scene4"})},3e3))},2e3)}),t.appendChild(i)}),document.body.appendChild(o),document.body.appendChild(t)}setupScore(){this.scoreText=this.add.text(16,16,"Score: 0",{fontSize:"32px",fill:"#fff",backgroundColor:"#000",padding:{x:10,y:5}}).setScrollFactor(0).setDepth(200)}}class B extends h.Scene{constructor(){super({key:"map3scene4"}),this.player=null,this.score=0,this.scoreText=null,this.currentMap=1,this.questions=null,this.icons=[],this.answeredQuestions=0}preload(){this.load.image("map3scene4","/assets/images/map3scene4.png"),this.load.json("map-config4","/assets/data/map3/map-config4.json"),this.load.json("questions","/assets/data/questions.json"),this.load.image("checkMark","/assets/icons/checkmark.png"),this.load.image("xMark","/assets/icons/xmark.png"),this.load.on("loaderror",e=>{if(console.error("Error loading file:",e.key),e.key==="checkMark"){const s=this.add.graphics();s.fillStyle(65280),s.fillCircle(0,0,20),s.generateTexture("checkMark",40,40),s.destroy()}else if(e.key==="xMark"){const s=this.add.graphics();s.lineStyle(4,16711680),s.moveTo(-10,-10),s.lineTo(10,10),s.moveTo(10,-10),s.lineTo(-10,10),s.generateTexture("xMark",40,40),s.destroy()}})}create(){this.sound&&this.sound.context&&(this.sound.pauseOnBlur=!1);try{this.questions=this.cache.json.get("questions");const e=this.cache.json.get("map-config4");if(console.log("MapConfig loaded:",e),!e||!e.zones)throw new Error("Invalid map config structure");const t=e.zones[1]||e.zones[0];if(!t)throw new Error("No valid zone found in config");const o=this.add.image(t.x||400,t.y||300,"map3scene4");o.setOrigin(.5),o.setScale(t.scale||1),this.loadAwsIcons(e),this.setupScore()}catch(e){console.error("Error in create:",e),this.add.text(400,300,"Error loading level. Restarting...",{fontSize:"24px",fill:"#fff",backgroundColor:"#ff0000",padding:{x:10,y:5}}).setOrigin(.5),setTimeout(()=>{this.scene.start("map3scene4")},2e3)}}loadAwsIcons(e){e.zones.forEach(s=>{s.icons.forEach(t=>{const o=this.questions.find(n=>t.questionTypes.some(r=>n.question.toLowerCase().includes(r.toLowerCase())));if(o&&o.image)console.log("Loading icon from question:",o.image),this.load.image(`icon_${t.name}`,o.image);else{const n=`assets/images/services16/${t.category}/48/${t.name}`;console.log("Loading icon with constructed path:",n),this.load.image(`icon_${t.name}`,n)}const a=`/assets/images/services16/${t.category}/48/${t.name}`;this.load.image(`icon_${t.name}`,a)})}),this.load.once("complete",()=>{e.zones.forEach(s=>{s.icons.forEach(t=>{const o=this.add.image(t.x,t.y,`icon_${t.name}`).setInteractive().setScale(.5);console.log("Creating icon sprite:",t.name),this.setupIconInteraction(o,t),this.icons.push(o)})})}),this.load.start()}setupIconInteraction(e,s){e.setTint(16777215),e.isAnswered=!1,e.on("pointerover",()=>{e.isAnswered||(e.setScale(1.3),e.setTint(65280),this.showTooltip(s.name,e.x,e.y))}),e.on("pointerout",()=>{e.isAnswered||(e.setScale(1.3),e.setTint(16777215),this.hideTooltip())}),this.tweens.add({targets:e,scale:{from:1,to:1.4},duration:1e3,yoyo:!0,repeat:-1,ease:"Sine.easeInOut"}),e.on("pointerdown",()=>{if(e.isAnswered)return;let t,o=this.questions.filter(a=>s.questionTypes.some(n=>a.question.toLowerCase().includes(n.toLowerCase())));o.length===0&&(o=this.questions),t=h.Utils.Array.GetRandom(o),this.showQuestion(t,e)})}showTooltip(e,s,t){this.tooltip=this.add.text(s,t-60,e,{fontSize:"16px",fill:"#fff",backgroundColor:"#000",padding:{x:5,y:3}}).setOrigin(1).setDepth(150)}hideTooltip(){this.tooltip&&this.tooltip.destroy()}showQuestion(e,s){const t=document.createElement("div");t.className="question-container";const o=document.createElement("div");o.className="overlay";const a=document.createElement("div");a.className="question",a.textContent=e.question,t.appendChild(a),Object.entries(e.options).forEach(([n,r])=>{const i=document.createElement("div");i.className="option";const d=document.createElement("span");d.className="option-letter",d.textContent=n;const l=document.createElement("span");l.className="option-text",l.textContent=r,i.appendChild(d),i.appendChild(l),i.addEventListener("click",()=>{const m=n===e.answer;m&&(this.score+=100,this.scoreText.setText(`Score: ${this.score}`));const p=m?"checkMark":"xMark",g=this.add.image(s.x,s.y,p).setScale(1).setDepth(150);if(s.isAnswered=!0,s.setAlpha(.5),this.tweens.killTweensOf(s),s.setScale(1),s.disableInteractive(),this.answeredQuestions++,e.explanation){const f=document.createElement("div");f.className="explanation",f.textContent=e.explanation,t.appendChild(f)}setTimeout(()=>{document.body.removeChild(o),document.body.removeChild(t),g.destroy(),this.answeredQuestions===5&&(console.log("All 5 questions answered, transitioning to Space Invaders..."),setTimeout(()=>{this.scene.start("space_invaders",{nextScene:"gameover"})},3e3))},2e3)}),t.appendChild(i)}),document.body.appendChild(o),document.body.appendChild(t)}setupScore(){this.scoreText=this.add.text(16,16,"Score: 0",{fontSize:"32px",fill:"#fff",backgroundColor:"#000",padding:{x:10,y:5}}).setScrollFactor(0).setDepth(200)}}class G extends h.Scene{constructor(){super({key:"map4_game1"}),this.player=null,this.score=0,this.scoreText=null,this.currentMap=1,this.questions=null,this.icons=[],this.answeredQuestions=0}preload(){this.load.image("map4scene1",c("images/map4scene1.png")),this.load.json("map-config",c("data/map4/map-config.json")),this.load.json("questions",c("data/questions.json")),this.load.image("checkMark",c("images/checkmark.png")),this.load.image("xMark",c("images/xmark.png")),this.load.on("loaderror",e=>{if(console.error("Error loading file:",e.key),e.key==="checkMark"){const s=this.add.graphics();s.fillStyle(65280),s.fillCircle(0,0,20),s.generateTexture("checkMark",40,40),s.destroy()}else if(e.key==="xMark"){const s=this.add.graphics();s.lineStyle(4,16711680),s.moveTo(-10,-10),s.lineTo(10,10),s.moveTo(10,-10),s.lineTo(-10,10),s.generateTexture("xMark",40,40),s.destroy()}})}create(){this.sound&&this.sound.context&&(this.sound.pauseOnBlur=!1);try{this.questions=this.cache.json.get("questions");const e=this.cache.json.get("map-config");if(console.log("MapConfig loaded:",e),!e||!e.zones)throw new Error("Invalid map config structure");const t=e.zones[1]||e.zones[0];if(!t)throw new Error("No valid zone found in config");const o=this.add.image(t.x||400,t.y||300,"map4scene1");o.setOrigin(.5),o.setScale(t.scale||1),this.loadAwsIcons(e),this.setupScore()}catch(e){console.error("Error in create:",e),this.add.text(400,300,"Error loading level. Restarting...",{fontSize:"24px",fill:"#fff",backgroundColor:"#ff0000",padding:{x:10,y:5}}).setOrigin(.5),setTimeout(()=>{this.scene.start("map4_game1")},2e3)}}loadAwsIcons(e){e.zones.forEach(s=>{s.icons.forEach(t=>{const o=this.questions.find(n=>t.questionTypes.some(r=>n.question.toLowerCase().includes(r.toLowerCase())));if(o&&o.image)console.log("Loading icon from question:",o.image),this.load.image(`icon_${t.name}`,o.image);else{const n=`assets/images/services16/${t.category}/48/${t.name}`;console.log("Loading icon with constructed path:",n),this.load.image(`icon_${t.name}`,n)}const a=`/assets/images/services16/${t.category}/48/${t.name}`;this.load.image(`icon_${t.name}`,a)})}),this.load.once("complete",()=>{e.zones.forEach(s=>{s.icons.forEach(t=>{const o=this.add.image(t.x,t.y,`icon_${t.name}`).setInteractive().setScale(.5);console.log("Creating icon sprite:",t.name),this.setupIconInteraction(o,t),this.icons.push(o)})})}),this.load.start()}setupIconInteraction(e,s){e.setTint(16777215),e.isAnswered=!1,e.on("pointerover",()=>{e.isAnswered||(e.setScale(1.3),e.setTint(65280),this.showTooltip(s.name,e.x,e.y))}),e.on("pointerout",()=>{e.isAnswered||(e.setScale(1.3),e.setTint(16777215),this.hideTooltip())}),this.tweens.add({targets:e,scale:{from:1,to:1.4},duration:1e3,yoyo:!0,repeat:-1,ease:"Sine.easeInOut"}),e.on("pointerdown",()=>{if(e.isAnswered)return;let t,o=this.questions.filter(a=>s.questionTypes.some(n=>a.question.toLowerCase().includes(n.toLowerCase())));o.length===0&&(o=this.questions),t=h.Utils.Array.GetRandom(o),this.showQuestion(t,e)})}showTooltip(e,s,t){this.tooltip=this.add.text(s,t-60,e,{fontSize:"16px",fill:"#fff",backgroundColor:"#000",padding:{x:5,y:3}}).setOrigin(1).setDepth(150)}hideTooltip(){this.tooltip&&this.tooltip.destroy()}showQuestion(e,s){const t=document.createElement("div");t.className="question-container";const o=document.createElement("div");o.className="overlay";const a=document.createElement("div");a.className="question",a.textContent=e.question,t.appendChild(a),Object.entries(e.options).forEach(([n,r])=>{const i=document.createElement("div");i.className="option";const d=document.createElement("span");d.className="option-letter",d.textContent=n;const l=document.createElement("span");l.className="option-text",l.textContent=r,i.appendChild(d),i.appendChild(l),i.addEventListener("click",()=>{const m=n===e.answer;m&&(this.score+=100,this.scoreText.setText(`Score: ${this.score}`));const p=m?"checkMark":"xMark",g=this.add.image(s.x,s.y,p).setScale(1).setDepth(150);if(s.isAnswered=!0,s.setAlpha(.5),this.tweens.killTweensOf(s),s.setScale(1),s.disableInteractive(),this.answeredQuestions++,e.explanation){const f=document.createElement("div");f.className="explanation",f.textContent=e.explanation,t.appendChild(f)}setTimeout(()=>{document.body.removeChild(o),document.body.removeChild(t),g.destroy(),this.answeredQuestions===5&&(console.log("All 5 questions answered, transitioning to Space Invaders..."),setTimeout(()=>{this.scene.start("space_invaders",{nextScene:"map4_game2"})},3e3))},2e3)}),t.appendChild(i)}),document.body.appendChild(o),document.body.appendChild(t)}setupScore(){this.scoreText=this.add.text(16,16,"Score: 0",{fontSize:"32px",fill:"#fff",backgroundColor:"#000",padding:{x:10,y:5}}).setScrollFactor(0).setDepth(200)}}class R extends h.Scene{constructor(){super({key:"map4_game2"}),this.player=null,this.score=0,this.scoreText=null,this.currentMap=1,this.questions=null,this.icons=[],this.answeredQuestions=0}preload(){this.load.image("map4scene2",c("images/map4scene2.png")),this.load.json("map-config2",c("data/map4/map-config2.json")),this.load.json("questions",c("data/questions.json")),this.load.image("checkMark",c("images/checkmark.png")),this.load.image("xMark",c("images/xmark.png")),this.load.on("loaderror",e=>{if(console.error("Error loading file:",e.key),e.key==="checkMark"){const s=this.add.graphics();s.fillStyle(65280),s.fillCircle(0,0,20),s.generateTexture("checkMark",40,40),s.destroy()}else if(e.key==="xMark"){const s=this.add.graphics();s.lineStyle(4,16711680),s.moveTo(-10,-10),s.lineTo(10,10),s.moveTo(10,-10),s.lineTo(-10,10),s.generateTexture("xMark",40,40),s.destroy()}})}create(){this.sound&&this.sound.context&&(this.sound.pauseOnBlur=!1);try{this.questions=this.cache.json.get("questions");const e=this.cache.json.get("map-config2");if(console.log("MapConfig loaded:",e),!e||!e.zones)throw new Error("Invalid map config structure");const t=e.zones[1]||e.zones[0];if(!t)throw new Error("No valid zone found in config");const o=this.add.image(t.x||400,t.y||300,"map4scene2");o.setOrigin(.5),o.setScale(t.scale||1),this.loadAwsIcons(e),this.setupScore()}catch(e){console.error("Error in create:",e),this.add.text(400,300,"Error loading level. Restarting...",{fontSize:"24px",fill:"#fff",backgroundColor:"#ff0000",padding:{x:10,y:5}}).setOrigin(.5),setTimeout(()=>{this.scene.start("map4_game2")},2e3)}}loadAwsIcons(e){e.zones.forEach(s=>{s.icons.forEach(t=>{const o=this.questions.find(a=>t.questionTypes.some(n=>a.question.toLowerCase().includes(n.toLowerCase())));if(o&&o.image)console.log("Loading icon from question:",o.image),this.load.image(`icon_${t.name}`,o.image);else{const a=`assets/images/services16/${t.category}/48/${t.name}`;console.log("Loading icon with constructed path:",a),this.load.image(`icon_${t.name}`,a)}})}),this.load.once("complete",()=>{e.zones.forEach(s=>{s.icons.forEach(t=>{const o=this.add.image(t.x,t.y,`icon_${t.name}`).setInteractive().setScale(.5);console.log("Creating icon sprite:",t.name),this.setupIconInteraction(o,t),this.icons.push(o)})})}),this.load.start()}setupIconInteraction(e,s){e.setTint(16777215),e.isAnswered=!1,e.on("pointerover",()=>{e.isAnswered||(e.setScale(1.3),e.setTint(65280),this.showTooltip(s.name,e.x,e.y))}),e.on("pointerout",()=>{e.isAnswered||(e.setScale(1.3),e.setTint(16777215),this.hideTooltip())}),this.tweens.add({targets:e,scale:{from:1,to:1.4},duration:1e3,yoyo:!0,repeat:-1,ease:"Sine.easeInOut"}),e.on("pointerdown",()=>{if(e.isAnswered)return;let t,o=this.questions.filter(a=>s.questionTypes.some(n=>a.question.toLowerCase().includes(n.toLowerCase())));o.length===0&&(o=this.questions),t=h.Utils.Array.GetRandom(o),this.showQuestion(t,e)})}showTooltip(e,s,t){this.tooltip=this.add.text(s,t-60,e,{fontSize:"16px",fill:"#fff",backgroundColor:"#000",padding:{x:5,y:3}}).setOrigin(1).setDepth(150)}hideTooltip(){this.tooltip&&this.tooltip.destroy()}showQuestion(e,s){const t=document.createElement("div");t.className="question-container";const o=document.createElement("div");o.className="overlay";const a=document.createElement("div");a.className="question",a.textContent=e.question,t.appendChild(a),Object.entries(e.options).forEach(([n,r])=>{const i=document.createElement("div");i.className="option";const d=document.createElement("span");d.className="option-letter",d.textContent=n;const l=document.createElement("span");l.className="option-text",l.textContent=r,i.appendChild(d),i.appendChild(l),i.addEventListener("click",()=>{const m=n===e.answer;m&&(this.score+=100,this.scoreText.setText(`Score: ${this.score}`));const p=m?"checkMark":"xMark",g=this.add.image(s.x,s.y,p).setScale(1).setDepth(150);if(s.isAnswered=!0,s.setAlpha(.5),this.tweens.killTweensOf(s),s.setScale(1),s.disableInteractive(),this.answeredQuestions++,e.explanation){const f=document.createElement("div");f.className="explanation",f.textContent=e.explanation,t.appendChild(f)}setTimeout(()=>{document.body.removeChild(o),document.body.removeChild(t),g.destroy(),this.answeredQuestions===5&&(console.log("All 5 questions answered, transitioning to Space Invaders..."),setTimeout(()=>{this.scene.start("space_invaders",{nextScene:"map4_game3"})},3e3))},2e3)}),t.appendChild(i)}),document.body.appendChild(o),document.body.appendChild(t)}setupScore(){this.scoreText=this.add.text(16,16,"Score: 0",{fontSize:"32px",fill:"#fff",backgroundColor:"#000",padding:{x:10,y:5}}).setScrollFactor(0).setDepth(200)}}class U extends h.Scene{constructor(){super({key:"map4_game3"}),this.player=null,this.score=0,this.scoreText=null,this.currentMap=1,this.questions=null,this.icons=[],this.answeredQuestions=0}preload(){this.load.image("map4scene3","/assets/images/map4scene3.png"),this.load.json("map-config3","/assets/data/map4/map-config3.json"),this.load.json("questions","/assets/data/questions.json"),this.load.image("checkMark","/assets/icons/checkmark.png"),this.load.image("xMark","/assets/icons/xmark.png"),this.load.on("loaderror",e=>{if(console.error("Error loading file:",e.key),e.key==="checkMark"){const s=this.add.graphics();s.fillStyle(65280),s.fillCircle(0,0,20),s.generateTexture("checkMark",40,40),s.destroy()}else if(e.key==="xMark"){const s=this.add.graphics();s.lineStyle(4,16711680),s.moveTo(-10,-10),s.lineTo(10,10),s.moveTo(10,-10),s.lineTo(-10,10),s.generateTexture("xMark",40,40),s.destroy()}})}create(){this.sound&&this.sound.context&&(this.sound.pauseOnBlur=!1);try{this.questions=this.cache.json.get("questions");const e=this.cache.json.get("map-config3");if(console.log("MapConfig loaded:",e),!e||!e.zones)throw new Error("Invalid map config structure");const t=e.zones[1]||e.zones[0];if(!t)throw new Error("No valid zone found in config");const o=this.add.image(t.x||400,t.y||300,"map4scene3");o.setOrigin(.5),o.setScale(t.scale||1),this.loadAwsIcons(e),this.setupScore()}catch(e){console.error("Error in create:",e),this.add.text(400,300,"Error loading level. Restarting...",{fontSize:"24px",fill:"#fff",backgroundColor:"#ff0000",padding:{x:10,y:5}}).setOrigin(.5),setTimeout(()=>{this.scene.start("map4_game3")},2e3)}}loadAwsIcons(e){e.zones.forEach(s=>{s.icons.forEach(t=>{const o=this.questions.find(n=>t.questionTypes.some(r=>n.question.toLowerCase().includes(r.toLowerCase())));if(o&&o.image)console.log("Loading icon from question:",o.image),this.load.image(`icon_${t.name}`,o.image);else{const n=`assets/images/services16/${t.category}/48/${t.name}`;console.log("Loading icon with constructed path:",n),this.load.image(`icon_${t.name}`,n)}const a=`/assets/images/services16/${t.category}/48/${t.name}`;this.load.image(`icon_${t.name}`,a)})}),this.load.once("complete",()=>{e.zones.forEach(s=>{s.icons.forEach(t=>{const o=this.add.image(t.x,t.y,`icon_${t.name}`).setInteractive().setScale(.5);console.log("Creating icon sprite:",t.name),this.setupIconInteraction(o,t),this.icons.push(o)})})}),this.load.start()}setupIconInteraction(e,s){e.setTint(16777215),e.isAnswered=!1,e.on("pointerover",()=>{e.isAnswered||(e.setScale(1.3),e.setTint(65280),this.showTooltip(s.name,e.x,e.y))}),e.on("pointerout",()=>{e.isAnswered||(e.setScale(1.3),e.setTint(16777215),this.hideTooltip())}),this.tweens.add({targets:e,scale:{from:1,to:1.4},duration:1e3,yoyo:!0,repeat:-1,ease:"Sine.easeInOut"}),e.on("pointerdown",()=>{if(e.isAnswered)return;let t,o=this.questions.filter(a=>s.questionTypes.some(n=>a.question.toLowerCase().includes(n.toLowerCase())));o.length===0&&(o=this.questions),t=h.Utils.Array.GetRandom(o),this.showQuestion(t,e)})}showTooltip(e,s,t){this.tooltip=this.add.text(s,t-60,e,{fontSize:"16px",fill:"#fff",backgroundColor:"#000",padding:{x:5,y:3}}).setOrigin(1).setDepth(150)}hideTooltip(){this.tooltip&&this.tooltip.destroy()}showQuestion(e,s){const t=document.createElement("div");t.className="question-container";const o=document.createElement("div");o.className="overlay";const a=document.createElement("div");a.className="question",a.textContent=e.question,t.appendChild(a),Object.entries(e.options).forEach(([n,r])=>{const i=document.createElement("div");i.className="option";const d=document.createElement("span");d.className="option-letter",d.textContent=n;const l=document.createElement("span");l.className="option-text",l.textContent=r,i.appendChild(d),i.appendChild(l),i.addEventListener("click",()=>{const m=n===e.answer;m&&(this.score+=100,this.scoreText.setText(`Score: ${this.score}`));const p=m?"checkMark":"xMark",g=this.add.image(s.x,s.y,p).setScale(1).setDepth(150);if(s.isAnswered=!0,s.setAlpha(.5),this.tweens.killTweensOf(s),s.setScale(1),s.disableInteractive(),this.answeredQuestions++,e.explanation){const f=document.createElement("div");f.className="explanation",f.textContent=e.explanation,t.appendChild(f)}setTimeout(()=>{document.body.removeChild(o),document.body.removeChild(t),g.destroy(),this.answeredQuestions===5&&(console.log("All 5 questions answered, transitioning to Space Invaders..."),setTimeout(()=>{this.scene.start("space_invaders",{nextScene:"map4_game4"})},3e3))},2e3)}),t.appendChild(i)}),document.body.appendChild(o),document.body.appendChild(t)}setupScore(){this.scoreText=this.add.text(16,16,"Score: 0",{fontSize:"32px",fill:"#fff",backgroundColor:"#000",padding:{x:10,y:5}}).setScrollFactor(0).setDepth(200)}}class F extends h.Scene{constructor(){super({key:"map4_game4"}),this.player=null,this.score=0,this.scoreText=null,this.currentMap=1,this.questions=null,this.icons=[],this.answeredQuestions=0}preload(){this.load.image("map4scene4","/assets/images/map4scene4.png"),this.load.json("map-config4","/assets/data/map4/map-config4.json"),this.load.json("questions","/assets/data/questions.json"),this.load.image("checkMark","/assets/icons/checkmark.png"),this.load.image("xMark","/assets/icons/xmark.png"),this.load.on("loaderror",e=>{if(console.error("Error loading file:",e.key),e.key==="checkMark"){const s=this.add.graphics();s.fillStyle(65280),s.fillCircle(0,0,20),s.generateTexture("checkMark",40,40),s.destroy()}else if(e.key==="xMark"){const s=this.add.graphics();s.lineStyle(4,16711680),s.moveTo(-10,-10),s.lineTo(10,10),s.moveTo(10,-10),s.lineTo(-10,10),s.generateTexture("xMark",40,40),s.destroy()}})}create(){this.sound&&this.sound.context&&(this.sound.pauseOnBlur=!1);try{this.questions=this.cache.json.get("questions");const e=this.cache.json.get("map-config4");if(console.log("MapConfig loaded:",e),!e||!e.zones)throw new Error("Invalid map config structure");const t=e.zones[1]||e.zones[0];if(!t)throw new Error("No valid zone found in config");const o=this.add.image(t.x||400,t.y||300,"map4scene4");o.setOrigin(.5),o.setScale(t.scale||1),this.loadAwsIcons(e),this.setupScore()}catch(e){console.error("Error in create:",e),this.add.text(400,300,"Error loading level. Restarting...",{fontSize:"24px",fill:"#fff",backgroundColor:"#ff0000",padding:{x:10,y:5}}).setOrigin(.5),setTimeout(()=>{this.scene.start("map4_game4")},2e3)}}loadAwsIcons(e){e.zones.forEach(s=>{s.icons.forEach(t=>{const o=this.questions.find(n=>t.questionTypes.some(r=>n.question.toLowerCase().includes(r.toLowerCase())));if(o&&o.image)console.log("Loading icon from question:",o.image),this.load.image(`icon_${t.name}`,o.image);else{const n=`assets/images/services16/${t.category}/48/${t.name}`;console.log("Loading icon with constructed path:",n),this.load.image(`icon_${t.name}`,n)}const a=`/assets/images/services16/${t.category}/48/${t.name}`;this.load.image(`icon_${t.name}`,a)})}),this.load.once("complete",()=>{e.zones.forEach(s=>{s.icons.forEach(t=>{const o=this.add.image(t.x,t.y,`icon_${t.name}`).setInteractive().setScale(.5);console.log("Creating icon sprite:",t.name),this.setupIconInteraction(o,t),this.icons.push(o)})})}),this.load.start()}setupIconInteraction(e,s){e.setTint(16777215),e.isAnswered=!1,e.on("pointerover",()=>{e.isAnswered||(e.setScale(1.3),e.setTint(65280),this.showTooltip(s.name,e.x,e.y))}),e.on("pointerout",()=>{e.isAnswered||(e.setScale(1.3),e.setTint(16777215),this.hideTooltip())}),this.tweens.add({targets:e,scale:{from:1,to:1.4},duration:1e3,yoyo:!0,repeat:-1,ease:"Sine.easeInOut"}),e.on("pointerdown",()=>{if(e.isAnswered)return;let t,o=this.questions.filter(a=>s.questionTypes.some(n=>a.question.toLowerCase().includes(n.toLowerCase())));o.length===0&&(o=this.questions),t=h.Utils.Array.GetRandom(o),this.showQuestion(t,e)})}showTooltip(e,s,t){this.tooltip=this.add.text(s,t-60,e,{fontSize:"16px",fill:"#fff",backgroundColor:"#000",padding:{x:5,y:3}}).setOrigin(1).setDepth(150)}hideTooltip(){this.tooltip&&this.tooltip.destroy()}showQuestion(e,s){const t=document.createElement("div");t.className="question-container";const o=document.createElement("div");o.className="overlay";const a=document.createElement("div");a.className="question",a.textContent=e.question,t.appendChild(a),Object.entries(e.options).forEach(([n,r])=>{const i=document.createElement("div");i.className="option";const d=document.createElement("span");d.className="option-letter",d.textContent=n;const l=document.createElement("span");l.className="option-text",l.textContent=r,i.appendChild(d),i.appendChild(l),i.addEventListener("click",()=>{const m=n===e.answer;m&&(this.score+=100,this.scoreText.setText(`Score: ${this.score}`));const p=m?"checkMark":"xMark",g=this.add.image(s.x,s.y,p).setScale(1).setDepth(150);if(s.isAnswered=!0,s.setAlpha(.5),this.tweens.killTweensOf(s),s.setScale(1),s.disableInteractive(),this.answeredQuestions++,e.explanation){const f=document.createElement("div");f.className="explanation",f.textContent=e.explanation,t.appendChild(f)}setTimeout(()=>{document.body.removeChild(o),document.body.removeChild(t),g.destroy(),this.answeredQuestions===5&&(console.log("All 5 questions answered, transitioning to Space Invaders..."),setTimeout(()=>{this.scene.start("space_invaders",{nextScene:"game_over"})},3e3))},2e3)}),t.appendChild(i)}),document.body.appendChild(o),document.body.appendChild(t)}setupScore(){this.scoreText=this.add.text(16,16,"Score: 0",{fontSize:"32px",fill:"#fff",backgroundColor:"#000",padding:{x:10,y:5}}).setScrollFactor(0).setDepth(200)}}class K{constructor(){this.stats={fireRate:1,bulletSpeed:400,multiShot:1,score:0},this.loadProgress()}loadProgress(){const e=localStorage.getItem("gameProgress");e&&(this.stats=JSON.parse(e))}updateStats(e){this.stats.score+=e,this.stats.fireRate=1+Math.floor(this.stats.score/1e3)*.1,this.stats.bulletSpeed=400+Math.floor(this.stats.score/500)*50,this.stats.multiShot=1+Math.floor(this.stats.score/2e3),localStorage.setItem("gameProgress",JSON.stringify(this.stats))}}class Z extends h.Scene{constructor(e="space_invaders"){super({key:"sceneKey"}),this.upgrades={fireRate:1,bulletSpeed:300,multiShot:1,health:3,shield:0,score:0},this.difficulty={asteroidSpeed:100,asteroidSpawnRate:1e3,satelliteSpeed:150,satelliteSpawnRate:2e3,level:1}}init(e){e.stats&&(this.stats=e.stats),this.nextScene=e.nextScene,this.isIntro=e.isIntro||!1,this.previousScore=e.score||0,this.upgrades=e.upgrades||this.upgrades,this.difficulty=e.difficulty||this.difficulty,this.width=this.game.config.width,this.height=this.game.config.height,this.resetGame()}resetGame(){this.player={x:this.width/2,y:this.height-80,width:60,height:40,lives:this.upgrades.health,shield:this.upgrades.shield,score:0,speed:300,fireRate:this.upgrades.fireRate,bulletSpeed:this.upgrades.bulletSpeed,multiShot:this.upgrades.multiShot},this.bullets=[],this.asteroids=[],this.satellites=[],this.powerUps=[],this.stars=[],this.gameStarted=!1,this.gameOver=!1,this.lastShot=0}create(){console.log(`Starting SpaceInvadersScene with key: ${this.sys.settings.key}`),console.log("Stats:",this.stats);for(let e=0;e<100;e++)this.stars.push({x:Math.random()*this.width,y:Math.random()*this.height,size:Math.random()*2+1});this.cursors=this.input.keyboard.createCursorKeys(),this.wasdKeys={up:this.input.keyboard.addKey(h.Input.Keyboard.KeyCodes.W),down:this.input.keyboard.addKey(h.Input.Keyboard.KeyCodes.S),left:this.input.keyboard.addKey(h.Input.Keyboard.KeyCodes.A),right:this.input.keyboard.addKey(h.Input.Keyboard.KeyCodes.D)},this.spaceKey=this.input.keyboard.addKey(h.Input.Keyboard.KeyCodes.SPACE),this.createHUD(),this.startGame()}createHUD(){this.scoreText=this.add.text(10,10,`Score: ${this.player.score}`,{fontSize:"20px",fill:"#fff"}),this.livesText=this.add.text(10,40,`Lives: ${this.player.lives}`,{fontSize:"20px",fill:"#fff"}),this.shieldText=this.add.text(10,70,`Shield: ${this.player.shield}`,{fontSize:"20px",fill:"#fff"}),this.levelText=this.add.text(10,100,`Level: ${this.difficulty.level}`,{fontSize:"20px",fill:"#fff"}),this.powerUpText=this.add.text(this.width-200,10,"",{fontSize:"16px",fill:"#fff"}),this.updatePowerUpText()}updatePowerUpText(){this.powerUpText.setText(`Fire Rate: ${this.player.fireRate}x
Multi-Shot: ${this.player.multiShot}x
Bullet Speed: ${Math.floor(this.player.bulletSpeed/100)}x`)}startGame(){this.asteroidTimer=this.time.addEvent({delay:this.difficulty.asteroidSpawnRate,callback:this.spawnAsteroid,callbackScope:this,loop:!0}),this.satelliteTimer=this.time.addEvent({delay:this.difficulty.satelliteSpawnRate,callback:this.spawnSatellite,callbackScope:this,loop:!0}),this.powerUpTimer=this.time.addEvent({delay:1e4,callback:this.spawnPowerUp,callbackScope:this,loop:!0}),this.loadProgress(updateStats)}spawnPowerUp(){const e=["fireRate","multiShot","bulletSpeed","health","shield"],s=e[h.Math.Between(0,e.length-1)],t=this.add.text(h.Math.Between(40,this.width-40),-50,this.getPowerUpSymbol(s),{fontSize:"24px",fill:this.getPowerUpColor(s)}).setOrigin(.5);t.type=s,t.speed=100,this.powerUps.push(t)}getPowerUpSymbol(e){return{fireRate:"",multiShot:"",bulletSpeed:"",health:"",shield:""}[e]||""}getPowerUpColor(e){return{fireRate:"#ffff00",multiShot:"#00ffff",bulletSpeed:"#ff00ff",health:"#ff0000",shield:"#0000ff"}[e]||"#ffffff"}collectPowerUp(e){switch(e.type){case"fireRate":this.player.fireRate=Math.min(this.player.fireRate+.2,5);break;case"multiShot":this.player.multiShot=Math.min(this.player.multiShot+1,5);break;case"bulletSpeed":this.player.bulletSpeed=Math.min(this.player.bulletSpeed+100,800);break;case"health":this.player.lives++,this.livesText.setText(`Lives: ${this.player.lives}`);break;case"shield":this.player.shield=Math.min(this.player.shield+1,3),this.shieldText.setText(`Shield: ${this.player.shield}`);break}this.updatePowerUpText(),e.destroy()}update(e,s){if(!this.gameStarted||this.gameOver)return;const t=this.player.speed*(s/1e3);(this.cursors.left.isDown||this.wasdKeys.left.isDown)&&this.player.x>40&&(this.player.x-=t),(this.cursors.right.isDown||this.wasdKeys.right.isDown)&&this.player.x<this.width-40&&(this.player.x+=t),(this.cursors.up.isDown||this.wasdKeys.up.isDown)&&this.player.y>100&&(this.player.y-=t),(this.cursors.down.isDown||this.wasdKeys.down.isDown)&&this.player.y<this.height-40&&(this.player.y+=t),this.spaceKey.isDown&&e>this.lastShot+1e3/this.player.fireRate&&(this.shoot(),this.lastShot=e),this.updateBullets(s),this.updateAsteroids(s),this.updateSatellites(s),this.updatePowerUps(s),this.checkCollisions(),this.updateDifficulty()}updateDifficulty(){const e=Math.floor(this.player.score/1e3)+1;e>this.difficulty.level&&(this.difficulty.level=e,this.difficulty.asteroidSpeed+=20,this.difficulty.asteroidSpawnRate=Math.max(500,this.difficulty.asteroidSpawnRate-50),this.difficulty.satelliteSpeed+=25,this.difficulty.satelliteSpawnRate=Math.max(1e3,this.difficulty.satelliteSpawnRate-100),this.asteroidTimer.delay=this.difficulty.asteroidSpawnRate,this.satelliteTimer.delay=this.difficulty.satelliteSpawnRate,this.levelText.setText(`Level: ${this.difficulty.level}`),this.showLevelUpEffect())}showLevelUpEffect(){const e=this.add.text(this.width/2,this.height/2,"LEVEL UP!",{fontSize:"48px",fill:"#ffff00",stroke:"#000",strokeThickness:6}).setOrigin(.5);this.tweens.add({targets:e,scale:{from:.5,to:2},alpha:{from:1,to:0},duration:1e3,ease:"Power2",onComplete:()=>e.destroy()})}shoot(){this.getMultiShotAngles().forEach(s=>{const t=this.add.text(this.player.x,this.player.y-20,"",{fontSize:"24px",fill:"#ffff00"}).setOrigin(.5);t.velocity={x:Math.sin(s)*this.player.bulletSpeed,y:-Math.cos(s)*this.player.bulletSpeed},this.bullets.push(t)})}getMultiShotAngles(){const e=[],s=Math.min((this.player.multiShot-1)*.1,.5);for(let t=0;t<this.player.multiShot;t++){const o=-s/2+s/(this.player.multiShot-1)*t;e.push(o||0)}return e}updateBullets(e){for(let s=this.bullets.length-1;s>=0;s--){const t=this.bullets[s];t.x+=t.velocity.x*(e/1e3),t.y+=t.velocity.y*(e/1e3),t.y<-20&&(t.destroy(),this.bullets.splice(s,1))}}updateAsteroids(e){for(let s=this.asteroids.length-1;s>=0;s--){const t=this.asteroids[s];t.y+=t.speed*(e/1e3),t.y>this.height+50&&(t.destroy(),this.asteroids.splice(s,1))}}updateSatellites(e){for(let s=this.satellites.length-1;s>=0;s--){const t=this.satellites[s];t.y+=t.speed*(e/1e3),t.y>this.height+50&&(t.destroy(),this.satellites.splice(s,1))}}updatePowerUps(e){for(let s=this.powerUps.length-1;s>=0;s--){const t=this.powerUps[s];t.y+=t.speed*(e/1e3),t.y>this.height+50&&(t.destroy(),this.powerUps.splice(s,1))}}checkCollisions(){this.bullets.forEach((s,t)=>{this.asteroids.forEach((o,a)=>{this.checkOverlap(s,o)&&this.handleAsteroidDestruction(o,t,a)}),this.satellites.forEach((o,a)=>{this.checkOverlap(s,o)&&this.handleSatelliteDestruction(o,t,a)})});const e=this.getPlayerBounds();this.powerUps.forEach((s,t)=>{this.checkOverlap(s,e)&&(this.collectPowerUp(s),this.powerUps.splice(t,1))}),this.checkPlayerCollisions(e)}handleAsteroidDestruction(e,s,t){this.createExplosion(e.x,e.y,"#ffff00"),this.bullets[s].destroy(),this.bullets.splice(s,1),e.destroy(),this.asteroids.splice(t,1),this.player.score+=10,this.scoreText.setText(`Score: ${this.player.score}`)}handleSatelliteDestruction(e,s,t){this.createExplosion(e.x,e.y,"#ff0000"),this.bullets[s].destroy(),this.bullets.splice(s,1),e.destroy(),this.satellites.splice(t,1),this.player.score+=20,this.scoreText.setText(`Score: ${this.player.score}`)}checkPlayerCollisions(e){let s=!1;this.asteroids.forEach((t,o)=>{this.checkOverlap(t,e)&&(this.handlePlayerHit(),t.destroy(),this.asteroids.splice(o,1),s=!0)}),this.satellites.forEach((t,o)=>{this.checkOverlap(t,e)&&(this.handlePlayerHit(),t.destroy(),this.satellites.splice(o,1),s=!0)}),s&&this.createExplosion(this.player.x,this.player.y,"#ff0000")}handlePlayerHit(){this.player.shield>0?(this.player.shield--,this.shieldText.setText(`Shield: ${this.player.shield}`),this.showShieldEffect()):(this.player.lives--,this.livesText.setText(`Lives: ${this.player.lives}`),this.player.lives<=0?(this.gameOver=!0,this.showGameOver()):this.showDamageEffect())}showShieldEffect(){const e=this.add.circle(this.player.x,this.player.y,40,255,.5);this.tweens.add({targets:e,alpha:0,scale:2,duration:500,onComplete:()=>e.destroy()})}showDamageEffect(){const e=this.add.rectangle(0,0,this.width,this.height,16711680,.5);this.tweens.add({targets:e,alpha:0,duration:100,onComplete:()=>e.destroy()})}createExplosion(e,s,t){const o=this.add.particles(e,s,{speed:{min:-100,max:100},angle:{min:0,max:360},scale:{start:1,end:0},blendMode:"ADD",lifespan:500,gravityY:0,quantity:20,tint:parseInt(t.replace("#","0x"))});this.time.delayedCall(500,()=>o.destroy())}checkOverlap(e,s){const t=e.getBounds(),o=s.getBounds?s.getBounds():s;return h.Geom.Intersects.RectangleToRectangle(t,o)}getPlayerBounds(){return{x:this.player.x-this.player.width/2,y:this.player.y-this.player.height/2,width:this.player.width,height:this.player.height}}showGameOver(){this.upgrades={fireRate:this.player.fireRate,bulletSpeed:this.player.bulletSpeed,multiShot:this.player.multiShot,health:this.player.lives,shield:this.player.shield,score:this.player.score+this.previousScore},this.add.text(this.width/2,this.height/2-50,"Game Over!",{fontSize:"48px",fill:"#ff0000",stroke:"#000",strokeThickness:6}).setOrigin(.5),this.add.text(this.width/2,this.height/2+10,`Final Score: ${this.player.score}
Total Score: ${this.upgrades.score}`,{fontSize:"24px",fill:"#ffffff",align:"center"}).setOrigin(.5);const e=this.add.text(this.width/2,this.height/2+80,"Continue to Next Level",{fontSize:"24px",fill:"#ffffff",backgroundColor:"#4a4",padding:{x:20,y:10}}).setOrigin(.5).setInteractive();e.on("pointerover",()=>e.setScale(1.1)),e.on("pointerout",()=>e.setScale(1)),e.on("pointerdown",()=>{this.scene.start(this.nextScene,{score:this.upgrades.score,upgrades:this.upgrades,difficulty:this.difficulty})})}endMiniGame(){console.log(`Ending Space Invaders. Going to: ${this.nextScene}`),this.scene.stop(this.sys.settings.key),this.scene.start(this.nextScene,{score:this.stats.score}),SceneTransition.to(this,"SortSelectionScene",{level:1})}}class H extends h.Scene{constructor(){super({key:"sort_selection"}),this.score=0,this.currentMap=1,this.selected=null,this.thumbnails=[],this.connections=[]}init(e){this.score=e.score||0,this.currentMap=e.currentMap||1,this.selected=e.selected||null,this.thumbnails=e.thumbnails||[],this.connections=e.connections||[],this.progress=e.progress||0}preload(){this.load.image("map1scene164",c("images/map1scene164.png")),this.load.image("map1scene264",c("images/map1scene264.png")),this.load.image("map1scene364",c("images/map1scene364.png")),this.load.image("map1scene464",c("images/map1scene464.png")),this.load.image("map2scene164",c("images/map2scene164.png")),this.load.image("map2scene264",c("images/map2scene264.png")),this.load.image("map2scene364",c("images/map2scene364.png")),this.load.image("map2scene464",c("images/map2scene464.png")),this.load.image("map3scene164",c("images/map3scene164.png")),this.load.image("map3scene264",c("images/map3scene264.png")),this.load.image("map3scene364",c("images/map3scene364.png")),this.load.image("map3scene464",c("images/map3scene464.png")),this.load.json("map-config",c("data/map1/map-config.json")),this.load.json("questions",c("data/questions.json")),this.load.bitmapFont("arcade",c("fonts/arcade.png"),c("fonts/arcade.xml")),this.load.json("map-config",c("data/map1/map-config.json")),this.load.json("map-config2",c("data/map1/map-config2.json")),this.load.json("map-config3",c("data/map1/map-config3.json")),this.load.json("map-config4",c("data/map1/map-config4.json")),this.load.json("map-config",c("data/map2/map-config.json")),this.load.json("map-config2",c("data/map2/map-config2.json")),this.load.json("map-config3",c("data/map2/map-config3.json")),this.load.json("map-config4",c("data/map2/map-config4.json")),this.load.json("map-config",c("data/map3/map-config.json")),this.load.json("map-config2",c("data/map3/map-config2.json")),this.load.json("map-config3",c("data/map3/map-config3.json")),this.load.json("map-config4",c("data/map3/map-config4.json")),this.load.json("map-config",c("data/map4/map-config.json")),this.load.json("map-config2",c("data/map4/map-config2.json")),this.load.json("map-config3",c("data/map4/map-config3.json")),this.load.json("map-config4",c("data/map4/map-config4.json"))}create(){this.add.text(400,50,"Select Sorting Method",{fontSize:"32px",fill:"#fff"}).setOrigin(.5),this.container=this.add.container(400,250),["map1scene164","map1scene264","map1scene364","map1scene464","map2scene164","map2scene264","map2scene364","map2scene464","map3scene164","map3scene264","map3scene364","map3scene464"].forEach((n,r)=>{const i=Math.floor(Math.log2(r+1)),d=r-Math.pow(2,i)+1,l=Math.pow(2,i),m=100,p=d*(800/l)-350,g=i*m-100,f=this.add.image(p,g,n).setScale(.8).setInteractive();if(f.on("pointerover",()=>{this.tweens.add({targets:f,scale:1,duration:200})}),f.on("pointerout",()=>{this.tweens.add({targets:f,scale:.8,duration:200})}),this.thumbnails.push(f),this.container.add(f),r>0){const y=Math.floor((r-1)/2),w=this.thumbnails[y],x=this.add.graphics();x.lineStyle(2,6710886),x.beginPath(),x.moveTo(w.x,w.y),x.lineTo(f.x,f.y),x.strokePath(),this.connections.push(x),this.container.add(x)}});const s=[{text:"Bubble Sort",method:"bubble",description:"O(n) - Simple but inefficient"},{text:"Quick Sort",method:"quick",description:"O(n log n) - Fast divide & conquer"},{text:"Merge Sort",method:"merge",description:"O(n log n) - Stable divide & conquer"},{text:"Insertion Sort",method:"insertion",description:"O(n) - Good for small data"},{text:"Selection Sort",method:"selection",description:"O(n) - Simple to understand"},{text:"Heap Sort",method:"heap",description:"O(n log n) - In-place sorting"}],t=this.add.container(400,450),o=50,a=3;s.forEach((n,r)=>{const i=Math.floor(r/a),d=r%a,l=i*250-200,m=d*o,p=this.add.rectangle(l,m,200,40,3355443).setInteractive(),g=this.add.text(l,m,n.text,{fontSize:"20px",fill:"#fff",padding:{x:10,y:5}}).setOrigin(.5),f=this.add.text(l,m+15,n.description,{fontSize:"12px",fill:"#aaa"}).setOrigin(.5);f.setVisible(!1),p.on("pointerover",()=>{this.tweens.add({targets:[p,g],scaleX:1.1,scaleY:1.1,duration:100}),p.setFillStyle(6710886),f.setVisible(!0)}),p.on("pointerout",()=>{this.tweens.add({targets:[p,g],scaleX:1,scaleY:1,duration:100}),p.setFillStyle(3355443),f.setVisible(!1)}),p.on("pointerdown",()=>{this.selectSort(n.method),s.forEach((y,w)=>{t.list[w*3].setFillStyle(3355443)}),p.setFillStyle(43520)}),t.add([p,g,f])}),this.add.existing(t)}selectSort(e){this.selected=e,this.sceneManager.setSortMethod(e),this.animateSort()}animateSort(){const e=this.thumbnails;switch(this.selected){case"bubble":this.animateBubbleSort([...e]);break;case"quick":this.animateQuickSort([...e],0,e.length-1);break;case"merge":this.animateMergeSort([...e]);break;case"insertion":this.animateInsertionSort([...e]);break;case"selection":this.animateSelectionSort([...e]);break;case"heap":this.animateHeapSort([...e]);break}}async animateBubbleSort(e){const s=e.map(t=>({x:t.x,y:t.y}));for(let t=0;t<e.length;t++)for(let o=0;o<e.length-t-1;o++){if(e[o].setTint(65280),e[o+1].setTint(65280),await new Promise(a=>{this.time.delayedCall(500,a)}),e[o].x>e[o+1].x){const a=s[o].x;s[o].x=s[o+1].x,s[o+1].x=a,this.tweens.add({targets:e[o],x:s[o].x,duration:500}),this.tweens.add({targets:e[o+1],x:s[o+1].x,duration:500}),[e[o],e[o+1]]=[e[o+1],e[o]]}e[o].clearTint(),e[o+1].clearTint()}this.startGame()}async animateQuickSort(e,s,t){if(s>=t){s===t&&e[s].setTint(65280);return}const o=e[t];o.setTint(16711680);let a=s-1;for(let r=s;r<t;r++){if(e[r].setTint(65280),await new Promise(i=>this.time.delayedCall(500,i)),e[r].x<o.x){a++;const i=e[a].x;e[a].x=e[r].x,e[r].x=i,[e[a],e[r]]=[e[r],e[a]]}e[r].clearTint()}const n=e[a+1].x;e[a+1].x=o.x,o.x=n,[e[a+1],e[t]]=[e[t],e[a+1]],o.clearTint(),await this.animateQuickSort(e,s,a),await this.animateQuickSort(e,a+2,t),s===0&&t===e.length-1&&this.startGame()}async animateMergeSort(e){if(e.length<=1)return e;const s=Math.floor(e.length/2),t=e.slice(0,s),o=e.slice(s);t.forEach(l=>l.setTint(255)),o.forEach(l=>l.setTint(16711680)),await new Promise(l=>this.time.delayedCall(500,l)),await this.animateMergeSort(t),await this.animateMergeSort(o);let a=0,n=0,r=0;const i=[],d=e.map(l=>l.x);for(;a<t.length&&n<o.length;)t[a].x<o[n].x?(i[r]=t[a],e[r].x=d[r],a++):(i[r]=o[n],e[r].x=d[r],n++),r++;for(;a<t.length;)i[r]=t[a],e[r].x=d[r],a++,r++;for(;n<o.length;)i[r]=o[n],e[r].x=d[r],n++,r++;return e.forEach(l=>l.clearTint()),e.length===this.thumbnails.length&&this.startGame(),i}async animateInsertionSort(e){var t;const s=e.map(o=>({x:o.x,y:o.y}));for(let o=1;o<e.length;o++){const a=e[o];a.setTint(16711680);let n=o-1;for(await new Promise(r=>this.time.delayedCall(500,r));n>=0&&e[n].x>a.x;)e[n].setTint(65280),e[n+1]=e[n],this.tweens.add({targets:e[n],x:s[n+1].x,duration:500}),n--,await new Promise(r=>this.time.delayedCall(300,r)),(t=e[n+2])==null||t.clearTint();e[n+1]=a,this.tweens.add({targets:a,x:s[n+1].x,duration:500}),await new Promise(r=>this.time.delayedCall(500,r)),a.clearTint()}this.startGame()}async animateSelectionSort(e){const s=e.map(t=>({x:t.x,y:t.y}));for(let t=0;t<e.length-1;t++){let o=t;e[t].setTint(16711680);for(let a=t+1;a<e.length;a++)e[a].setTint(65280),await new Promise(n=>this.time.delayedCall(300,n)),e[a].x<e[o].x?(e[o].clearTint(),o=a,e[o].setTint(16711935)):e[a].clearTint();if(o!==t){const a=s[t].x;s[t].x=s[o].x,s[o].x=a,this.tweens.add({targets:e[t],x:s[t].x,duration:500}),this.tweens.add({targets:e[o],x:s[o].x,duration:500}),[e[t],e[o]]=[e[o],e[t]]}await new Promise(a=>this.time.delayedCall(500,a)),e[t].clearTint(),e[o].clearTint()}this.startGame()}async animateHeapSort(e){const s=e.map(o=>({x:o.x,y:o.y})),t=async(o,a)=>{let n=a;const r=2*a+1,i=2*a+2;if(e[a].setTint(16711680),await new Promise(d=>this.time.delayedCall(300,d)),r<o&&(e[r].setTint(65280),e[r].x>e[n].x&&(e[n].clearTint(),n=r,e[n].setTint(16711680))),i<o&&(e[i].setTint(65280),e[i].x>e[n].x&&(e[n].clearTint(),n=i,e[n].setTint(16711680))),n!==a){const d=s[a].x;s[a].x=s[n].x,s[n].x=d,this.tweens.add({targets:e[a],x:s[a].x,duration:500}),this.tweens.add({targets:e[n],x:s[n].x,duration:500}),[e[a],e[n]]=[e[n],e[a]],await t(o,n)}e[a].clearTint(),r<o&&e[r].clearTint(),i<o&&e[i].clearTint()};for(let o=Math.floor(e.length/2)-1;o>=0;o--)await t(e.length,o);for(let o=e.length-1;o>0;o--){const a=s[0].x;s[0].x=s[o].x,s[o].x=a,this.tweens.add({targets:e[0],x:s[0].x,duration:500}),this.tweens.add({targets:e[o],x:s[o].x,duration:500}),[e[0],e[o]]=[e[o],e[0]],await new Promise(n=>this.time.delayedCall(500,n)),await t(o,0)}this.startGame()}startGame(){this.time.delayedCall(1e3,()=>{const e=this.sceneManager.getFirstScene();this.scene.start(e,{sortType:this.selected,structure:this.thumbnails,sortedScenes:this.sceneManager.getSortedScenes()})})}}class X extends h.Scene{constructor(){super("MainMenu")}preload(){this.load.image("background","/assets/images/background.png"),this.load.image("logo","/assets/images/logo.png")}create(){this.cameras.main.setBackgroundColor("#000033"),this.add.text(400,100,"AWS Certification Trainer",{fontFamily:"Arial Black",fontSize:38,color:"#ffffff",stroke:"#000000",strokeThickness:8,align:"center"}).setOrigin(.5);const e=[{text:"Start AWS Training",scene:"sort_selection",description:"Begin your AWS certification journey"},{text:"Space Invaders Practice",scene:"space_invaders",data:{nextScene:"sort_selection"},description:"Practice while defending against space invaders!"},{text:"Skip to AWS Trainer",scene:"AWS Trainer",data:{nextScene:"map1scene1"},description:"Practice while defending against space invaders!"}];let s=250;e.forEach(t=>{const o=this.add.container(400,s),a=this.add.rectangle(0,0,300,60,4868682).setInteractive({useHandCursor:!0}),n=this.add.text(0,-10,t.text,{fontFamily:"Arial",fontSize:24,color:"#ffffff"}).setOrigin(.5),r=this.add.text(0,15,t.description,{fontFamily:"Arial",fontSize:14,color:"#aaaaaa"}).setOrigin(.5);o.add([a,n,r]),a.on("pointerover",()=>{a.setFillStyle(6974058),this.tweens.add({targets:o,scaleX:1.1,scaleY:1.1,duration:200})}),a.on("pointerout",()=>{a.setFillStyle(4868682),this.tweens.add({targets:o,scaleX:1,scaleY:1,duration:200})}),a.on("pointerdown",()=>{this.cameras.main.fadeOut(500),this.time.delayedCall(500,()=>{this.scene.start(t.scene,t.data)})}),s+=100}),this.add.text(16,this.game.config.height-30,"v0.0.1",{fontFamily:"Arial",fontSize:16,color:"#ffffff"}),this.cameras.main.fadeIn(1e3)}}const W={type:h.AUTO,width:800,height:600,parent:"game-container",backgroundColor:"#000000",dom:{createContainer:!0},audio:{context:new(window.AudioContext||window.webkitAudioContext)},scale:{mode:h.Scale.FIT,autoCenter:h.Scale.CENTER_BOTH,width:800,height:600},physics:{default:"arcade",arcade:{gravity:{y:0},debug:!1}},render:{pixelArt:!0,powerPreference:"high-performance",antialias:!0,antialiasGL:!0},scene:[I,X,H,Z,A,z,$,O,N,Q,j,L,_,P,D,B,G,R,U,F,S]};new K;window.addEventListener("load",()=>{window.game=new h.Game(W),document.addEventListener("click",function u(){window.game.sound&&window.game.sound.context.state==="suspended"&&window.game.sound.context.resume(),document.removeEventListener("click",u)})});
