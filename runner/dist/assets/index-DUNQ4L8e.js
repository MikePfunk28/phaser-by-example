import{p as e}from"./phaser-DUcjbWWu.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const s of e)if("childList"===s.type)for(const e of s.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}(),e.GameObjects.Sprite,e.GameObjects.Rectangle,e.GameObjects.GameObject,e.GameObjects.Rectangle,e.GameObjects.Rectangle,e.GameObjects.Sprite,e.GameObjects.Rectangle;class t{constructor(e,t=0){this.sceneName=e,this.score=t,this.next=null,this.left=null,this.right=null}}class s{constructor(){this.scenes=["map1scene164","map1scene264","map1scene364","map1scene464","map2scene164","map2scene264","map2scene364","map2scene464","map3scene164","map3scene264","map3scene364","map3scene464"],this.sortedScenes=[],this.currentStructure="array",this.sortMethod="bubble"}setDataStructure(e){switch(this.currentStructure=e,e){case"linkedList":return this.createLinkedList();case"binaryTree":return this.createBinaryTree();case"heap":return this.createHeap();default:return this.scenes}}setSortMethod(e){return this.sortMethod=e,this.sort()}sort(){switch(this.sortMethod){case"bubble":return this.bubbleSort([...this.scenes]);case"quick":return this.quickSort([...this.scenes]);case"merge":return this.mergeSort([...this.scenes]);default:return this.scenes}}createLinkedList(){let e=new t(this.scenes[0]),s=e;for(let i=1;i<this.scenes.length;i++)s.next=new t(this.scenes[i]),s=s.next;return e}createBinaryTree(){const e=new t(this.scenes[0]);for(let s=1;s<this.scenes.length;s++)this.insertNode(e,new t(this.scenes[s]));return e}createHeap(){const e=[...this.scenes];for(let t=Math.floor(e.length/2)-1;t>=0;t--)this.heapify(e,e.length,t);return e}bubbleSort(e){for(let t=0;t<e.length;t++)for(let s=0;s<e.length-t-1;s++)e[s]>e[s+1]&&([e[s],e[s+1]]=[e[s+1],e[s]]);return e}quickSort(e){if(e.length<=1)return e;const t=e[0],s=e.slice(1).filter((e=>e<t)),i=e.slice(1).filter((e=>e>=t));return[...this.quickSort(s),t,...this.quickSort(i)]}mergeSort(e){if(e.length<=1)return e;const t=Math.floor(e.length/2),s=this.mergeSort(e.slice(0,t)),i=this.mergeSort(e.slice(t));return this.merge(s,i)}merge(e,t){let s=[],i=0,o=0;for(;i<e.length&&o<t.length;)e[i]<t[o]?(s.push(e[i]),i++):(s.push(t[o]),o++);return s.concat(e.slice(i)).concat(t.slice(o))}getNextScene(e){const t=this.sort(),s=t.indexOf(e);return s<t.length-1?t[s+1]:null}getSortedScenes(){return this.sortedScenes}getFirstScene(){return this.sortedScenes[0]}}function i(e){return(e=e.startsWith("/")?e.substring(1):e).startsWith("assets/")||(e="assets/"+e),`/${e}`}class o extends e.Scene{constructor(){super({key:"bootscene"})}preload(){const e=this.add.text(400,300,"Loading...",{fontFamily:"Arial",fontSize:24,color:"#ffffff"}).setOrigin(.5),t=this.add.graphics(),s=this.add.graphics();s.fillStyle(2236962,.8),s.fillRect(240,270,320,50),this.load.on("progress",(function(e){t.clear(),t.fillStyle(65280,1),t.fillRect(250,280,300*e,30)})),this.load.on("complete",(function(){t.destroy(),s.destroy(),e.destroy()}))}create(){this.scene.start("MainMenu")}}class n extends e.Scene{constructor(){super({key:"gameover"})}create(){this.width=this.sys.game.config.width,this.height=this.sys.game.config.height,this.center_width=this.width/2,this.center_height=this.height/2,this.cameras.main.setBackgroundColor(8900331),this.add.bitmapText(this.center_width,50,"arcade",this.registry.get("score"),25).setOrigin(.5),this.add.bitmapText(this.center_width,this.center_height,"arcade","GAME OVER",45).setOrigin(.5),this.add.bitmapText(this.center_width,250,"arcade","Press SPACE or Click to restart!",15).setOrigin(.5),this.input.keyboard.on("keydown-SPACE",this.startGame,this),this.input.on("pointerdown",(e=>this.startGame()),this)}showLine(e,t){let s=this.introLayer.add(this.add.bitmapText(this.center_width,t,"pixelFont",e,25).setOrigin(.5).setAlpha(0));this.tweens.add({targets:s,duration:2e3,alpha:1})}startGame(){this.scene.start("map4_game4")}}class a extends e.Scene{constructor(){super({key:"map1scene1"}),this.player=null,this.score=0,this.scoreText=null,this.currentMap=1,this.questions=null,this.icons=[],this.answeredQuestions=0}preload(){this.load.image("map1scene1",i("images/map1scene1.png")),this.load.json("map-config",i("data/map1/map-config.json")),this.load.json("questions",i("data/questions.json")),this.load.image("checkMark",i("images/checkmark.png")),this.load.image("xMark",i("images/xmark.png")),this.load.on("loaderror",(e=>{if("checkMark"===e.key){const e=this.add.graphics();e.fillStyle(65280),e.fillCircle(0,0,20),e.generateTexture("checkMark",40,40),e.destroy()}else if("xMark"===e.key){const e=this.add.graphics();e.lineStyle(4,16711680),e.moveTo(-10,-10),e.lineTo(10,10),e.moveTo(10,-10),e.lineTo(-10,10),e.generateTexture("xMark",40,40),e.destroy()}}))}create(){this.sound&&this.sound.context&&(this.sound.pauseOnBlur=!1);try{this.questions=this.cache.json.get("questions");const e=this.cache.json.get("map-config");if(!e||!e.zones)throw new Error("Invalid map config structure");const t=e.zones[0];if(!t)throw new Error("No valid zone found in config");const s=this.add.image(t.x||400,t.y||300,"map1scene1");s.setOrigin(.5),s.setScale(t.scale||1),this.loadAwsIcons(e),this.setupScore()}catch(e){this.add.text(400,300,"Error loading level. Restarting...",{fontSize:"24px",fill:"#fff",backgroundColor:"#ff0000",padding:{x:10,y:5}}).setOrigin(.5),setTimeout((()=>{this.scene.start("map1scene1")}),2e3)}}loadAwsIcons(e){e.zones.forEach((e=>{e.icons.forEach((e=>{const t=this.questions.find((t=>e.questionTypes.some((e=>t.question.toLowerCase().includes(e.toLowerCase())))));if(t&&t.image)this.load.image(`icon_${e.name}`,t.image);else{const t=`assets/images/services16/${e.category}/48/${e.name}`;this.load.image(`icon_${e.name}`,t)}}))})),this.load.once("complete",(()=>{e.zones.forEach((e=>{e.icons.forEach((e=>{const t=this.add.image(e.x,e.y,`icon_${e.name}`).setInteractive().setScale(.5);this.setupIconInteraction(t,e),this.icons.push(t)}))}))})),this.load.start()}setupIconInteraction(t,s){t.setTint(16777215),t.isAnswered=!1,t.on("pointerover",(()=>{t.isAnswered||(t.setScale(1.3),t.setTint(65280),this.showTooltip(s.name,t.x,t.y))})),t.on("pointerout",(()=>{t.isAnswered||(t.setScale(1.3),t.setTint(16777215),this.hideTooltip())})),this.tweens.add({targets:t,scale:{from:1,to:1.4},duration:1e3,yoyo:!0,repeat:-1,ease:"Sine.easeInOut"}),t.on("pointerdown",(()=>{if(t.isAnswered)return;let i,o=this.questions.filter((e=>s.questionTypes.some((t=>e.question.toLowerCase().includes(t.toLowerCase())))));0===o.length&&(o=this.questions),i=e.Utils.Array.GetRandom(o),this.showQuestion(i,t)}))}showTooltip(e,t,s){this.tooltip=this.add.text(t,s-60,e,{fontSize:"16px",fill:"#fff",backgroundColor:"#000",padding:{x:5,y:3}}).setOrigin(1).setDepth(150)}hideTooltip(){this.tooltip&&this.tooltip.destroy()}showQuestion(e,t){const s=document.createElement("div");s.className="question-container";const i=document.createElement("div");i.className="overlay";const o=document.createElement("div");o.className="question",o.textContent=e.question,s.appendChild(o),Object.entries(e.options).forEach((([o,n])=>{const a=document.createElement("div");a.className="option";const r=document.createElement("span");r.className="option-letter",r.textContent=o;const c=document.createElement("span");c.className="option-text",c.textContent=n,a.appendChild(r),a.appendChild(c),a.addEventListener("click",(()=>{this.handleAnswer(o===e.answer,t,e),document.body.removeChild(s),document.body.removeChild(i)})),s.appendChild(a)})),document.body.appendChild(i),document.body.appendChild(s)}handleAnswer(e,t,s){if(t.isAnswered=!0,this.answeredQuestions++,e){if(this.score+=100,this.scoreText.setText("Score: "+this.score),this.add.image(t.x,t.y,"checkMark").setScale(.5).setDepth(100),s.explanation){const e=document.createElement("div");e.className="explanation-container",e.textContent=s.explanation,document.body.appendChild(e),setTimeout((()=>{document.body.removeChild(e)}),5e3)}}else this.add.image(t.x,t.y,"xMark").setScale(.5).setDepth(100);this.answeredQuestions>=this.icons.length&&setTimeout((()=>{this.transitionToNextScene()}),1e3)}setupScore(){this.scoreText=this.add.text(16,16,"Score: "+this.score,{fontSize:"32px",fill:"#fff"})}transitionToNextScene(){this.cameras.main.fadeOut(500),this.cameras.main.once("camerafadeoutcomplete",(()=>{this.scene.start("space_invaders",{nextScene:"map1scene2",score:this.score})}))}}class r extends e.Scene{constructor(){super({key:"map1scene2"}),this.player=null,this.score=0,this.scoreText=null,this.currentMap=1,this.questions=null,this.icons=[],this.answeredQuestions=0,this.isTransitioning=!1,this.clickCooldown=!1}init(e){this.score=e.score||0}preload(){this.load.image("map1scene2",i("images/map1scene2.png")),this.load.json("map-config2",i("data/map1/map-config2.json")),this.load.json("questions",i("data/questions.json")),this.load.bitmapFont("arcade",i("fonts/arcade.png"),i("fonts/arcade.xml")),this.load.image("checkMark",i("images/checkmark.png")),this.load.image("xMark",i("images/xmark.png"))}create(){this.sound&&this.sound.context&&(this.sound.pauseOnBlur=!1),this.questions=this.cache.json.get("questions");const e=this.cache.json.get("map-config2"),t=e.zones[0];this.add.image(t.x,t.y,"map1scene2").setScale(t.scale),this.loadAwsIcons(e),this.setupScore()}loadAwsIcons(e){e.zones.forEach((e=>{e.icons.forEach((e=>{const t=this.questions.find((t=>e.questionTypes.some((e=>t.question.toLowerCase().includes(e.toLowerCase())))));if(t&&t.image)this.load.image(`icon_${e.name}`,t.image);else{const t=`assets/images/services16/${e.category}/48/${e.name}.png`;this.load.image(`icon_${e.name}`,t)}}))})),this.load.on("loaderror",(e=>{})),this.load.once("complete",(()=>{e.zones.forEach((e=>{e.icons.forEach((e=>{const t=this.add.image(e.x,e.y,`icon_${e.name}`).setInteractive().setScale(1);this.setupIconInteraction(t,e),this.icons.push(t)}))}))})),this.load.start()}setupIconInteraction(t,s){t.setTint(16777215),t.isAnswered=!1,t.on("pointerover",(()=>{t.isAnswered||(t.setScale(1.3),t.setTint(65280),this.showTooltip(s.name,t.x,t.y))})),t.on("pointerout",(()=>{t.isAnswered||(t.setScale(1),t.setTint(16777215),this.hideTooltip())})),this.tweens.add({targets:t,scale:{from:1,to:1.4},duration:1e3,yoyo:!0,repeat:-1,ease:"Sine.easeInOut"}),t.on("pointerdown",(()=>{if(t.isAnswered||this.clickCooldown)return;let i;this.clickCooldown=!0,this.time.delayedCall(500,(()=>{this.clickCooldown=!1}));let o=this.questions.filter((e=>s.questionTypes.some((t=>e.question.toLowerCase().includes(t.toLowerCase())))));0===o.length&&(o=this.questions),i=e.Utils.Array.GetRandom(o),this.showQuestion(i,t)}))}showTooltip(e,t,s){this.tooltip=this.add.text(t,s-60,e,{fontSize:"16px",fill:"#fff",backgroundColor:"#000",padding:{x:5,y:3}}).setOrigin(.5).setDepth(150)}hideTooltip(){this.tooltip&&this.tooltip.destroy()}showQuestion(e,t){if(this.isTransitioning)return;const s=document.createElement("div");s.className="question-container";const i=document.createElement("div");i.className="overlay";const o=document.createElement("div");o.className="question",o.textContent=e.question,s.appendChild(o);let n=!1;Object.entries(e.options).forEach((([o,a])=>{const r=document.createElement("div");r.className="option";const c=document.createElement("span");c.className="option-letter",c.textContent=o;const l=document.createElement("span");l.className="option-text",l.textContent=a,r.appendChild(c),r.appendChild(l),r.addEventListener("click",(()=>{if(n)return;n=!0;const a=o===e.answer;a&&(this.score+=100,this.scoreText.setText(`Score: ${this.score}`));const r=a?"checkMark":"xMark",c=this.add.image(t.x,t.y,r).setScale(.5).setDepth(150);if(t.isAnswered=!0,t.setAlpha(.5),this.tweens.killTweensOf(t),t.setScale(1),t.disableInteractive(),this.answeredQuestions++,e.explanation){const t=document.createElement("div");t.className="explanation",t.textContent=e.explanation,s.appendChild(t)}5===this.answeredQuestions&&(this.isTransitioning=!0),setTimeout((()=>{document.body.removeChild(i),document.body.removeChild(s),c.destroy(),5===this.answeredQuestions&&this.cameras.main.fade(1e3,0,0,0,!1,((e,t)=>{1===t&&this.scene.start("space_invaders",{nextScene:"map1scene2",score:this.score})}))}),2e3)})),s.appendChild(r)})),document.body.appendChild(i),document.body.appendChild(s)}setupScore(){this.scoreText=this.add.text(16,16,`Score: ${this.score}`,{fontSize:"32px",fill:"#fff",backgroundColor:"#000",padding:{x:10,y:5}}).setScrollFactor(0).setDepth(200)}}class c extends e.Scene{constructor(){super({key:"map1_game3"}),this.player=null,this.score=0,this.scoreText=null,this.currentMap=1,this.questions=null,this.icons=[],this.answeredQuestions=0}preload(){this.load.image("map1scene3",i("images/map1scene3.png")),this.load.json("map-config3",i("data/map1/map-config3.json")),this.load.json("questions",i("data/questions.json")),this.load.image("checkMark",i("images/checkmark.png")),this.load.image("xMark",i("images/xmark.png")),this.load.on("loaderror",(e=>{if("checkMark"===e.key){const e=this.add.graphics();e.fillStyle(65280),e.fillCircle(0,0,20),e.generateTexture("checkMark",40,40),e.destroy()}else if("xMark"===e.key){const e=this.add.graphics();e.lineStyle(4,16711680),e.moveTo(-10,-10),e.lineTo(10,10),e.moveTo(10,-10),e.lineTo(-10,10),e.generateTexture("xMark",40,40),e.destroy()}}))}create(){this.sound&&this.sound.context&&(this.sound.pauseOnBlur=!1);try{this.questions=this.cache.json.get("questions");const e=this.cache.json.get("map-config3");if(!e||!e.zones)throw new Error("Invalid map config structure");const t=1,s=e.zones[t]||e.zones[0];if(!s)throw new Error("No valid zone found in config");const i=this.add.image(s.x||400,s.y||300,"map1scene3");i.setOrigin(.5),i.setScale(s.scale||1),this.loadAwsIcons(e),this.setupScore()}catch(e){this.add.text(400,300,"Error loading level. Restarting...",{fontSize:"24px",fill:"#fff",backgroundColor:"#ff0000",padding:{x:10,y:5}}).setOrigin(.5),setTimeout((()=>{this.scene.start("map1_game3")}),2e3)}}loadAwsIcons(e){e.zones.forEach((e=>{e.icons.forEach((e=>{const t=this.questions.find((t=>e.questionTypes.some((e=>t.question.toLowerCase().includes(e.toLowerCase())))));if(t&&t.image)this.load.image(`icon_${e.name}`,t.image);else{const t=`assets/images/services16/${e.category}/48/${e.name}`;this.load.image(`icon_${e.name}`,t)}const s=`/assets/images/services16/${e.category}/48/${e.name}`;this.load.image(`icon_${e.name}`,s)}))})),this.load.once("complete",(()=>{e.zones.forEach((e=>{e.icons.forEach((e=>{const t=this.add.image(e.x,e.y,`icon_${e.name}`).setInteractive().setScale(.5);this.setupIconInteraction(t,e),this.icons.push(t)}))}))})),this.load.start()}setupIconInteraction(t,s){t.setTint(16777215),t.isAnswered=!1,t.on("pointerover",(()=>{t.isAnswered||(t.setScale(1.3),t.setTint(65280),this.showTooltip(s.name,t.x,t.y))})),t.on("pointerout",(()=>{t.isAnswered||(t.setScale(1.3),t.setTint(16777215),this.hideTooltip())})),this.tweens.add({targets:t,scale:{from:1,to:1.4},duration:1e3,yoyo:!0,repeat:-1,ease:"Sine.easeInOut"}),t.on("pointerdown",(()=>{if(t.isAnswered)return;let i,o=this.questions.filter((e=>s.questionTypes.some((t=>e.question.toLowerCase().includes(t.toLowerCase())))));0===o.length&&(o=this.questions),i=e.Utils.Array.GetRandom(o),this.showQuestion(i,t)}))}showTooltip(e,t,s){this.tooltip=this.add.text(t,s-60,e,{fontSize:"16px",fill:"#fff",backgroundColor:"#000",padding:{x:5,y:3}}).setOrigin(1).setDepth(150)}hideTooltip(){this.tooltip&&this.tooltip.destroy()}showQuestion(e,t){const s=document.createElement("div");s.className="question-container";const i=document.createElement("div");i.className="overlay";const o=document.createElement("div");o.className="question",o.textContent=e.question,s.appendChild(o),Object.entries(e.options).forEach((([o,n])=>{const a=document.createElement("div");a.className="option";const r=document.createElement("span");r.className="option-letter",r.textContent=o;const c=document.createElement("span");c.className="option-text",c.textContent=n,a.appendChild(r),a.appendChild(c),a.addEventListener("click",(()=>{const n=o===e.answer;n&&(this.score+=100,this.scoreText.setText(`Score: ${this.score}`));const a=n?"checkMark":"xMark",r=this.add.image(t.x,t.y,a).setScale(1).setDepth(150);if(t.isAnswered=!0,t.setAlpha(.5),this.tweens.killTweensOf(t),t.setScale(1),t.disableInteractive(),this.answeredQuestions++,e.explanation){const t=document.createElement("div");t.className="explanation",t.textContent=e.explanation,s.appendChild(t)}setTimeout((()=>{document.body.removeChild(i),document.body.removeChild(s),r.destroy(),5===this.answeredQuestions&&setTimeout((()=>{this.scene.start("space_invaders",{nextScene:"map1scene4"})}),3e3)}),2e3)})),s.appendChild(a)})),document.body.appendChild(i),document.body.appendChild(s)}setupScore(){this.scoreText=this.add.text(16,16,"Score: 0",{fontSize:"32px",fill:"#fff",backgroundColor:"#000",padding:{x:10,y:5}}).setScrollFactor(0).setDepth(200)}}class l extends e.Scene{constructor(){super({key:"map1scene4"}),this.player=null,this.score=0,this.scoreText=null,this.currentMap=1,this.questions=null,this.icons=[],this.answeredQuestions=0}preload(){this.load.image("map1scene4",i("images/map1scene4.png")),this.load.json("map-config4",i("data/map1/map-config4.json")),this.load.json("questions",i("data/questions.json")),this.load.image("checkMark",i("images/checkmark.png")),this.load.image("xMark",i("images/xmark.png")),this.load.on("loaderror",(e=>{if("checkMark"===e.key){const e=this.add.graphics();e.fillStyle(65280),e.fillCircle(0,0,20),e.generateTexture("checkMark",40,40),e.destroy()}else if("xMark"===e.key){const e=this.add.graphics();e.lineStyle(4,16711680),e.moveTo(-10,-10),e.lineTo(10,10),e.moveTo(10,-10),e.lineTo(-10,10),e.generateTexture("xMark",40,40),e.destroy()}}))}create(){this.sound&&this.sound.context&&(this.sound.pauseOnBlur=!1);try{this.questions=this.cache.json.get("questions");const e=this.cache.json.get("map-config4");if(!e||!e.zones)throw new Error("Invalid map config structure");const t=1,s=e.zones[t]||e.zones[0];if(!s)throw new Error("No valid zone found in config");const i=this.add.image(s.x||400,s.y||300,"map1scene4");i.setOrigin(.5),i.setScale(s.scale||1),this.loadAwsIcons(e),this.setupScore()}catch(e){this.add.text(400,300,"Error loading level. Restarting...",{fontSize:"24px",fill:"#fff",backgroundColor:"#ff0000",padding:{x:10,y:5}}).setOrigin(.5),setTimeout((()=>{this.scene.start("map1scene1")}),2e3)}}loadAwsIcons(e){e.zones.forEach((e=>{e.icons.forEach((e=>{const t=this.questions.find((t=>e.questionTypes.some((e=>t.question.toLowerCase().includes(e.toLowerCase())))));if(t&&t.image)this.load.image(`icon_${e.name}`,t.image);else{const t=`assets/images/services16/${e.category}/48/${e.name}`;this.load.image(`icon_${e.name}`,t)}const s=`/assets/images/services16/${e.category}/48/${e.name}`;this.load.image(`icon_${e.name}`,s)}))})),this.load.once("complete",(()=>{e.zones.forEach((e=>{e.icons.forEach((e=>{const t=this.add.image(e.x,e.y,`icon_${e.name}`).setInteractive().setScale(.5);this.setupIconInteraction(t,e),this.icons.push(t)}))}))})),this.load.start()}setupIconInteraction(t,s){t.setTint(16777215),t.isAnswered=!1,t.on("pointerover",(()=>{t.isAnswered||(t.setScale(1.3),t.setTint(65280),this.showTooltip(s.name,t.x,t.y))})),t.on("pointerout",(()=>{t.isAnswered||(t.setScale(1.3),t.setTint(16777215),this.hideTooltip())})),this.tweens.add({targets:t,scale:{from:1,to:1.4},duration:1e3,yoyo:!0,repeat:-1,ease:"Sine.easeInOut"}),t.on("pointerdown",(()=>{if(t.isAnswered)return;let i,o=this.questions.filter((e=>s.questionTypes.some((t=>e.question.toLowerCase().includes(t.toLowerCase())))));0===o.length&&(o=this.questions),i=e.Utils.Array.GetRandom(o),this.showQuestion(i,t)}))}showTooltip(e,t,s){this.tooltip=this.add.text(t,s-60,e,{fontSize:"16px",fill:"#fff",backgroundColor:"#000",padding:{x:5,y:3}}).setOrigin(1).setDepth(150)}hideTooltip(){this.tooltip&&this.tooltip.destroy()}showQuestion(e,t){const s=document.createElement("div");s.className="question-container";const i=document.createElement("div");i.className="overlay";const o=document.createElement("div");o.className="question",o.textContent=e.question,s.appendChild(o),Object.entries(e.options).forEach((([o,n])=>{const a=document.createElement("div");a.className="option";const r=document.createElement("span");r.className="option-letter",r.textContent=o;const c=document.createElement("span");c.className="option-text",c.textContent=n,a.appendChild(r),a.appendChild(c),a.addEventListener("click",(()=>{const n=o===e.answer;n&&(this.score+=100,this.scoreText.setText(`Score: ${this.score}`));const a=n?"checkMark":"xMark",r=this.add.image(t.x,t.y,a).setScale(1).setDepth(150);if(t.isAnswered=!0,t.setAlpha(.5),this.tweens.killTweensOf(t),t.setScale(1),t.disableInteractive(),this.answeredQuestions++,e.explanation){const t=document.createElement("div");t.className="explanation",t.textContent=e.explanation,s.appendChild(t)}setTimeout((()=>{document.body.removeChild(i),document.body.removeChild(s),r.destroy(),5===this.answeredQuestions&&setTimeout((()=>{this.scene.start("space_invaders",{nextScene:"map2scene1"})}),3e3)}),2e3)})),s.appendChild(a)})),document.body.appendChild(i),document.body.appendChild(s)}setupScore(){this.scoreText=this.add.text(16,16,"Score: 0",{fontSize:"32px",fill:"#fff",backgroundColor:"#000",padding:{x:10,y:5}}).setScrollFactor(0).setDepth(200)}}class d extends e.Scene{constructor(){super({key:"map2_game2"}),this.player=null,this.score=0,this.scoreText=null,this.currentMap=1,this.questions=null,this.icons=[],this.answeredQuestions=0}preload(){this.load.image("map2scene2",i("images/map2scene2.png")),this.load.json("map-config2",i("data/map2/map-config2.json")),this.load.json("questions",i("data/questions.json")),this.load.image("checkMark",i("images/checkmark.png")),this.load.image("xMark",i("images/xmark.png")),this.load.on("loaderror",(e=>{if("checkMark"===e.key){const e=this.add.graphics();e.fillStyle(65280),e.fillCircle(0,0,20),e.generateTexture("checkMark",40,40),e.destroy()}else if("xMark"===e.key){const e=this.add.graphics();e.lineStyle(4,16711680),e.moveTo(-10,-10),e.lineTo(10,10),e.moveTo(10,-10),e.lineTo(-10,10),e.generateTexture("xMark",40,40),e.destroy()}}))}create(){this.sound&&this.sound.context&&(this.sound.pauseOnBlur=!1);try{this.questions=this.cache.json.get("questions");const e=this.cache.json.get("map-config2");if(!e||!e.zones)throw new Error("Invalid map config structure");const t=1,s=e.zones[t]||e.zones[0];if(!s)throw new Error("No valid zone found in config");const i=this.add.image(s.x||400,s.y||300,"map2scene2");i.setOrigin(.5),i.setScale(s.scale||1),this.loadAwsIcons(e),this.setupScore()}catch(e){this.add.text(400,300,"Error loading level. Restarting...",{fontSize:"24px",fill:"#fff",backgroundColor:"#ff0000",padding:{x:10,y:5}}).setOrigin(.5),setTimeout((()=>{this.scene.start("map2_game2")}),2e3)}}loadAwsIcons(e){e.zones.forEach((e=>{e.icons.forEach((e=>{const t=this.questions.find((t=>e.questionTypes.some((e=>t.question.toLowerCase().includes(e.toLowerCase())))));if(t&&t.image)this.load.image(`icon_${e.name}`,t.image);else{const t=`assets/images/services16/${e.category}/48/${e.name}`;this.load.image(`icon_${e.name}`,t)}const s=`/assets/images/services16/${e.category}/48/${e.name}`;this.load.image(`icon_${e.name}`,s)}))})),this.load.once("complete",(()=>{e.zones.forEach((e=>{e.icons.forEach((e=>{const t=this.add.image(e.x,e.y,`icon_${e.name}`).setInteractive().setScale(.5);this.setupIconInteraction(t,e),this.icons.push(t)}))}))})),this.load.start()}setupIconInteraction(t,s){t.setTint(16777215),t.isAnswered=!1,t.on("pointerover",(()=>{t.isAnswered||(t.setScale(1.3),t.setTint(65280),this.showTooltip(s.name,t.x,t.y))})),t.on("pointerout",(()=>{t.isAnswered||(t.setScale(1.3),t.setTint(16777215),this.hideTooltip())})),this.tweens.add({targets:t,scale:{from:1,to:1.4},duration:1e3,yoyo:!0,repeat:-1,ease:"Sine.easeInOut"}),t.on("pointerdown",(()=>{if(t.isAnswered)return;let i,o=this.questions.filter((e=>s.questionTypes.some((t=>e.question.toLowerCase().includes(t.toLowerCase())))));0===o.length&&(o=this.questions),i=e.Utils.Array.GetRandom(o),this.showQuestion(i,t)}))}showTooltip(e,t,s){this.tooltip=this.add.text(t,s-60,e,{fontSize:"16px",fill:"#fff",backgroundColor:"#000",padding:{x:5,y:3}}).setOrigin(1).setDepth(150)}hideTooltip(){this.tooltip&&this.tooltip.destroy()}showQuestion(e,t){const s=document.createElement("div");s.className="question-container";const i=document.createElement("div");i.className="overlay";const o=document.createElement("div");o.className="question",o.textContent=e.question,s.appendChild(o),Object.entries(e.options).forEach((([o,n])=>{const a=document.createElement("div");a.className="option";const r=document.createElement("span");r.className="option-letter",r.textContent=o;const c=document.createElement("span");c.className="option-text",c.textContent=n,a.appendChild(r),a.appendChild(c),a.addEventListener("click",(()=>{const n=o===e.answer;n&&(this.score+=100,this.scoreText.setText(`Score: ${this.score}`));const a=n?"checkMark":"xMark",r=this.add.image(t.x,t.y,a).setScale(1).setDepth(150);if(t.isAnswered=!0,t.setAlpha(.5),this.tweens.killTweensOf(t),t.setScale(1),t.disableInteractive(),this.answeredQuestions++,e.explanation){const t=document.createElement("div");t.className="explanation",t.textContent=e.explanation,s.appendChild(t)}setTimeout((()=>{document.body.removeChild(i),document.body.removeChild(s),r.destroy(),5===this.answeredQuestions&&setTimeout((()=>{this.scene.start("space_invaders",{nextScene:"map2_game3"})}),3e3)}),2e3)})),s.appendChild(a)})),document.body.appendChild(i),document.body.appendChild(s)}setupScore(){this.scoreText=this.add.text(16,16,"Score: 0",{fontSize:"32px",fill:"#fff",backgroundColor:"#000",padding:{x:10,y:5}}).setScrollFactor(0).setDepth(200)}}class h extends e.Scene{constructor(){super({key:"map2_game1"}),this.player=null,this.score=0,this.scoreText=null,this.currentMap=1,this.questions=null,this.icons=[],this.answeredQuestions=0}preload(){this.load.image("map2scene1",i("images/map2scene1.png")),this.load.json("map-config",i("data/map2/map-config.json")),this.load.json("questions",i("data/questions.json")),this.load.image("checkMark",i("images/checkmark.png")),this.load.image("xMark",i("images/xmark.png")),this.load.on("loaderror",(e=>{if("checkMark"===e.key){const e=this.add.graphics();e.fillStyle(65280),e.fillCircle(0,0,20),e.generateTexture("checkMark",40,40),e.destroy()}else if("xMark"===e.key){const e=this.add.graphics();e.lineStyle(4,16711680),e.moveTo(-10,-10),e.lineTo(10,10),e.moveTo(10,-10),e.lineTo(-10,10),e.generateTexture("xMark",40,40),e.destroy()}}))}create(){this.sound&&this.sound.context&&(this.sound.pauseOnBlur=!1);try{this.questions=this.cache.json.get("questions");const e=this.cache.json.get("map-config");if(!e||!e.zones)throw new Error("Invalid map config structure");const t=1,s=e.zones[t]||e.zones[0];if(!s)throw new Error("No valid zone found in config");const i=this.add.image(s.x||400,s.y||300,"map2scene1");i.setOrigin(.5),i.setScale(s.scale||1),this.loadAwsIcons(e),this.setupScore()}catch(e){this.add.text(400,300,"Error loading level. Restarting...",{fontSize:"24px",fill:"#fff",backgroundColor:"#ff0000",padding:{x:10,y:5}}).setOrigin(.5),setTimeout((()=>{this.scene.start("map2_game1")}),2e3)}}loadAwsIcons(e){e.zones.forEach((e=>{e.icons.forEach((e=>{const t=this.questions.find((t=>e.questionTypes.some((e=>t.question.toLowerCase().includes(e.toLowerCase())))));if(t&&t.image)this.load.image(`icon_${e.name}`,t.image);else{const t=`assets/images/services16/${e.category}/48/${e.name}`;this.load.image(`icon_${e.name}`,t)}const s=`/assets/images/services16/${e.category}/48/${e.name}`;this.load.image(`icon_${e.name}`,s)}))})),this.load.once("complete",(()=>{e.zones.forEach((e=>{e.icons.forEach((e=>{const t=this.add.image(e.x,e.y,`icon_${e.name}`).setInteractive().setScale(.5);this.setupIconInteraction(t,e),this.icons.push(t)}))}))})),this.load.start()}setupIconInteraction(t,s){t.setTint(16777215),t.isAnswered=!1,t.on("pointerover",(()=>{t.isAnswered||(t.setScale(1.3),t.setTint(65280),this.showTooltip(s.name,t.x,t.y))})),t.on("pointerout",(()=>{t.isAnswered||(t.setScale(1.3),t.setTint(16777215),this.hideTooltip())})),this.tweens.add({targets:t,scale:{from:1,to:1.4},duration:1e3,yoyo:!0,repeat:-1,ease:"Sine.easeInOut"}),t.on("pointerdown",(()=>{if(t.isAnswered)return;let i,o=this.questions.filter((e=>s.questionTypes.some((t=>e.question.toLowerCase().includes(t.toLowerCase())))));0===o.length&&(o=this.questions),i=e.Utils.Array.GetRandom(o),this.showQuestion(i,t)}))}showTooltip(e,t,s){this.tooltip=this.add.text(t,s-60,e,{fontSize:"16px",fill:"#fff",backgroundColor:"#000",padding:{x:5,y:3}}).setOrigin(1).setDepth(150)}hideTooltip(){this.tooltip&&this.tooltip.destroy()}showQuestion(e,t){const s=document.createElement("div");s.className="question-container";const i=document.createElement("div");i.className="overlay";const o=document.createElement("div");o.className="question",o.textContent=e.question,s.appendChild(o),Object.entries(e.options).forEach((([o,n])=>{const a=document.createElement("div");a.className="option";const r=document.createElement("span");r.className="option-letter",r.textContent=o;const c=document.createElement("span");c.className="option-text",c.textContent=n,a.appendChild(r),a.appendChild(c),a.addEventListener("click",(()=>{const n=o===e.answer;n&&(this.score+=100,this.scoreText.setText(`Score: ${this.score}`));const a=n?"checkMark":"xMark",r=this.add.image(t.x,t.y,a).setScale(1).setDepth(150);if(t.isAnswered=!0,t.setAlpha(.5),this.tweens.killTweensOf(t),t.setScale(1),t.disableInteractive(),this.answeredQuestions++,e.explanation){const t=document.createElement("div");t.className="explanation",t.textContent=e.explanation,s.appendChild(t)}setTimeout((()=>{document.body.removeChild(i),document.body.removeChild(s),r.destroy(),5===this.answeredQuestions&&setTimeout((()=>{this.scene.start("space_invaders",{nextScene:"map2_game2"})}),3e3)}),2e3)})),s.appendChild(a)})),document.body.appendChild(i),document.body.appendChild(s)}setupScore(){this.scoreText=this.add.text(16,16,"Score: 0",{fontSize:"32px",fill:"#fff",backgroundColor:"#000",padding:{x:10,y:5}}).setScrollFactor(0).setDepth(200)}}class p extends e.Scene{constructor(){super({key:"map2_game3"}),this.player=null,this.score=0,this.scoreText=null,this.currentMap=1,this.questions=null,this.icons=[],this.answeredQuestions=0}preload(){this.load.image("map2scene3",i("images/map2scene3.png")),this.load.json("map-config3",i("data/map2/map-config3.json")),this.load.json("questions",i("data/questions.json")),this.load.image("checkMark",i("images/checkmark.png")),this.load.image("xMark",i("images/xmark.png")),this.load.on("loaderror",(e=>{if("checkMark"===e.key){const e=this.add.graphics();e.fillStyle(65280),e.fillCircle(0,0,20),e.generateTexture("checkMark",40,40),e.destroy()}else if("xMark"===e.key){const e=this.add.graphics();e.lineStyle(4,16711680),e.moveTo(-10,-10),e.lineTo(10,10),e.moveTo(10,-10),e.lineTo(-10,10),e.generateTexture("xMark",40,40),e.destroy()}}))}create(){this.sound&&this.sound.context&&(this.sound.pauseOnBlur=!1);try{this.questions=this.cache.json.get("questions");const e=this.cache.json.get("map-config3");if(!e||!e.zones)throw new Error("Invalid map config structure");const t=1,s=e.zones[t]||e.zones[0];if(!s)throw new Error("No valid zone found in config");const i=this.add.image(s.x||400,s.y||300,"map2scene3");i.setOrigin(.5),i.setScale(s.scale||1),this.loadAwsIcons(e),this.setupScore()}catch(e){this.add.text(400,300,"Error loading level. Restarting...",{fontSize:"24px",fill:"#fff",backgroundColor:"#ff0000",padding:{x:10,y:5}}).setOrigin(.5),setTimeout((()=>{this.scene.start("map2_game3")}),2e3)}}loadAwsIcons(e){e.zones.forEach((e=>{e.icons.forEach((e=>{const t=this.questions.find((t=>e.questionTypes.some((e=>t.question.toLowerCase().includes(e.toLowerCase())))));if(t&&t.image)this.load.image(`icon_${e.name}`,t.image);else{const t=`assets/images/services16/${e.category}/48/${e.name}`;this.load.image(`icon_${e.name}`,t)}const s=`/assets/images/services16/${e.category}/48/${e.name}`;this.load.image(`icon_${e.name}`,s)}))})),this.load.once("complete",(()=>{e.zones.forEach((e=>{e.icons.forEach((e=>{const t=this.add.image(e.x,e.y,`icon_${e.name}`).setInteractive().setScale(.5);this.setupIconInteraction(t,e),this.icons.push(t)}))}))})),this.load.start()}setupIconInteraction(t,s){t.setTint(16777215),t.isAnswered=!1,t.on("pointerover",(()=>{t.isAnswered||(t.setScale(1.3),t.setTint(65280),this.showTooltip(s.name,t.x,t.y))})),t.on("pointerout",(()=>{t.isAnswered||(t.setScale(1.3),t.setTint(16777215),this.hideTooltip())})),this.tweens.add({targets:t,scale:{from:1,to:1.4},duration:1e3,yoyo:!0,repeat:-1,ease:"Sine.easeInOut"}),t.on("pointerdown",(()=>{if(t.isAnswered)return;let i,o=this.questions.filter((e=>s.questionTypes.some((t=>e.question.toLowerCase().includes(t.toLowerCase())))));0===o.length&&(o=this.questions),i=e.Utils.Array.GetRandom(o),this.showQuestion(i,t)}))}showTooltip(e,t,s){this.tooltip=this.add.text(t,s-60,e,{fontSize:"16px",fill:"#fff",backgroundColor:"#000",padding:{x:5,y:3}}).setOrigin(1).setDepth(150)}hideTooltip(){this.tooltip&&this.tooltip.destroy()}showQuestion(e,t){const s=document.createElement("div");s.className="question-container";const i=document.createElement("div");i.className="overlay";const o=document.createElement("div");o.className="question",o.textContent=e.question,s.appendChild(o),Object.entries(e.options).forEach((([o,n])=>{const a=document.createElement("div");a.className="option";const r=document.createElement("span");r.className="option-letter",r.textContent=o;const c=document.createElement("span");c.className="option-text",c.textContent=n,a.appendChild(r),a.appendChild(c),a.addEventListener("click",(()=>{const n=o===e.answer;n&&(this.score+=100,this.scoreText.setText(`Score: ${this.score}`));const a=n?"checkMark":"xMark",r=this.add.image(t.x,t.y,a).setScale(1).setDepth(150);if(t.isAnswered=!0,t.setAlpha(.5),this.tweens.killTweensOf(t),t.setScale(1),t.disableInteractive(),this.answeredQuestions++,e.explanation){const t=document.createElement("div");t.className="explanation",t.textContent=e.explanation,s.appendChild(t)}setTimeout((()=>{document.body.removeChild(i),document.body.removeChild(s),r.destroy(),5===this.answeredQuestions&&setTimeout((()=>{this.scene.start("space_invaders",{nextScene:"map2_game4"})}),3e3)}),2e3)})),s.appendChild(a)})),document.body.appendChild(i),document.body.appendChild(s)}setupScore(){this.scoreText=this.add.text(16,16,"Score: 0",{fontSize:"32px",fill:"#fff",backgroundColor:"#000",padding:{x:10,y:5}}).setScrollFactor(0).setDepth(200)}}class m extends e.Scene{constructor(){super({key:"map2_game4"}),this.player=null,this.score=0,this.scoreText=null,this.currentMap=1,this.questions=null,this.icons=[],this.answeredQuestions=0}preload(){this.load.image("map2scene4",i("images/map2scene4.png")),this.load.json("map-config4",i("data/map2/map-config4.json")),this.load.json("questions",i("data/questions.json")),this.load.image("checkMark",i("images/checkmark.png")),this.load.image("xMark",i("images/xmark.png")),this.load.on("loaderror",(e=>{if("checkMark"===e.key){const e=this.add.graphics();e.fillStyle(65280),e.fillCircle(0,0,20),e.generateTexture("checkMark",40,40),e.destroy()}else if("xMark"===e.key){const e=this.add.graphics();e.lineStyle(4,16711680),e.moveTo(-10,-10),e.lineTo(10,10),e.moveTo(10,-10),e.lineTo(-10,10),e.generateTexture("xMark",40,40),e.destroy()}}))}create(){this.sound&&this.sound.context&&(this.sound.pauseOnBlur=!1);try{this.questions=this.cache.json.get("questions");const e=this.cache.json.get("map-config4");if(!e||!e.zones)throw new Error("Invalid map config structure");const t=1,s=e.zones[t]||e.zones[0];if(!s)throw new Error("No valid zone found in config");const i=this.add.image(s.x||400,s.y||300,"map2scene4");i.setOrigin(.5),i.setScale(s.scale||1),this.loadAwsIcons(e),this.setupScore()}catch(e){this.add.text(400,300,"Error loading level. Restarting...",{fontSize:"24px",fill:"#fff",backgroundColor:"#ff0000",padding:{x:10,y:5}}).setOrigin(.5),setTimeout((()=>{this.scene.start("map2_game4")}),2e3)}}loadAwsIcons(e){e.zones.forEach((e=>{e.icons.forEach((e=>{const t=this.questions.find((t=>e.questionTypes.some((e=>t.question.toLowerCase().includes(e.toLowerCase())))));if(t&&t.image)this.load.image(`icon_${e.name}`,t.image);else{const t=`assets/images/services16/${e.category}/48/${e.name}`;this.load.image(`icon_${e.name}`,t)}const s=`/assets/images/services16/${e.category}/48/${e.name}`;this.load.image(`icon_${e.name}`,s)}))})),this.load.once("complete",(()=>{e.zones.forEach((e=>{e.icons.forEach((e=>{const t=this.add.image(e.x,e.y,`icon_${e.name}`).setInteractive().setScale(.5);this.setupIconInteraction(t,e),this.icons.push(t)}))}))})),this.load.start()}setupIconInteraction(t,s){t.setTint(16777215),t.isAnswered=!1,t.on("pointerover",(()=>{t.isAnswered||(t.setScale(1.3),t.setTint(65280),this.showTooltip(s.name,t.x,t.y))})),t.on("pointerout",(()=>{t.isAnswered||(t.setScale(1.3),t.setTint(16777215),this.hideTooltip())})),this.tweens.add({targets:t,scale:{from:1,to:1.4},duration:1e3,yoyo:!0,repeat:-1,ease:"Sine.easeInOut"}),t.on("pointerdown",(()=>{if(t.isAnswered)return;let i,o=this.questions.filter((e=>s.questionTypes.some((t=>e.question.toLowerCase().includes(t.toLowerCase())))));0===o.length&&(o=this.questions),i=e.Utils.Array.GetRandom(o),this.showQuestion(i,t)}))}showTooltip(e,t,s){this.tooltip=this.add.text(t,s-60,e,{fontSize:"16px",fill:"#fff",backgroundColor:"#000",padding:{x:5,y:3}}).setOrigin(1).setDepth(150)}hideTooltip(){this.tooltip&&this.tooltip.destroy()}showQuestion(e,t){const s=document.createElement("div");s.className="question-container";const i=document.createElement("div");i.className="overlay";const o=document.createElement("div");o.className="question",o.textContent=e.question,s.appendChild(o),Object.entries(e.options).forEach((([o,n])=>{const a=document.createElement("div");a.className="option";const r=document.createElement("span");r.className="option-letter",r.textContent=o;const c=document.createElement("span");c.className="option-text",c.textContent=n,a.appendChild(r),a.appendChild(c),a.addEventListener("click",(()=>{const n=o===e.answer;n&&(this.score+=100,this.scoreText.setText(`Score: ${this.score}`));const a=n?"checkMark":"xMark",r=this.add.image(t.x,t.y,a).setScale(1).setDepth(150);if(t.isAnswered=!0,t.setAlpha(.5),this.tweens.killTweensOf(t),t.setScale(1),t.disableInteractive(),this.answeredQuestions++,e.explanation){const t=document.createElement("div");t.className="explanation",t.textContent=e.explanation,s.appendChild(t)}setTimeout((()=>{document.body.removeChild(i),document.body.removeChild(s),r.destroy(),5===this.answeredQuestions&&setTimeout((()=>{this.scene.start("space_invaders",{nextScene:"map3_game1"})}),3e3)}),2e3)})),s.appendChild(a)})),document.body.appendChild(i),document.body.appendChild(s)}setupScore(){this.scoreText=this.add.text(16,16,"Score: 0",{fontSize:"32px",fill:"#fff",backgroundColor:"#000",padding:{x:10,y:5}}).setScrollFactor(0).setDepth(200)}}class u extends e.Scene{constructor(){super({key:"map3_game1"}),this.player=null,this.score=0,this.scoreText=null,this.currentMap=1,this.questions=null,this.icons=[],this.answeredQuestions=0}preload(){this.load.image("map3scene1",i("images/map3scene1.png")),this.load.json("map-config",i("data/map3/map-config.json")),this.load.json("questions",i("data/questions.json")),this.load.image("checkMark",i("images/checkmark.png")),this.load.image("xMark",i("images/xmark.png")),this.load.on("loaderror",(e=>{if("checkMark"===e.key){const e=this.add.graphics();e.fillStyle(65280),e.fillCircle(0,0,20),e.generateTexture("checkMark",40,40),e.destroy()}else if("xMark"===e.key){const e=this.add.graphics();e.lineStyle(4,16711680),e.moveTo(-10,-10),e.lineTo(10,10),e.moveTo(10,-10),e.lineTo(-10,10),e.generateTexture("xMark",40,40),e.destroy()}}))}create(){this.sound&&this.sound.context&&(this.sound.pauseOnBlur=!1);try{this.questions=this.cache.json.get("questions");const e=this.cache.json.get("map-config");if(!e||!e.zones)throw new Error("Invalid map config structure");const t=1,s=e.zones[t]||e.zones[0];if(!s)throw new Error("No valid zone found in config");const i=this.add.image(s.x||400,s.y||300,"map3scene1");i.setOrigin(.5),i.setScale(s.scale||1),this.loadAwsIcons(e),this.setupScore()}catch(e){this.add.text(400,300,"Error loading level. Restarting...",{fontSize:"24px",fill:"#fff",backgroundColor:"#ff0000",padding:{x:10,y:5}}).setOrigin(.5),setTimeout((()=>{this.scene.start("map3_game1")}),2e3)}}loadAwsIcons(e){e.zones.forEach((e=>{e.icons.forEach((e=>{const t=this.questions.find((t=>e.questionTypes.some((e=>t.question.toLowerCase().includes(e.toLowerCase())))));if(t&&t.image)this.load.image(`icon_${e.name}`,t.image);else{const t=`assets/images/services16/${e.category}/48/${e.name}`;this.load.image(`icon_${e.name}`,t)}const s=`/assets/images/services16/${e.category}/48/${e.name}`;this.load.image(`icon_${e.name}`,s)}))})),this.load.once("complete",(()=>{e.zones.forEach((e=>{e.icons.forEach((e=>{const t=this.add.image(e.x,e.y,`icon_${e.name}`).setInteractive().setScale(.5);this.setupIconInteraction(t,e),this.icons.push(t)}))}))})),this.load.start()}setupIconInteraction(t,s){t.setTint(16777215),t.isAnswered=!1,t.on("pointerover",(()=>{t.isAnswered||(t.setScale(1.3),t.setTint(65280),this.showTooltip(s.name,t.x,t.y))})),t.on("pointerout",(()=>{t.isAnswered||(t.setScale(1.3),t.setTint(16777215),this.hideTooltip())})),this.tweens.add({targets:t,scale:{from:1,to:1.4},duration:1e3,yoyo:!0,repeat:-1,ease:"Sine.easeInOut"}),t.on("pointerdown",(()=>{if(t.isAnswered)return;let i,o=this.questions.filter((e=>s.questionTypes.some((t=>e.question.toLowerCase().includes(t.toLowerCase())))));0===o.length&&(o=this.questions),i=e.Utils.Array.GetRandom(o),this.showQuestion(i,t)}))}showTooltip(e,t,s){this.tooltip=this.add.text(t,s-60,e,{fontSize:"16px",fill:"#fff",backgroundColor:"#000",padding:{x:5,y:3}}).setOrigin(1).setDepth(150)}hideTooltip(){this.tooltip&&this.tooltip.destroy()}showQuestion(e,t){const s=document.createElement("div");s.className="question-container";const i=document.createElement("div");i.className="overlay";const o=document.createElement("div");o.className="question",o.textContent=e.question,s.appendChild(o),Object.entries(e.options).forEach((([o,n])=>{const a=document.createElement("div");a.className="option";const r=document.createElement("span");r.className="option-letter",r.textContent=o;const c=document.createElement("span");c.className="option-text",c.textContent=n,a.appendChild(r),a.appendChild(c),a.addEventListener("click",(()=>{const n=o===e.answer;n&&(this.score+=100,this.scoreText.setText(`Score: ${this.score}`));const a=n?"checkMark":"xMark",r=this.add.image(t.x,t.y,a).setScale(1).setDepth(150);if(t.isAnswered=!0,t.setAlpha(.5),this.tweens.killTweensOf(t),t.setScale(1),t.disableInteractive(),this.answeredQuestions++,e.explanation){const t=document.createElement("div");t.className="explanation",t.textContent=e.explanation,s.appendChild(t)}setTimeout((()=>{document.body.removeChild(i),document.body.removeChild(s),r.destroy(),5===this.answeredQuestions&&setTimeout((()=>{this.scene.start("space_invaders",{nextScene:"map3_game2"})}),3e3)}),2e3)})),s.appendChild(a)})),document.body.appendChild(i),document.body.appendChild(s)}setupScore(){this.scoreText=this.add.text(16,16,"Score: 0",{fontSize:"32px",fill:"#fff",backgroundColor:"#000",padding:{x:10,y:5}}).setScrollFactor(0).setDepth(200)}}class g extends e.Scene{constructor(){super({key:"map3_game2"}),this.player=null,this.score=0,this.scoreText=null,this.currentMap=1,this.questions=null,this.icons=[],this.answeredQuestions=0}preload(){this.load.image("map3scene2",i("images/map3scene2.png")),this.load.json("map-config2",i("data/map3/map-config2.json")),this.load.json("questions",i("data/questions.json")),this.load.image("checkMark",i("images/checkmark.png")),this.load.image("xMark",i("images/xmark.png")),this.load.on("loaderror",(e=>{if("checkMark"===e.key){const e=this.add.graphics();e.fillStyle(65280),e.fillCircle(0,0,20),e.generateTexture("checkMark",40,40),e.destroy()}else if("xMark"===e.key){const e=this.add.graphics();e.lineStyle(4,16711680),e.moveTo(-10,-10),e.lineTo(10,10),e.moveTo(10,-10),e.lineTo(-10,10),e.generateTexture("xMark",40,40),e.destroy()}}))}create(){this.sound&&this.sound.context&&(this.sound.pauseOnBlur=!1);try{this.questions=this.cache.json.get("questions");const e=this.cache.json.get("map-config3");if(!e||!e.zones)throw new Error("Invalid map config structure");const t=1,s=e.zones[t]||e.zones[0];if(!s)throw new Error("No valid zone found in config");const i=this.add.image(s.x||400,s.y||300,"map3scene2");i.setOrigin(.5),i.setScale(s.scale||1),this.loadAwsIcons(e),this.setupScore()}catch(e){this.add.text(400,300,"Error loading level. Restarting...",{fontSize:"24px",fill:"#fff",backgroundColor:"#ff0000",padding:{x:10,y:5}}).setOrigin(.5),setTimeout((()=>{this.scene.start("map3_game2")}),2e3)}}loadAwsIcons(e){e.zones.forEach((e=>{e.icons.forEach((e=>{const t=this.questions.find((t=>e.questionTypes.some((e=>t.question.toLowerCase().includes(e.toLowerCase())))));if(t&&t.image)this.load.image(`icon_${e.name}`,t.image);else{const t=`assets/images/services16/${e.category}/48/${e.name}`;this.load.image(`icon_${e.name}`,t)}const s=`/assets/images/services16/${e.category}/48/${e.name}`;this.load.image(`icon_${e.name}`,s)}))})),this.load.once("complete",(()=>{e.zones.forEach((e=>{e.icons.forEach((e=>{const t=this.add.image(e.x,e.y,`icon_${e.name}`).setInteractive().setScale(.5);this.setupIconInteraction(t,e),this.icons.push(t)}))}))})),this.load.start()}setupIconInteraction(t,s){t.setTint(16777215),t.isAnswered=!1,t.on("pointerover",(()=>{t.isAnswered||(t.setScale(1.3),t.setTint(65280),this.showTooltip(s.name,t.x,t.y))})),t.on("pointerout",(()=>{t.isAnswered||(t.setScale(1.3),t.setTint(16777215),this.hideTooltip())})),this.tweens.add({targets:t,scale:{from:1,to:1.4},duration:1e3,yoyo:!0,repeat:-1,ease:"Sine.easeInOut"}),t.on("pointerdown",(()=>{if(t.isAnswered)return;let i,o=this.questions.filter((e=>s.questionTypes.some((t=>e.question.toLowerCase().includes(t.toLowerCase())))));0===o.length&&(o=this.questions),i=e.Utils.Array.GetRandom(o),this.showQuestion(i,t)}))}showTooltip(e,t,s){this.tooltip=this.add.text(t,s-60,e,{fontSize:"16px",fill:"#fff",backgroundColor:"#000",padding:{x:5,y:3}}).setOrigin(1).setDepth(150)}hideTooltip(){this.tooltip&&this.tooltip.destroy()}showQuestion(e,t){const s=document.createElement("div");s.className="question-container";const i=document.createElement("div");i.className="overlay";const o=document.createElement("div");o.className="question",o.textContent=e.question,s.appendChild(o),Object.entries(e.options).forEach((([o,n])=>{const a=document.createElement("div");a.className="option";const r=document.createElement("span");r.className="option-letter",r.textContent=o;const c=document.createElement("span");c.className="option-text",c.textContent=n,a.appendChild(r),a.appendChild(c),a.addEventListener("click",(()=>{const n=o===e.answer;n&&(this.score+=100,this.scoreText.setText(`Score: ${this.score}`));const a=n?"checkMark":"xMark",r=this.add.image(t.x,t.y,a).setScale(1).setDepth(150);if(t.isAnswered=!0,t.setAlpha(.5),this.tweens.killTweensOf(t),t.setScale(1),t.disableInteractive(),this.answeredQuestions++,e.explanation){const t=document.createElement("div");t.className="explanation",t.textContent=e.explanation,s.appendChild(t)}setTimeout((()=>{document.body.removeChild(i),document.body.removeChild(s),r.destroy(),5===this.answeredQuestions&&setTimeout((()=>{this.scene.start("space_invaders",{nextScene:"map3_game3"})}),3e3)}),2e3)})),s.appendChild(a)})),document.body.appendChild(i),document.body.appendChild(s)}setupScore(){this.scoreText=this.add.text(16,16,"Score: 0",{fontSize:"32px",fill:"#fff",backgroundColor:"#000",padding:{x:10,y:5}}).setScrollFactor(0).setDepth(200)}}class f extends e.Scene{constructor(){super({key:"map3_game3"}),this.player=null,this.score=0,this.scoreText=null,this.currentMap=1,this.questions=null,this.icons=[],this.answeredQuestions=0}preload(){this.load.image("map3scene3",i("images/map3scene3.png")),this.load.json("map-config3",i("data/map3/map-config3.json")),this.load.json("questions",i("data/questions.json")),this.load.image("checkMark",i("images/checkmark.png")),this.load.image("xMark",i("images/xmark.png")),this.load.on("loaderror",(e=>{if("checkMark"===e.key){const e=this.add.graphics();e.fillStyle(65280),e.fillCircle(0,0,20),e.generateTexture("checkMark",40,40),e.destroy()}else if("xMark"===e.key){const e=this.add.graphics();e.lineStyle(4,16711680),e.moveTo(-10,-10),e.lineTo(10,10),e.moveTo(10,-10),e.lineTo(-10,10),e.generateTexture("xMark",40,40),e.destroy()}}))}create(){this.sound&&this.sound.context&&(this.sound.pauseOnBlur=!1);try{this.questions=this.cache.json.get("questions");const e=this.cache.json.get("map-config3");if(!e||!e.zones)throw new Error("Invalid map config structure");const t=1,s=e.zones[t]||e.zones[0];if(!s)throw new Error("No valid zone found in config");const i=this.add.image(s.x||400,s.y||300,"map3scene3");i.setOrigin(.5),i.setScale(s.scale||1),this.loadAwsIcons(e),this.setupScore()}catch(e){this.add.text(400,300,"Error loading level. Restarting...",{fontSize:"24px",fill:"#fff",backgroundColor:"#ff0000",padding:{x:10,y:5}}).setOrigin(.5),setTimeout((()=>{this.scene.start("map3_game3")}),2e3)}}loadAwsIcons(e){e.zones.forEach((e=>{e.icons.forEach((e=>{const t=this.questions.find((t=>e.questionTypes.some((e=>t.question.toLowerCase().includes(e.toLowerCase())))));if(t&&t.image)this.load.image(`icon_${e.name}`,t.image);else{const t=`assets/images/services16/${e.category}/48/${e.name}`;this.load.image(`icon_${e.name}`,t)}const s=`/assets/images/services16/${e.category}/48/${e.name}`;this.load.image(`icon_${e.name}`,s)}))})),this.load.once("complete",(()=>{e.zones.forEach((e=>{e.icons.forEach((e=>{const t=this.add.image(e.x,e.y,`icon_${e.name}`).setInteractive().setScale(.5);this.setupIconInteraction(t,e),this.icons.push(t)}))}))})),this.load.start()}setupIconInteraction(t,s){t.setTint(16777215),t.isAnswered=!1,t.on("pointerover",(()=>{t.isAnswered||(t.setScale(1.3),t.setTint(65280),this.showTooltip(s.name,t.x,t.y))})),t.on("pointerout",(()=>{t.isAnswered||(t.setScale(1.3),t.setTint(16777215),this.hideTooltip())})),this.tweens.add({targets:t,scale:{from:1,to:1.4},duration:1e3,yoyo:!0,repeat:-1,ease:"Sine.easeInOut"}),t.on("pointerdown",(()=>{if(t.isAnswered)return;let i,o=this.questions.filter((e=>s.questionTypes.some((t=>e.question.toLowerCase().includes(t.toLowerCase())))));0===o.length&&(o=this.questions),i=e.Utils.Array.GetRandom(o),this.showQuestion(i,t)}))}showTooltip(e,t,s){this.tooltip=this.add.text(t,s-60,e,{fontSize:"16px",fill:"#fff",backgroundColor:"#000",padding:{x:5,y:3}}).setOrigin(1).setDepth(150)}hideTooltip(){this.tooltip&&this.tooltip.destroy()}showQuestion(e,t){const s=document.createElement("div");s.className="question-container";const i=document.createElement("div");i.className="overlay";const o=document.createElement("div");o.className="question",o.textContent=e.question,s.appendChild(o),Object.entries(e.options).forEach((([o,n])=>{const a=document.createElement("div");a.className="option";const r=document.createElement("span");r.className="option-letter",r.textContent=o;const c=document.createElement("span");c.className="option-text",c.textContent=n,a.appendChild(r),a.appendChild(c),a.addEventListener("click",(()=>{const n=o===e.answer;n&&(this.score+=100,this.scoreText.setText(`Score: ${this.score}`));const a=n?"checkMark":"xMark",r=this.add.image(t.x,t.y,a).setScale(1).setDepth(150);if(t.isAnswered=!0,t.setAlpha(.5),this.tweens.killTweensOf(t),t.setScale(1),t.disableInteractive(),this.answeredQuestions++,e.explanation){const t=document.createElement("div");t.className="explanation",t.textContent=e.explanation,s.appendChild(t)}setTimeout((()=>{document.body.removeChild(i),document.body.removeChild(s),r.destroy(),5===this.answeredQuestions&&setTimeout((()=>{this.scene.start("space_invaders",{nextScene:"map3_game4"})}),3e3)}),2e3)})),s.appendChild(a)})),document.body.appendChild(i),document.body.appendChild(s)}setupScore(){this.scoreText=this.add.text(16,16,"Score: 0",{fontSize:"32px",fill:"#fff",backgroundColor:"#000",padding:{x:10,y:5}}).setScrollFactor(0).setDepth(200)}}class x extends e.Scene{constructor(){super({key:"map3_game4"}),this.player=null,this.score=0,this.scoreText=null,this.currentMap=1,this.questions=null,this.icons=[],this.answeredQuestions=0}preload(){this.load.image("map3scene4","/assets/images/map3scene4.png"),this.load.json("map-config4","/assets/data/map3/map-config4.json"),this.load.json("questions","/assets/data/questions.json"),this.load.image("checkMark","/assets/icons/checkmark.png"),this.load.image("xMark","/assets/icons/xmark.png"),this.load.on("loaderror",(e=>{if("checkMark"===e.key){const e=this.add.graphics();e.fillStyle(65280),e.fillCircle(0,0,20),e.generateTexture("checkMark",40,40),e.destroy()}else if("xMark"===e.key){const e=this.add.graphics();e.lineStyle(4,16711680),e.moveTo(-10,-10),e.lineTo(10,10),e.moveTo(10,-10),e.lineTo(-10,10),e.generateTexture("xMark",40,40),e.destroy()}}))}create(){this.sound&&this.sound.context&&(this.sound.pauseOnBlur=!1);try{this.questions=this.cache.json.get("questions");const e=this.cache.json.get("map-config4");if(!e||!e.zones)throw new Error("Invalid map config structure");const t=1,s=e.zones[t]||e.zones[0];if(!s)throw new Error("No valid zone found in config");const i=this.add.image(s.x||400,s.y||300,"map3scene4");i.setOrigin(.5),i.setScale(s.scale||1),this.loadAwsIcons(e),this.setupScore()}catch(e){this.add.text(400,300,"Error loading level. Restarting...",{fontSize:"24px",fill:"#fff",backgroundColor:"#ff0000",padding:{x:10,y:5}}).setOrigin(.5),setTimeout((()=>{this.scene.start("map3_game4")}),2e3)}}loadAwsIcons(e){e.zones.forEach((e=>{e.icons.forEach((e=>{const t=this.questions.find((t=>e.questionTypes.some((e=>t.question.toLowerCase().includes(e.toLowerCase())))));if(t&&t.image)this.load.image(`icon_${e.name}`,t.image);else{const t=`assets/images/services16/${e.category}/48/${e.name}`;this.load.image(`icon_${e.name}`,t)}const s=`/assets/images/services16/${e.category}/48/${e.name}`;this.load.image(`icon_${e.name}`,s)}))})),this.load.once("complete",(()=>{e.zones.forEach((e=>{e.icons.forEach((e=>{const t=this.add.image(e.x,e.y,`icon_${e.name}`).setInteractive().setScale(.5);this.setupIconInteraction(t,e),this.icons.push(t)}))}))})),this.load.start()}setupIconInteraction(t,s){t.setTint(16777215),t.isAnswered=!1,t.on("pointerover",(()=>{t.isAnswered||(t.setScale(1.3),t.setTint(65280),this.showTooltip(s.name,t.x,t.y))})),t.on("pointerout",(()=>{t.isAnswered||(t.setScale(1.3),t.setTint(16777215),this.hideTooltip())})),this.tweens.add({targets:t,scale:{from:1,to:1.4},duration:1e3,yoyo:!0,repeat:-1,ease:"Sine.easeInOut"}),t.on("pointerdown",(()=>{if(t.isAnswered)return;let i,o=this.questions.filter((e=>s.questionTypes.some((t=>e.question.toLowerCase().includes(t.toLowerCase())))));0===o.length&&(o=this.questions),i=e.Utils.Array.GetRandom(o),this.showQuestion(i,t)}))}showTooltip(e,t,s){this.tooltip=this.add.text(t,s-60,e,{fontSize:"16px",fill:"#fff",backgroundColor:"#000",padding:{x:5,y:3}}).setOrigin(1).setDepth(150)}hideTooltip(){this.tooltip&&this.tooltip.destroy()}showQuestion(e,t){const s=document.createElement("div");s.className="question-container";const i=document.createElement("div");i.className="overlay";const o=document.createElement("div");o.className="question",o.textContent=e.question,s.appendChild(o),Object.entries(e.options).forEach((([o,n])=>{const a=document.createElement("div");a.className="option";const r=document.createElement("span");r.className="option-letter",r.textContent=o;const c=document.createElement("span");c.className="option-text",c.textContent=n,a.appendChild(r),a.appendChild(c),a.addEventListener("click",(()=>{const n=o===e.answer;n&&(this.score+=100,this.scoreText.setText(`Score: ${this.score}`));const a=n?"checkMark":"xMark",r=this.add.image(t.x,t.y,a).setScale(1).setDepth(150);if(t.isAnswered=!0,t.setAlpha(.5),this.tweens.killTweensOf(t),t.setScale(1),t.disableInteractive(),this.answeredQuestions++,e.explanation){const t=document.createElement("div");t.className="explanation",t.textContent=e.explanation,s.appendChild(t)}setTimeout((()=>{document.body.removeChild(i),document.body.removeChild(s),r.destroy(),5===this.answeredQuestions&&setTimeout((()=>{this.scene.start("space_invaders",{nextScene:"map4_game1"})}),3e3)}),2e3)})),s.appendChild(a)})),document.body.appendChild(i),document.body.appendChild(s)}setupScore(){this.scoreText=this.add.text(16,16,"Score: 0",{fontSize:"32px",fill:"#fff",backgroundColor:"#000",padding:{x:10,y:5}}).setScrollFactor(0).setDepth(200)}}class y extends e.Scene{constructor(){super({key:"map4_game1"}),this.player=null,this.score=0,this.scoreText=null,this.currentMap=1,this.questions=null,this.icons=[],this.answeredQuestions=0}preload(){this.load.image("map4scene1",i("images/map4scene1.png")),this.load.json("map-config",i("data/map4/map-config.json")),this.load.json("questions",i("data/questions.json")),this.load.image("checkMark",i("images/checkmark.png")),this.load.image("xMark",i("images/xmark.png")),this.load.on("loaderror",(e=>{if("checkMark"===e.key){const e=this.add.graphics();e.fillStyle(65280),e.fillCircle(0,0,20),e.generateTexture("checkMark",40,40),e.destroy()}else if("xMark"===e.key){const e=this.add.graphics();e.lineStyle(4,16711680),e.moveTo(-10,-10),e.lineTo(10,10),e.moveTo(10,-10),e.lineTo(-10,10),e.generateTexture("xMark",40,40),e.destroy()}}))}create(){this.sound&&this.sound.context&&(this.sound.pauseOnBlur=!1);try{this.questions=this.cache.json.get("questions");const e=this.cache.json.get("map-config");if(!e||!e.zones)throw new Error("Invalid map config structure");const t=1,s=e.zones[t]||e.zones[0];if(!s)throw new Error("No valid zone found in config");const i=this.add.image(s.x||400,s.y||300,"map4scene1");i.setOrigin(.5),i.setScale(s.scale||1),this.loadAwsIcons(e),this.setupScore()}catch(e){this.add.text(400,300,"Error loading level. Restarting...",{fontSize:"24px",fill:"#fff",backgroundColor:"#ff0000",padding:{x:10,y:5}}).setOrigin(.5),setTimeout((()=>{this.scene.start("map4_game1")}),2e3)}}loadAwsIcons(e){e.zones.forEach((e=>{e.icons.forEach((e=>{const t=this.questions.find((t=>e.questionTypes.some((e=>t.question.toLowerCase().includes(e.toLowerCase())))));if(t&&t.image)this.load.image(`icon_${e.name}`,t.image);else{const t=`assets/images/services16/${e.category}/48/${e.name}`;this.load.image(`icon_${e.name}`,t)}const s=`/assets/images/services16/${e.category}/48/${e.name}`;this.load.image(`icon_${e.name}`,s)}))})),this.load.once("complete",(()=>{e.zones.forEach((e=>{e.icons.forEach((e=>{const t=this.add.image(e.x,e.y,`icon_${e.name}`).setInteractive().setScale(.5);this.setupIconInteraction(t,e),this.icons.push(t)}))}))})),this.load.start()}setupIconInteraction(t,s){t.setTint(16777215),t.isAnswered=!1,t.on("pointerover",(()=>{t.isAnswered||(t.setScale(1.3),t.setTint(65280),this.showTooltip(s.name,t.x,t.y))})),t.on("pointerout",(()=>{t.isAnswered||(t.setScale(1.3),t.setTint(16777215),this.hideTooltip())})),this.tweens.add({targets:t,scale:{from:1,to:1.4},duration:1e3,yoyo:!0,repeat:-1,ease:"Sine.easeInOut"}),t.on("pointerdown",(()=>{if(t.isAnswered)return;let i,o=this.questions.filter((e=>s.questionTypes.some((t=>e.question.toLowerCase().includes(t.toLowerCase())))));0===o.length&&(o=this.questions),i=e.Utils.Array.GetRandom(o),this.showQuestion(i,t)}))}showTooltip(e,t,s){this.tooltip=this.add.text(t,s-60,e,{fontSize:"16px",fill:"#fff",backgroundColor:"#000",padding:{x:5,y:3}}).setOrigin(1).setDepth(150)}hideTooltip(){this.tooltip&&this.tooltip.destroy()}showQuestion(e,t){const s=document.createElement("div");s.className="question-container";const i=document.createElement("div");i.className="overlay";const o=document.createElement("div");o.className="question",o.textContent=e.question,s.appendChild(o),Object.entries(e.options).forEach((([o,n])=>{const a=document.createElement("div");a.className="option";const r=document.createElement("span");r.className="option-letter",r.textContent=o;const c=document.createElement("span");c.className="option-text",c.textContent=n,a.appendChild(r),a.appendChild(c),a.addEventListener("click",(()=>{const n=o===e.answer;n&&(this.score+=100,this.scoreText.setText(`Score: ${this.score}`));const a=n?"checkMark":"xMark",r=this.add.image(t.x,t.y,a).setScale(1).setDepth(150);if(t.isAnswered=!0,t.setAlpha(.5),this.tweens.killTweensOf(t),t.setScale(1),t.disableInteractive(),this.answeredQuestions++,e.explanation){const t=document.createElement("div");t.className="explanation",t.textContent=e.explanation,s.appendChild(t)}setTimeout((()=>{document.body.removeChild(i),document.body.removeChild(s),r.destroy(),5===this.answeredQuestions&&setTimeout((()=>{this.scene.start("space_invaders",{nextScene:"map4_game2"})}),3e3)}),2e3)})),s.appendChild(a)})),document.body.appendChild(i),document.body.appendChild(s)}setupScore(){this.scoreText=this.add.text(16,16,"Score: 0",{fontSize:"32px",fill:"#fff",backgroundColor:"#000",padding:{x:10,y:5}}).setScrollFactor(0).setDepth(200)}}class w extends e.Scene{constructor(){super({key:"map4_game2"}),this.player=null,this.score=0,this.scoreText=null,this.currentMap=1,this.questions=null,this.icons=[],this.answeredQuestions=0}preload(){this.load.image("map4scene2",i("images/map4scene2.png")),this.load.json("map-config2",i("data/map4/map-config2.json")),this.load.json("questions",i("data/questions.json")),this.load.image("checkMark",i("images/checkmark.png")),this.load.image("xMark",i("images/xmark.png")),this.load.on("loaderror",(e=>{if("checkMark"===e.key){const e=this.add.graphics();e.fillStyle(65280),e.fillCircle(0,0,20),e.generateTexture("checkMark",40,40),e.destroy()}else if("xMark"===e.key){const e=this.add.graphics();e.lineStyle(4,16711680),e.moveTo(-10,-10),e.lineTo(10,10),e.moveTo(10,-10),e.lineTo(-10,10),e.generateTexture("xMark",40,40),e.destroy()}}))}create(){this.sound&&this.sound.context&&(this.sound.pauseOnBlur=!1);try{this.questions=this.cache.json.get("questions");const e=this.cache.json.get("map-config2");if(!e||!e.zones)throw new Error("Invalid map config structure");const t=1,s=e.zones[t]||e.zones[0];if(!s)throw new Error("No valid zone found in config");const i=this.add.image(s.x||400,s.y||300,"map4scene2");i.setOrigin(.5),i.setScale(s.scale||1),this.loadAwsIcons(e),this.setupScore()}catch(e){this.add.text(400,300,"Error loading level. Restarting...",{fontSize:"24px",fill:"#fff",backgroundColor:"#ff0000",padding:{x:10,y:5}}).setOrigin(.5),setTimeout((()=>{this.scene.start("map4_game2")}),2e3)}}loadAwsIcons(e){e.zones.forEach((e=>{e.icons.forEach((e=>{const t=this.questions.find((t=>e.questionTypes.some((e=>t.question.toLowerCase().includes(e.toLowerCase())))));if(t&&t.image)this.load.image(`icon_${e.name}`,t.image);else{const t=`assets/images/services16/${e.category}/48/${e.name}`;this.load.image(`icon_${e.name}`,t)}}))})),this.load.once("complete",(()=>{e.zones.forEach((e=>{e.icons.forEach((e=>{const t=this.add.image(e.x,e.y,`icon_${e.name}`).setInteractive().setScale(.5);this.setupIconInteraction(t,e),this.icons.push(t)}))}))})),this.load.start()}setupIconInteraction(t,s){t.setTint(16777215),t.isAnswered=!1,t.on("pointerover",(()=>{t.isAnswered||(t.setScale(1.3),t.setTint(65280),this.showTooltip(s.name,t.x,t.y))})),t.on("pointerout",(()=>{t.isAnswered||(t.setScale(1.3),t.setTint(16777215),this.hideTooltip())})),this.tweens.add({targets:t,scale:{from:1,to:1.4},duration:1e3,yoyo:!0,repeat:-1,ease:"Sine.easeInOut"}),t.on("pointerdown",(()=>{if(t.isAnswered)return;let i,o=this.questions.filter((e=>s.questionTypes.some((t=>e.question.toLowerCase().includes(t.toLowerCase())))));0===o.length&&(o=this.questions),i=e.Utils.Array.GetRandom(o),this.showQuestion(i,t)}))}showTooltip(e,t,s){this.tooltip=this.add.text(t,s-60,e,{fontSize:"16px",fill:"#fff",backgroundColor:"#000",padding:{x:5,y:3}}).setOrigin(1).setDepth(150)}hideTooltip(){this.tooltip&&this.tooltip.destroy()}showQuestion(e,t){const s=document.createElement("div");s.className="question-container";const i=document.createElement("div");i.className="overlay";const o=document.createElement("div");o.className="question",o.textContent=e.question,s.appendChild(o),Object.entries(e.options).forEach((([o,n])=>{const a=document.createElement("div");a.className="option";const r=document.createElement("span");r.className="option-letter",r.textContent=o;const c=document.createElement("span");c.className="option-text",c.textContent=n,a.appendChild(r),a.appendChild(c),a.addEventListener("click",(()=>{const n=o===e.answer;n&&(this.score+=100,this.scoreText.setText(`Score: ${this.score}`));const a=n?"checkMark":"xMark",r=this.add.image(t.x,t.y,a).setScale(1).setDepth(150);if(t.isAnswered=!0,t.setAlpha(.5),this.tweens.killTweensOf(t),t.setScale(1),t.disableInteractive(),this.answeredQuestions++,e.explanation){const t=document.createElement("div");t.className="explanation",t.textContent=e.explanation,s.appendChild(t)}setTimeout((()=>{document.body.removeChild(i),document.body.removeChild(s),r.destroy(),5===this.answeredQuestions&&setTimeout((()=>{this.scene.start("space_invaders",{nextScene:"map4_game3"})}),3e3)}),2e3)})),s.appendChild(a)})),document.body.appendChild(i),document.body.appendChild(s)}setupScore(){this.scoreText=this.add.text(16,16,"Score: 0",{fontSize:"32px",fill:"#fff",backgroundColor:"#000",padding:{x:10,y:5}}).setScrollFactor(0).setDepth(200)}}class S extends e.Scene{constructor(){super({key:"map4_game3"}),this.player=null,this.score=0,this.scoreText=null,this.currentMap=1,this.questions=null,this.icons=[],this.answeredQuestions=0}preload(){this.load.image("map4scene3","/assets/images/map4scene3.png"),this.load.json("map-config3","/assets/data/map4/map-config3.json"),this.load.json("questions","/assets/data/questions.json"),this.load.image("checkMark","/assets/icons/checkmark.png"),this.load.image("xMark","/assets/icons/xmark.png"),this.load.on("loaderror",(e=>{if("checkMark"===e.key){const e=this.add.graphics();e.fillStyle(65280),e.fillCircle(0,0,20),e.generateTexture("checkMark",40,40),e.destroy()}else if("xMark"===e.key){const e=this.add.graphics();e.lineStyle(4,16711680),e.moveTo(-10,-10),e.lineTo(10,10),e.moveTo(10,-10),e.lineTo(-10,10),e.generateTexture("xMark",40,40),e.destroy()}}))}create(){this.sound&&this.sound.context&&(this.sound.pauseOnBlur=!1);try{this.questions=this.cache.json.get("questions");const e=this.cache.json.get("map-config3");if(!e||!e.zones)throw new Error("Invalid map config structure");const t=1,s=e.zones[t]||e.zones[0];if(!s)throw new Error("No valid zone found in config");const i=this.add.image(s.x||400,s.y||300,"map4scene3");i.setOrigin(.5),i.setScale(s.scale||1),this.loadAwsIcons(e),this.setupScore()}catch(e){this.add.text(400,300,"Error loading level. Restarting...",{fontSize:"24px",fill:"#fff",backgroundColor:"#ff0000",padding:{x:10,y:5}}).setOrigin(.5),setTimeout((()=>{this.scene.start("map4_game3")}),2e3)}}loadAwsIcons(e){e.zones.forEach((e=>{e.icons.forEach((e=>{const t=this.questions.find((t=>e.questionTypes.some((e=>t.question.toLowerCase().includes(e.toLowerCase())))));if(t&&t.image)this.load.image(`icon_${e.name}`,t.image);else{const t=`assets/images/services16/${e.category}/48/${e.name}`;this.load.image(`icon_${e.name}`,t)}const s=`/assets/images/services16/${e.category}/48/${e.name}`;this.load.image(`icon_${e.name}`,s)}))})),this.load.once("complete",(()=>{e.zones.forEach((e=>{e.icons.forEach((e=>{const t=this.add.image(e.x,e.y,`icon_${e.name}`).setInteractive().setScale(.5);this.setupIconInteraction(t,e),this.icons.push(t)}))}))})),this.load.start()}setupIconInteraction(t,s){t.setTint(16777215),t.isAnswered=!1,t.on("pointerover",(()=>{t.isAnswered||(t.setScale(1.3),t.setTint(65280),this.showTooltip(s.name,t.x,t.y))})),t.on("pointerout",(()=>{t.isAnswered||(t.setScale(1.3),t.setTint(16777215),this.hideTooltip())})),this.tweens.add({targets:t,scale:{from:1,to:1.4},duration:1e3,yoyo:!0,repeat:-1,ease:"Sine.easeInOut"}),t.on("pointerdown",(()=>{if(t.isAnswered)return;let i,o=this.questions.filter((e=>s.questionTypes.some((t=>e.question.toLowerCase().includes(t.toLowerCase())))));0===o.length&&(o=this.questions),i=e.Utils.Array.GetRandom(o),this.showQuestion(i,t)}))}showTooltip(e,t,s){this.tooltip=this.add.text(t,s-60,e,{fontSize:"16px",fill:"#fff",backgroundColor:"#000",padding:{x:5,y:3}}).setOrigin(1).setDepth(150)}hideTooltip(){this.tooltip&&this.tooltip.destroy()}showQuestion(e,t){const s=document.createElement("div");s.className="question-container";const i=document.createElement("div");i.className="overlay";const o=document.createElement("div");o.className="question",o.textContent=e.question,s.appendChild(o),Object.entries(e.options).forEach((([o,n])=>{const a=document.createElement("div");a.className="option";const r=document.createElement("span");r.className="option-letter",r.textContent=o;const c=document.createElement("span");c.className="option-text",c.textContent=n,a.appendChild(r),a.appendChild(c),a.addEventListener("click",(()=>{const n=o===e.answer;n&&(this.score+=100,this.scoreText.setText(`Score: ${this.score}`));const a=n?"checkMark":"xMark",r=this.add.image(t.x,t.y,a).setScale(1).setDepth(150);if(t.isAnswered=!0,t.setAlpha(.5),this.tweens.killTweensOf(t),t.setScale(1),t.disableInteractive(),this.answeredQuestions++,e.explanation){const t=document.createElement("div");t.className="explanation",t.textContent=e.explanation,s.appendChild(t)}setTimeout((()=>{document.body.removeChild(i),document.body.removeChild(s),r.destroy(),5===this.answeredQuestions&&setTimeout((()=>{this.scene.start("space_invaders",{nextScene:"map4_game4"})}),3e3)}),2e3)})),s.appendChild(a)})),document.body.appendChild(i),document.body.appendChild(s)}setupScore(){this.scoreText=this.add.text(16,16,"Score: 0",{fontSize:"32px",fill:"#fff",backgroundColor:"#000",padding:{x:10,y:5}}).setScrollFactor(0).setDepth(200)}}class T extends e.Scene{constructor(){super({key:"map4_game4"}),this.player=null,this.score=0,this.scoreText=null,this.currentMap=1,this.questions=null,this.icons=[],this.answeredQuestions=0}preload(){this.load.image("map4scene4","/assets/images/map4scene4.png"),this.load.json("map-config4","/assets/data/map4/map-config4.json"),this.load.json("questions","/assets/data/questions.json"),this.load.image("checkMark","/assets/icons/checkmark.png"),this.load.image("xMark","/assets/icons/xmark.png"),this.load.on("loaderror",(e=>{if("checkMark"===e.key){const e=this.add.graphics();e.fillStyle(65280),e.fillCircle(0,0,20),e.generateTexture("checkMark",40,40),e.destroy()}else if("xMark"===e.key){const e=this.add.graphics();e.lineStyle(4,16711680),e.moveTo(-10,-10),e.lineTo(10,10),e.moveTo(10,-10),e.lineTo(-10,10),e.generateTexture("xMark",40,40),e.destroy()}}))}create(){this.sound&&this.sound.context&&(this.sound.pauseOnBlur=!1);try{this.questions=this.cache.json.get("questions");const e=this.cache.json.get("map-config4");if(!e||!e.zones)throw new Error("Invalid map config structure");const t=1,s=e.zones[t]||e.zones[0];if(!s)throw new Error("No valid zone found in config");const i=this.add.image(s.x||400,s.y||300,"map4scene4");i.setOrigin(.5),i.setScale(s.scale||1),this.loadAwsIcons(e),this.setupScore()}catch(e){this.add.text(400,300,"Error loading level. Restarting...",{fontSize:"24px",fill:"#fff",backgroundColor:"#ff0000",padding:{x:10,y:5}}).setOrigin(.5),setTimeout((()=>{this.scene.start("map4_game4")}),2e3)}}loadAwsIcons(e){e.zones.forEach((e=>{e.icons.forEach((e=>{const t=this.questions.find((t=>e.questionTypes.some((e=>t.question.toLowerCase().includes(e.toLowerCase())))));if(t&&t.image)this.load.image(`icon_${e.name}`,t.image);else{const t=`assets/images/services16/${e.category}/48/${e.name}`;this.load.image(`icon_${e.name}`,t)}const s=`/assets/images/services16/${e.category}/48/${e.name}`;this.load.image(`icon_${e.name}`,s)}))})),this.load.once("complete",(()=>{e.zones.forEach((e=>{e.icons.forEach((e=>{const t=this.add.image(e.x,e.y,`icon_${e.name}`).setInteractive().setScale(.5);this.setupIconInteraction(t,e),this.icons.push(t)}))}))})),this.load.start()}setupIconInteraction(t,s){t.setTint(16777215),t.isAnswered=!1,t.on("pointerover",(()=>{t.isAnswered||(t.setScale(1.3),t.setTint(65280),this.showTooltip(s.name,t.x,t.y))})),t.on("pointerout",(()=>{t.isAnswered||(t.setScale(1.3),t.setTint(16777215),this.hideTooltip())})),this.tweens.add({targets:t,scale:{from:1,to:1.4},duration:1e3,yoyo:!0,repeat:-1,ease:"Sine.easeInOut"}),t.on("pointerdown",(()=>{if(t.isAnswered)return;let i,o=this.questions.filter((e=>s.questionTypes.some((t=>e.question.toLowerCase().includes(t.toLowerCase())))));0===o.length&&(o=this.questions),i=e.Utils.Array.GetRandom(o),this.showQuestion(i,t)}))}showTooltip(e,t,s){this.tooltip=this.add.text(t,s-60,e,{fontSize:"16px",fill:"#fff",backgroundColor:"#000",padding:{x:5,y:3}}).setOrigin(1).setDepth(150)}hideTooltip(){this.tooltip&&this.tooltip.destroy()}showQuestion(e,t){const s=document.createElement("div");s.className="question-container";const i=document.createElement("div");i.className="overlay";const o=document.createElement("div");o.className="question",o.textContent=e.question,s.appendChild(o),Object.entries(e.options).forEach((([o,n])=>{const a=document.createElement("div");a.className="option";const r=document.createElement("span");r.className="option-letter",r.textContent=o;const c=document.createElement("span");c.className="option-text",c.textContent=n,a.appendChild(r),a.appendChild(c),a.addEventListener("click",(()=>{const n=o===e.answer;n&&(this.score+=100,this.scoreText.setText(`Score: ${this.score}`));const a=n?"checkMark":"xMark",r=this.add.image(t.x,t.y,a).setScale(1).setDepth(150);if(t.isAnswered=!0,t.setAlpha(.5),this.tweens.killTweensOf(t),t.setScale(1),t.disableInteractive(),this.answeredQuestions++,e.explanation){const t=document.createElement("div");t.className="explanation",t.textContent=e.explanation,s.appendChild(t)}setTimeout((()=>{document.body.removeChild(i),document.body.removeChild(s),r.destroy(),5===this.answeredQuestions&&setTimeout((()=>{this.scene.start("space_invaders",{nextScene:"game_over"})}),3e3)}),2e3)})),s.appendChild(a)})),document.body.appendChild(i),document.body.appendChild(s)}setupScore(){this.scoreText=this.add.text(16,16,"Score: 0",{fontSize:"32px",fill:"#fff",backgroundColor:"#000",padding:{x:10,y:5}}).setScrollFactor(0).setDepth(200)}}class k extends e.Scene{constructor(){super({key:"space_invaders"}),this.progressManager=new ProgressManager,this.nextScene="SceneSelectionScene",this.upgrades={fireRate:1,bulletSpeed:300,multiShot:1,health:3,shield:0,score:0},this.difficulty={asteroidSpeed:100,asteroidSpawnRate:1e3,satelliteSpeed:150,satelliteSpawnRate:2e3,level:1}}init(e){this.nextScene=e.nextScene,this.isIntro=e.isIntro||!1,this.previousScore=e.score||0,this.upgrades=e.upgrades||this.upgrades,this.difficulty=e.difficulty||this.difficulty,this.width=this.game.config.width,this.height=this.game.config.height,this.resetGame()}resetGame(){this.player={x:this.width/2,y:this.height-80,width:60,height:40,lives:this.upgrades.health,shield:this.upgrades.shield,score:0,speed:300,fireRate:this.upgrades.fireRate,bulletSpeed:this.upgrades.bulletSpeed,multiShot:this.upgrades.multiShot},this.bullets=[],this.asteroids=[],this.satellites=[],this.powerUps=[],this.stars=[],this.gameStarted=!1,this.gameOver=!1,this.lastShot=0}create(){for(let e=0;e<100;e++)this.stars.push({x:Math.random()*this.width,y:Math.random()*this.height,size:2*Math.random()+1});this.cursors=this.input.keyboard.createCursorKeys(),this.wasdKeys={up:this.input.keyboard.addKey(e.Input.Keyboard.KeyCodes.W),down:this.input.keyboard.addKey(e.Input.Keyboard.KeyCodes.S),left:this.input.keyboard.addKey(e.Input.Keyboard.KeyCodes.A),right:this.input.keyboard.addKey(e.Input.Keyboard.KeyCodes.D)},this.spaceKey=this.input.keyboard.addKey(e.Input.Keyboard.KeyCodes.SPACE),this.createHUD(),this.startGame()}createHUD(){this.scoreText=this.add.text(10,10,`Score: ${this.player.score}`,{fontSize:"20px",fill:"#fff"}),this.livesText=this.add.text(10,40,`Lives: ${this.player.lives}`,{fontSize:"20px",fill:"#fff"}),this.shieldText=this.add.text(10,70,`Shield: ${this.player.shield}`,{fontSize:"20px",fill:"#fff"}),this.levelText=this.add.text(10,100,`Level: ${this.difficulty.level}`,{fontSize:"20px",fill:"#fff"}),this.powerUpText=this.add.text(this.width-200,10,"",{fontSize:"16px",fill:"#fff"}),this.updatePowerUpText()}updatePowerUpText(){this.powerUpText.setText(`Fire Rate: ${this.player.fireRate}x\nMulti-Shot: ${this.player.multiShot}x\nBullet Speed: ${Math.floor(this.player.bulletSpeed/100)}x`)}startGame(){this.asteroidTimer=this.time.addEvent({delay:this.difficulty.asteroidSpawnRate,callback:this.spawnAsteroid,callbackScope:this,loop:!0}),this.satelliteTimer=this.time.addEvent({delay:this.difficulty.satelliteSpawnRate,callback:this.spawnSatellite,callbackScope:this,loop:!0}),this.powerUpTimer=this.time.addEvent({delay:1e4,callback:this.spawnPowerUp,callbackScope:this,loop:!0})}spawnPowerUp(){const t=["fireRate","multiShot","bulletSpeed","health","shield"],s=t[e.Math.Between(0,t.length-1)],i=this.add.text(e.Math.Between(40,this.width-40),-50,this.getPowerUpSymbol(s),{fontSize:"24px",fill:this.getPowerUpColor(s)}).setOrigin(.5);i.type=s,i.speed=100,this.powerUps.push(i)}getPowerUpSymbol(e){return{fireRate:"",multiShot:"",bulletSpeed:"",health:"",shield:""}[e]||""}getPowerUpColor(e){return{fireRate:"#ffff00",multiShot:"#00ffff",bulletSpeed:"#ff00ff",health:"#ff0000",shield:"#0000ff"}[e]||"#ffffff"}collectPowerUp(e){switch(e.type){case"fireRate":this.player.fireRate=Math.min(this.player.fireRate+.2,5);break;case"multiShot":this.player.multiShot=Math.min(this.player.multiShot+1,5);break;case"bulletSpeed":this.player.bulletSpeed=Math.min(this.player.bulletSpeed+100,800);break;case"health":this.player.lives++,this.livesText.setText(`Lives: ${this.player.lives}`);break;case"shield":this.player.shield=Math.min(this.player.shield+1,3),this.shieldText.setText(`Shield: ${this.player.shield}`)}this.updatePowerUpText(),e.destroy()}update(e,t){if(!this.gameStarted||this.gameOver)return;const s=this.player.speed*(t/1e3);(this.cursors.left.isDown||this.wasdKeys.left.isDown)&&this.player.x>40&&(this.player.x-=s),(this.cursors.right.isDown||this.wasdKeys.right.isDown)&&this.player.x<this.width-40&&(this.player.x+=s),(this.cursors.up.isDown||this.wasdKeys.up.isDown)&&this.player.y>100&&(this.player.y-=s),(this.cursors.down.isDown||this.wasdKeys.down.isDown)&&this.player.y<this.height-40&&(this.player.y+=s),this.spaceKey.isDown&&e>this.lastShot+1e3/this.player.fireRate&&(this.shoot(),this.lastShot=e),this.updateBullets(t),this.updateAsteroids(t),this.updateSatellites(t),this.updatePowerUps(t),this.checkCollisions(),this.updateDifficulty()}updateDifficulty(){const e=Math.floor(this.player.score/1e3)+1;e>this.difficulty.level&&(this.difficulty.level=e,this.difficulty.asteroidSpeed+=20,this.difficulty.asteroidSpawnRate=Math.max(500,this.difficulty.asteroidSpawnRate-50),this.difficulty.satelliteSpeed+=25,this.difficulty.satelliteSpawnRate=Math.max(1e3,this.difficulty.satelliteSpawnRate-100),this.asteroidTimer.delay=this.difficulty.asteroidSpawnRate,this.satelliteTimer.delay=this.difficulty.satelliteSpawnRate,this.levelText.setText(`Level: ${this.difficulty.level}`),this.showLevelUpEffect())}showLevelUpEffect(){const e=this.add.text(this.width/2,this.height/2,"LEVEL UP!",{fontSize:"48px",fill:"#ffff00",stroke:"#000",strokeThickness:6}).setOrigin(.5);this.tweens.add({targets:e,scale:{from:.5,to:2},alpha:{from:1,to:0},duration:1e3,ease:"Power2",onComplete:()=>e.destroy()})}shoot(){this.getMultiShotAngles().forEach((e=>{const t=this.add.text(this.player.x,this.player.y-20,"",{fontSize:"24px",fill:"#ffff00"}).setOrigin(.5);t.velocity={x:Math.sin(e)*this.player.bulletSpeed,y:-Math.cos(e)*this.player.bulletSpeed},this.bullets.push(t)}))}getMultiShotAngles(){const e=[],t=Math.min(.1*(this.player.multiShot-1),.5);for(let s=0;s<this.player.multiShot;s++){const i=-t/2+t/(this.player.multiShot-1)*s;e.push(i||0)}return e}updateBullets(e){for(let t=this.bullets.length-1;t>=0;t--){const s=this.bullets[t];s.x+=s.velocity.x*(e/1e3),s.y+=s.velocity.y*(e/1e3),s.y<-20&&(s.destroy(),this.bullets.splice(t,1))}}updateAsteroids(e){for(let t=this.asteroids.length-1;t>=0;t--){const s=this.asteroids[t];s.y+=s.speed*(e/1e3),s.y>this.height+50&&(s.destroy(),this.asteroids.splice(t,1))}}updateSatellites(e){for(let t=this.satellites.length-1;t>=0;t--){const s=this.satellites[t];s.y+=s.speed*(e/1e3),s.y>this.height+50&&(s.destroy(),this.satellites.splice(t,1))}}updatePowerUps(e){for(let t=this.powerUps.length-1;t>=0;t--){const s=this.powerUps[t];s.y+=s.speed*(e/1e3),s.y>this.height+50&&(s.destroy(),this.powerUps.splice(t,1))}}checkCollisions(){this.bullets.forEach(((e,t)=>{this.asteroids.forEach(((s,i)=>{this.checkOverlap(e,s)&&this.handleAsteroidDestruction(s,t,i)})),this.satellites.forEach(((s,i)=>{this.checkOverlap(e,s)&&this.handleSatelliteDestruction(s,t,i)}))}));const e=this.getPlayerBounds();this.powerUps.forEach(((t,s)=>{this.checkOverlap(t,e)&&(this.collectPowerUp(t),this.powerUps.splice(s,1))})),this.checkPlayerCollisions(e)}handleAsteroidDestruction(e,t,s){this.createExplosion(e.x,e.y,"#ffff00"),this.bullets[t].destroy(),this.bullets.splice(t,1),e.destroy(),this.asteroids.splice(s,1),this.player.score+=10,this.scoreText.setText(`Score: ${this.player.score}`)}handleSatelliteDestruction(e,t,s){this.createExplosion(e.x,e.y,"#ff0000"),this.bullets[t].destroy(),this.bullets.splice(t,1),e.destroy(),this.satellites.splice(s,1),this.player.score+=20,this.scoreText.setText(`Score: ${this.player.score}`)}checkPlayerCollisions(e){let t=!1;this.asteroids.forEach(((s,i)=>{this.checkOverlap(s,e)&&(this.handlePlayerHit(),s.destroy(),this.asteroids.splice(i,1),t=!0)})),this.satellites.forEach(((s,i)=>{this.checkOverlap(s,e)&&(this.handlePlayerHit(),s.destroy(),this.satellites.splice(i,1),t=!0)})),t&&this.createExplosion(this.player.x,this.player.y,"#ff0000")}handlePlayerHit(){this.player.shield>0?(this.player.shield--,this.shieldText.setText(`Shield: ${this.player.shield}`),this.showShieldEffect()):(this.player.lives--,this.livesText.setText(`Lives: ${this.player.lives}`),this.player.lives<=0?(this.gameOver=!0,this.showGameOver()):this.showDamageEffect())}showShieldEffect(){const e=this.add.circle(this.player.x,this.player.y,40,255,.5);this.tweens.add({targets:e,alpha:0,scale:2,duration:500,onComplete:()=>e.destroy()})}showDamageEffect(){const e=this.add.rectangle(0,0,this.width,this.height,16711680,.5);this.tweens.add({targets:e,alpha:0,duration:100,onComplete:()=>e.destroy()})}createExplosion(e,t,s){const i=this.add.particles(e,t,{speed:{min:-100,max:100},angle:{min:0,max:360},scale:{start:1,end:0},blendMode:"ADD",lifespan:500,gravityY:0,quantity:20,tint:parseInt(s.replace("#","0x"))});this.time.delayedCall(500,(()=>i.destroy()))}checkOverlap(t,s){const i=t.getBounds(),o=s.getBounds?s.getBounds():s;return e.Geom.Intersects.RectangleToRectangle(i,o)}getPlayerBounds(){return{x:this.player.x-this.player.width/2,y:this.player.y-this.player.height/2,width:this.player.width,height:this.player.height}}showGameOver(){this.upgrades={fireRate:this.player.fireRate,bulletSpeed:this.player.bulletSpeed,multiShot:this.player.multiShot,health:this.player.lives,shield:this.player.shield,score:this.player.score+this.previousScore},this.add.text(this.width/2,this.height/2-50,"Game Over!",{fontSize:"48px",fill:"#ff0000",stroke:"#000",strokeThickness:6}).setOrigin(.5),this.add.text(this.width/2,this.height/2+10,`Final Score: ${this.player.score}\nTotal Score: ${this.upgrades.score}`,{fontSize:"24px",fill:"#ffffff",align:"center"}).setOrigin(.5);const e=this.add.text(this.width/2,this.height/2+80,"Continue to Next Level",{fontSize:"24px",fill:"#ffffff",backgroundColor:"#4a4",padding:{x:20,y:10}}).setOrigin(.5).setInteractive();e.on("pointerover",(()=>e.setScale(1.1))),e.on("pointerout",(()=>e.setScale(1))),e.on("pointerdown",(()=>{this.scene.start(this.nextScene,{score:this.upgrades.score,upgrades:this.upgrades,difficulty:this.difficulty})}))}}class v extends e.Scene{constructor(){super({key:"sort_selection"}),this.score=0,this.currentMap=1,this.selected=null,this.sceneManager=new s,this.thumbnails=[],this.connections=[]}preload(){this.load.image("map1scene164",i("images/map1scene164.png")),this.load.image("map1scene264",i("images/map1scene264.png")),this.load.image("map1scene364",i("images/map1scene364.png")),this.load.image("map1scene464",i("images/map1scene464.png")),this.load.image("map2scene164",i("images/map2scene164.png")),this.load.image("map2scene264",i("images/map2scene264.png")),this.load.image("map2scene364",i("images/map2scene364.png")),this.load.image("map2scene464",i("images/map2scene464.png")),this.load.image("map3scene164",i("images/map3scene164.png")),this.load.image("map3scene264",i("images/map3scene264.png")),this.load.image("map3scene364",i("images/map3scene364.png")),this.load.image("map3scene464",i("images/map3scene464.png"))}create(){this.add.text(400,50,"Select Sorting Method",{fontSize:"32px",fill:"#fff"}).setOrigin(.5),this.container=this.add.container(400,250),["map1scene164","map1scene264","map1scene364","map1scene464","map2scene164","map2scene264","map2scene364","map2scene464","map3scene164","map3scene264","map3scene364","map3scene464"].forEach(((e,t)=>{const s=Math.floor(Math.log2(t+1)),i=(t-Math.pow(2,s)+1)*(800/Math.pow(2,s))-350,o=100*s-100,n=this.add.image(i,o,e).setScale(.8).setInteractive();if(n.on("pointerover",(()=>{this.tweens.add({targets:n,scale:1,duration:200})})),n.on("pointerout",(()=>{this.tweens.add({targets:n,scale:.8,duration:200})})),this.thumbnails.push(n),this.container.add(n),t>0){const e=Math.floor((t-1)/2),s=this.thumbnails[e],i=this.add.graphics();i.lineStyle(2,6710886),i.beginPath(),i.moveTo(s.x,s.y),i.lineTo(n.x,n.y),i.strokePath(),this.connections.push(i),this.container.add(i)}}));const e=[{text:"Bubble Sort",method:"bubble",description:"O(n) - Simple but inefficient"},{text:"Quick Sort",method:"quick",description:"O(n log n) - Fast divide & conquer"},{text:"Merge Sort",method:"merge",description:"O(n log n) - Stable divide & conquer"},{text:"Insertion Sort",method:"insertion",description:"O(n) - Good for small data"},{text:"Selection Sort",method:"selection",description:"O(n) - Simple to understand"},{text:"Heap Sort",method:"heap",description:"O(n log n) - In-place sorting"}],t=this.add.container(400,450);e.forEach(((s,i)=>{const o=250*Math.floor(i/3)-200,n=i%3*50,a=this.add.rectangle(o,n,200,40,3355443).setInteractive(),r=this.add.text(o,n,s.text,{fontSize:"20px",fill:"#fff",padding:{x:10,y:5}}).setOrigin(.5),c=this.add.text(o,n+15,s.description,{fontSize:"12px",fill:"#aaa"}).setOrigin(.5);c.setVisible(!1),a.on("pointerover",(()=>{this.tweens.add({targets:[a,r],scaleX:1.1,scaleY:1.1,duration:100}),a.setFillStyle(6710886),c.setVisible(!0)})),a.on("pointerout",(()=>{this.tweens.add({targets:[a,r],scaleX:1,scaleY:1,duration:100}),a.setFillStyle(3355443),c.setVisible(!1)})),a.on("pointerdown",(()=>{this.selectSort(s.method),e.forEach(((e,s)=>{t.list[3*s].setFillStyle(3355443)})),a.setFillStyle(43520)})),t.add([a,r,c])})),this.add.existing(t)}selectSort(e){this.selected=e,this.sceneManager.setSortMethod(e),this.animateSort()}animateSort(){const e=this.thumbnails;switch(this.selected){case"bubble":this.animateBubbleSort([...e]);break;case"quick":this.animateQuickSort([...e],0,e.length-1);break;case"merge":this.animateMergeSort([...e]);break;case"insertion":this.animateInsertionSort([...e]);break;case"selection":this.animateSelectionSort([...e]);break;case"heap":this.animateHeapSort([...e])}}async animateBubbleSort(e){const t=e.map((e=>({x:e.x,y:e.y})));for(let s=0;s<e.length;s++)for(let i=0;i<e.length-s-1;i++){if(e[i].setTint(65280),e[i+1].setTint(65280),await new Promise((e=>{this.time.delayedCall(500,e)})),e[i].x>e[i+1].x){const s=t[i].x;t[i].x=t[i+1].x,t[i+1].x=s,this.tweens.add({targets:e[i],x:t[i].x,duration:500}),this.tweens.add({targets:e[i+1],x:t[i+1].x,duration:500}),[e[i],e[i+1]]=[e[i+1],e[i]]}e[i].clearTint(),e[i+1].clearTint()}this.startGame()}async animateQuickSort(e,t,s){if(t>=s)return void(t===s&&e[t].setTint(65280));const i=e[s];i.setTint(16711680);let o=t-1;for(let a=t;a<s;a++){if(e[a].setTint(65280),await new Promise((e=>this.time.delayedCall(500,e))),e[a].x<i.x){o++;const t=e[o].x;e[o].x=e[a].x,e[a].x=t,[e[o],e[a]]=[e[a],e[o]]}e[a].clearTint()}const n=e[o+1].x;e[o+1].x=i.x,i.x=n,[e[o+1],e[s]]=[e[s],e[o+1]],i.clearTint(),await this.animateQuickSort(e,t,o),await this.animateQuickSort(e,o+2,s),0===t&&s===e.length-1&&this.startGame()}async animateMergeSort(e){if(e.length<=1)return e;const t=Math.floor(e.length/2),s=e.slice(0,t),i=e.slice(t);s.forEach((e=>e.setTint(255))),i.forEach((e=>e.setTint(16711680))),await new Promise((e=>this.time.delayedCall(500,e))),await this.animateMergeSort(s),await this.animateMergeSort(i);let o=0,n=0,a=0;const r=[],c=e.map((e=>e.x));for(;o<s.length&&n<i.length;)s[o].x<i[n].x?(r[a]=s[o],e[a].x=c[a],o++):(r[a]=i[n],e[a].x=c[a],n++),a++;for(;o<s.length;)r[a]=s[o],e[a].x=c[a],o++,a++;for(;n<i.length;)r[a]=i[n],e[a].x=c[a],n++,a++;return e.forEach((e=>e.clearTint())),e.length===this.thumbnails.length&&this.startGame(),r}async animateInsertionSort(e){var t;const s=e.map((e=>({x:e.x,y:e.y})));for(let i=1;i<e.length;i++){const o=e[i];o.setTint(16711680);let n=i-1;for(await new Promise((e=>this.time.delayedCall(500,e)));n>=0&&e[n].x>o.x;)e[n].setTint(65280),e[n+1]=e[n],this.tweens.add({targets:e[n],x:s[n+1].x,duration:500}),n--,await new Promise((e=>this.time.delayedCall(300,e))),null==(t=e[n+2])||t.clearTint();e[n+1]=o,this.tweens.add({targets:o,x:s[n+1].x,duration:500}),await new Promise((e=>this.time.delayedCall(500,e))),o.clearTint()}this.startGame()}async animateSelectionSort(e){const t=e.map((e=>({x:e.x,y:e.y})));for(let s=0;s<e.length-1;s++){let i=s;e[s].setTint(16711680);for(let t=s+1;t<e.length;t++)e[t].setTint(65280),await new Promise((e=>this.time.delayedCall(300,e))),e[t].x<e[i].x?(e[i].clearTint(),i=t,e[i].setTint(16711935)):e[t].clearTint();if(i!==s){const o=t[s].x;t[s].x=t[i].x,t[i].x=o,this.tweens.add({targets:e[s],x:t[s].x,duration:500}),this.tweens.add({targets:e[i],x:t[i].x,duration:500}),[e[s],e[i]]=[e[i],e[s]]}await new Promise((e=>this.time.delayedCall(500,e))),e[s].clearTint(),e[i].clearTint()}this.startGame()}async animateHeapSort(e){const t=e.map((e=>({x:e.x,y:e.y}))),s=async(i,o)=>{let n=o;const a=2*o+1,r=2*o+2;if(e[o].setTint(16711680),await new Promise((e=>this.time.delayedCall(300,e))),a<i&&(e[a].setTint(65280),e[a].x>e[n].x&&(e[n].clearTint(),n=a,e[n].setTint(16711680))),r<i&&(e[r].setTint(65280),e[r].x>e[n].x&&(e[n].clearTint(),n=r,e[n].setTint(16711680))),n!==o){const a=t[o].x;t[o].x=t[n].x,t[n].x=a,this.tweens.add({targets:e[o],x:t[o].x,duration:500}),this.tweens.add({targets:e[n],x:t[n].x,duration:500}),[e[o],e[n]]=[e[n],e[o]],await s(i,n)}e[o].clearTint(),a<i&&e[a].clearTint(),r<i&&e[r].clearTint()};for(let i=Math.floor(e.length/2)-1;i>=0;i--)await s(e.length,i);for(let i=e.length-1;i>0;i--){const o=t[0].x;t[0].x=t[i].x,t[i].x=o,this.tweens.add({targets:e[0],x:t[0].x,duration:500}),this.tweens.add({targets:e[i],x:t[i].x,duration:500}),[e[0],e[i]]=[e[i],e[0]],await new Promise((e=>this.time.delayedCall(500,e))),await s(i,0)}this.startGame()}startGame(){this.time.delayedCall(1e3,(()=>{const e=this.sceneManager.getFirstScene();this.scene.start(e,{sortType:this.selected,structure:this.thumbnails,sortedScenes:this.sceneManager.getSortedScenes()})}))}}class C extends e.Scene{constructor(){super({key:"preloader"})}init(e){this.score=e.score||0}preload(){this.load.image("map1scene1",i("images/map1scene1.png")),this.load.json("map-config",i("data/map1/map-config.json")),this.load.json("questions",i("data/questions.json")),this.load.bitmapFont("arcade",i("fonts/arcade.png"),i("fonts/arcade.xml")),this.load.image("checkMark",i("images/checkmark.png")),this.load.image("xMark",i("images/xmark.png"))}create(){this.sound&&this.sound.context&&(this.sound.pauseOnBlur=!1),this.questions=this.cache.json.get("questions");const e=this.cache.json.get("map-config"),t=e.zones[0];this.add.image(t.x,t.y,"map1scene1").setScale(t.scale),this.loadAwsIcons(e),this.setupScore()}}class E extends e.Scene{constructor(){super("MainMenu"),this.sceneManager=new s}preload(){this.load.image("background","/assets/images/background.png"),this.load.image("logo","/assets/images/logo.png")}create(){this.cameras.main.setBackgroundColor("#000033"),this.add.text(400,100,"AWS Certification Trainer",{fontFamily:"Arial Black",fontSize:38,color:"#ffffff",stroke:"#000000",strokeThickness:8,align:"center"}).setOrigin(.5);let e=250;[{text:"Start AWS Training",scene:"sort_selection",description:"Begin your AWS certification journey"},{text:"Space Invaders Practice",scene:"space_invaders",data:{nextScene:"sort_selection"},description:"Practice while defending against space invaders!"}].forEach((t=>{const s=this.add.container(400,e),i=this.add.rectangle(0,0,300,60,4868682).setInteractive({useHandCursor:!0}),o=this.add.text(0,-10,t.text,{fontFamily:"Arial",fontSize:24,color:"#ffffff"}).setOrigin(.5),n=this.add.text(0,15,t.description,{fontFamily:"Arial",fontSize:14,color:"#aaaaaa"}).setOrigin(.5);s.add([i,o,n]),i.on("pointerover",(()=>{i.setFillStyle(6974058),this.tweens.add({targets:s,scaleX:1.1,scaleY:1.1,duration:200})})),i.on("pointerout",(()=>{i.setFillStyle(4868682),this.tweens.add({targets:s,scaleX:1,scaleY:1,duration:200})})),i.on("pointerdown",(()=>{this.cameras.main.fadeOut(500),this.time.delayedCall(500,(()=>{this.scene.start(t.scene,t.data)}))})),e+=100})),this.add.text(16,this.game.config.height-30,"v1.0.0",{fontFamily:"Arial",fontSize:16,color:"#ffffff"}),this.cameras.main.fadeIn(1e3)}}const b={type:Phaser.AUTO,width:800,height:600,parent:"game-container",backgroundColor:"#000000",dom:{createContainer:!0},audio:{context:new(window.AudioContext||window.webkitAudioContext)},scale:{mode:Phaser.Scale.FIT,autoCenter:Phaser.Scale.CENTER_BOTH,width:800,height:600},physics:{default:"arcade",arcade:{gravity:{y:0},debug:!1}},render:{pixelArt:!0,powerPreference:"high-performance",antialias:!0,antialiasGL:!0},scene:[o,C,E,v,k,a,k,r,k,c,k,l,k,d,k,h,k,p,k,m,k,u,k,g,k,f,k,x,k,y,k,w,k,S,k,T,k,n]};window.addEventListener("load",(()=>{window.game=new Phaser.Game(b),document.addEventListener("click",(function e(){window.game.sound&&"suspended"===window.game.sound.context.state&&window.game.sound.context.resume(),document.removeEventListener("click",e)}))}));
