import{r as U,g as E}from"./phaser-xmrzIA0s.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const n of o.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&s(n)}).observe(document,{childList:!0,subtree:!0});function t(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(i){if(i.ep)return;i.ep=!0;const o=t(i);fetch(i.href,o)}})();var b=U();const f=E(b),I="/assets";function a(m){const e=m.startsWith("/")?m:`/${m}`;return`${I}${e}`}class te extends f.GameObjects.Container{constructor(e,t,s,i){super(e,t,s),this.sprite=e.add.sprite(0,0,i),this.add(this.sprite),e.physics.world.enable(this),this.body.setCollideWorldBounds(!0),this.stats={life:3,craftSize:1,speed:200,bulletSpeed:400,fireRate:2},this.powerUpBitmask=0,this.powerUpTypes={LIFE:1,CRAFT:2,SPEED:4,BULLETS:8},this.init()}init(){this.sprite.setScale(this.stats.craftSize),this.body.setSize(this.sprite.width*this.stats.craftSize,this.sprite.height*this.stats.craftSize),this.body.setOffset(-this.sprite.width*this.stats.craftSize/2,-this.sprite.height*this.stats.craftSize/2)}update(e,t,s){if(!this.active)return;const i=this.stats.speed*s/1e3;(e.left.isDown||t.left.isDown)&&this.x>40&&(this.x-=i),(e.right.isDown||t.right.isDown)&&this.x<760&&(this.x+=i),(e.up.isDown||t.up.isDown)&&this.y>40&&(this.y-=i),(e.down.isDown||t.down.isDown)&&this.y<560&&(this.y+=i),this.body.setPosition(this.x,this.y)}addPowerUp(e){this.powerUpBitmask|=e,this.updateStats()}updateStats(){this.stats={life:3,craftSize:1,speed:200,bulletSpeed:400,fireRate:2},this.powerUpBitmask&this.powerUpTypes.LIFE&&(this.stats.life+=2),this.powerUpBitmask&this.powerUpTypes.CRAFT&&(this.stats.craftSize=1.2,this.sprite.setScale(this.stats.craftSize),this.body.setSize(this.sprite.width*this.stats.craftSize,this.sprite.height*this.stats.craftSize)),this.powerUpBitmask&this.powerUpTypes.SPEED&&(this.stats.speed+=100),this.powerUpBitmask&this.powerUpTypes.BULLETS&&(this.stats.bulletSpeed+=200,this.stats.fireRate+=2)}takeDamage(){return this.stats.life--,this.scene.tweens.add({targets:this.sprite,alpha:0,duration:100,yoyo:!0,repeat:2}),this.stats.life<=0}getStats(){return{...this.stats}}getPowerUpBitmask(){return this.powerUpBitmask}setPowerUpBitmask(e){this.powerUpBitmask=e,this.updateStats()}reset(){this.powerUpBitmask=0,this.updateStats(),this.sprite.setAlpha(1),this.setActive(!0)}}class se extends f.GameObjects.Container{constructor(e,t,s,i,o){super(e,t,s),e.add.existing(this),this.config=o,this.isInteractive=!0,this.sprite=e.add.sprite(0,0,i),this.add(this.sprite),this.box=e.add.rectangle(0,0,this.sprite.width+20,this.sprite.height+20,3355443,.8),this.add(this.box),this.sendToBack(this.box),this.border=e.add.rectangle(0,0,this.sprite.width+20,this.sprite.height+20,65280,0),this.border.setStrokeStyle(2,65280),this.add(this.border),this.sendToBack(this.border),this.setSize(this.sprite.width+20,this.sprite.height+20),this.setInteractive(),this.on("pointerover",this.onHover.bind(this)),this.on("pointerout",this.onHoverOut.bind(this)),this.on("pointerdown",this.onClick.bind(this)),this.isAnswered=!1,this.isCorrect=!1}onHover(){this.isInteractive&&(this.scene.tweens.add({targets:[this.sprite,this.box,this.border],scaleX:1.1,scaleY:1.1,duration:100}),this.config.tooltip&&this.showTooltip())}onHoverOut(){this.isInteractive&&(this.scene.tweens.add({targets:[this.sprite,this.box,this.border],scaleX:1,scaleY:1,duration:100}),this.hideTooltip())}onClick(){this.isInteractive&&this.emit("iconclick",{id:this.config.id,category:this.config.category,questionType:this.config.questionType})}showTooltip(){if(this.tooltip)return;this.tooltip=this.scene.add.container(0,-60);const e=this.scene.add.rectangle(0,0,200,40,0,.8),t=this.scene.add.text(0,0,this.config.tooltip,{fontSize:"16px",fill:"#ffffff"}).setOrigin(.5);this.tooltip.add([e,t]),this.add(this.tooltip),this.scene.tweens.add({targets:this.tooltip,alpha:{from:0,to:1},duration:200})}hideTooltip(){this.tooltip&&this.scene.tweens.add({targets:this.tooltip,alpha:0,duration:200,onComplete:()=>{this.tooltip.destroy(),this.tooltip=null}})}setAnswered(e){this.isAnswered=!0,this.isCorrect=e,this.isInteractive=!1;const t=e?65280:16711680;this.border.setStrokeStyle(2,t),e?this.showCorrectAnimation():this.showIncorrectAnimation()}showCorrectAnimation(){const e=this.scene.add.particles(this.x,this.y,"particle",{speed:{min:-100,max:100},angle:{min:0,max:360},scale:{start:1,end:0},blendMode:"ADD",lifespan:1e3,gravityY:0,quantity:20,tint:65280});this.scene.time.delayedCall(1e3,()=>{e.destroy()})}showIncorrectAnimation(){this.scene.tweens.add({targets:[this.sprite,this.box],alpha:.5,duration:100,yoyo:!0,repeat:3})}reset(){this.isAnswered=!1,this.isCorrect=!1,this.isInteractive=!0,this.border.setStrokeStyle(2,65280),this.setAlpha(1),this.setScale(1),this.tooltip&&this.hideTooltip()}destroy(){this.tooltip&&this.tooltip.destroy(),super.destroy()}}class ie extends f.GameObjects.Rectangle{constructor(e,t=800,s=f.Math.Between(0,100)){super(e,t,s,98,32,16777215),e.add.existing(this);const i=1/f.Math.Between(1,3);this.setScale(i),this.init()}init(){this.scene.tweens.add({targets:this,x:{from:800,to:-100},duration:2e3/this.scale,onComplete:()=>{this.destroy()}})}}class oe extends f.GameObjects.Rectangle{constructor(e,t=800,s=f.Math.Between(32,368)){super(e,t,s,32,32,16711680),e.add.existing(this),e.physics.add.existing(this),this.body.setAllowGravity(!1);const i=1/f.Math.Between(1,3);this.setScale(i),this.init()}init(){this.scene.tweens.add({targets:this,x:{from:820,to:-100},duration:2e3,onComplete:()=>{this.destroy()}}),this.body.setVelocityX(-200)}handleCollision(e,t){this.scene.gameOver()}}class ne extends f.GameObjects.Sprite{constructor(e,t=800,s=f.Math.Between(32,368)){super(e,t,s,"coin"),e.add.existing(this),e.physics.add.existing(this),this.body.setAllowGravity(!1);const i=1/f.Math.Between(1,3);this.setScale(i),this.init()}init(){this.scene.tweens.add({targets:this,x:{from:820,to:-100},duration:2e3,onComplete:()=>{this.destroy()}}),this.scene.anims.create({key:"coin_anim",frames:this.scene.anims.generateFrameNumbers("coin",{start:0,end:7}),frameRate:8,repeat:-1}),this.play({key:"coin_anim",repeat:-1})}collectCoin(e,t){this.scene.score+=50,this.scene.updateScore(),this.scene.playSound("coinCollect"),e.destroy()}}class ae extends f.GameObjects.Rectangle{constructor(e,t=800,s=f.Math.Between(100,500)){super(e,t,s,32,32,65280),e.add.existing(this),e.physics.add.existing(this),this.body.setAllowGravity(!1),this.setInteractive(),this.init()}init(){this.scene.tweens.add({targets:this,x:{from:1024,to:-100},duration:2e3,onComplete:()=>{this.destroy()}}),this.setInteractive(),this.on("pointerdown",()=>{console.log("Button Clicked"),this.scene.togglePause()})}}class w{constructor(){this.progress={score:0,powerUpBitmask:0,currentMap:1,lastCompletedScene:null,powerUpStats:{life:3,craftSize:1,speed:200,bulletSpeed:400,fireRate:2}},this.loadProgress()}loadProgress(){try{const e=localStorage.getItem("gameProgress");if(e){const t=JSON.parse(e);this.progress={...this.progress,...t}}return this.progress}catch(e){return console.error("Error loading progress:",e),this.progress}}saveProgress(e={}){try{return this.progress={...this.progress,...e},this.updatePowerUpStats(),localStorage.setItem("gameProgress",JSON.stringify(this.progress)),!0}catch(t){return console.error("Error saving progress:",t),!1}}updatePowerUpStats(){this.progress.powerUpStats={life:3,craftSize:1,speed:200,bulletSpeed:400,fireRate:2},this.progress.powerUpBitmask&1&&(this.progress.powerUpStats.life+=2),this.progress.powerUpBitmask&2&&(this.progress.powerUpStats.craftSize=1.2),this.progress.powerUpBitmask&4&&(this.progress.powerUpStats.speed+=100),this.progress.powerUpBitmask&8&&(this.progress.powerUpStats.bulletSpeed+=200,this.progress.powerUpStats.fireRate+=2)}getPowerUpStats(){return this.progress.powerUpStats}updateScore(e){return this.progress.score+=e,this.saveProgress(),this.progress.score}setCurrentMap(e){this.progress.currentMap=e,this.saveProgress()}getCurrentMap(){return this.progress.currentMap}setLastCompletedScene(e){this.progress.lastCompletedScene=e,this.saveProgress()}getLastCompletedScene(){return this.progress.lastCompletedScene}addPowerUp(e){this.progress.powerUpBitmask|=e,this.updatePowerUpStats(),this.saveProgress()}hasPowerUp(e){return(this.progress.powerUpBitmask&e)!==0}resetProgress(){this.progress={score:0,powerUpBitmask:0,currentMap:1,lastCompletedScene:null,powerUpStats:{life:3,craftSize:1,speed:200,bulletSpeed:400,fireRate:2}},this.saveProgress()}getProgress(){return{...this.progress}}}const M=new w;class B extends f.Scene{constructor(){super({key:"bootscene"}),this.nextScene=null,this.nextSceneData=null}init(e){this.nextScene=e.nextScene||"mainmenu",this.nextSceneData=e.nextSceneData||{}}preload(){const e=this.cameras.main.width,t=this.cameras.main.height,s=this.add.graphics(),i=this.add.graphics();i.fillStyle(2236962,.8),i.fillRect(e/4,t/2-30,e/2,50);const o=this.add.text(e/2,t/2-50,"Loading...",{font:"20px monospace",fill:"#ffffff"}).setOrigin(.5,.5),n=this.add.text(e/2,t/2+70,"0%",{font:"18px monospace",fill:"#ffffff"}).setOrigin(.5,.5);this.load.on("progress",h=>{s.clear(),s.fillStyle(65280,1),s.fillRect(e/4+10,t/2-20,(e/2-20)*h,30),n.setText(parseInt(h*100)+"%")}),this.load.on("complete",()=>{s.destroy(),i.destroy(),o.destroy(),n.destroy()}),this.loadEssentialAssets()}loadEssentialAssets(){this.load.image("background",a("images/background.png")),this.load.image("logo",a("images/logo.png"));try{this.load.bitmapFont("arcade",a("fonts/arcade.png"),a("fonts/arcade.xml"))}catch{console.warn("Font loading failed, using system font")}try{this.load.json("questions",a("data/questions.json"))}catch{console.warn("Questions loading failed")}this.load.image("map1scene164",a("images/map1scene164.png")),this.load.image("map1scene264",a("images/map1scene264.png")),this.load.image("map1scene364",a("images/map1scene364.png")),this.load.image("map1scene464",a("images/map1scene464.png")),this.load.on("loaderror",e=>{if(console.error("Error loading file:",e.key),e.key==="background"){const t=this.add.graphics();t.fillStyle(0),t.fillRect(0,0,800,600),t.generateTexture("background",800,600),t.destroy()}})}create(){const e=M.loadProgress();this.add.rectangle(400,300,800,600,0),this.add.text(400,300,"Loading Complete!",{font:"32px monospace",fill:"#ffffff"}).setOrigin(.5,.5),this.time.delayedCall(1e3,()=>{this.cameras.main.fadeOut(500),this.time.delayedCall(500,()=>{e&&e.lastCompletedScene&&!this.nextScene?this.scene.start(e.lastCompletedScene,{score:e.score,powerUpBitmask:e.powerUpBitmask,currentMap:e.currentMap}):this.scene.start(this.nextScene,this.nextSceneData)})})}}class z extends f.Scene{constructor(){super({key:"gameover"})}init(e){this.score=e.score||0,this.powerUpBitmask=e.powerUpBitmask||0,this.currentMap=e.currentMap||1}create(){this.add.rectangle(400,300,800,600,0,.9),this.add.text(400,150,"GAME OVER",{fontSize:"64px",fill:"#ff0000",fontStyle:"bold"}).setOrigin(.5),this.add.text(400,250,`Final Score: ${this.score}`,{fontSize:"32px",fill:"#ffffff"}).setOrigin(.5);const e=[];this.powerUpBitmask&1&&e.push("Life+"),this.powerUpBitmask&2&&e.push("Size+"),this.powerUpBitmask&4&&e.push("Speed+"),this.powerUpBitmask&8&&e.push("Fire+"),this.add.text(400,300,`Power-ups: ${e.join(" ")}`,{fontSize:"24px",fill:"#00ff00"}).setOrigin(.5);const t=this.add.container(400,400),s=this.add.rectangle(0,0,200,50,65280).setInteractive(),i=this.add.text(0,0,"Try Again",{fontSize:"24px",fill:"#000000"}).setOrigin(.5),o=this.add.rectangle(0,70,200,50,6710886).setInteractive(),n=this.add.text(0,70,"Main Menu",{fontSize:"24px",fill:"#ffffff"}).setOrigin(.5);s.on("pointerover",()=>{s.setFillStyle(52224),i.setScale(1.1)}),s.on("pointerout",()=>{s.setFillStyle(65280),i.setScale(1)}),o.on("pointerover",()=>{o.setFillStyle(8947848),n.setScale(1.1)}),o.on("pointerout",()=>{o.setFillStyle(6710886),n.setScale(1)}),s.on("pointerdown",()=>{this.sound.play("button_click"),this.retryGame()}),o.on("pointerdown",()=>{this.sound.play("button_click"),this.returnToMenu()}),t.add([s,i,o,n]);const h=this.getHighScore();this.score>h?(this.setHighScore(this.score),this.add.text(400,500,"New High Score!",{fontSize:"32px",fill:"#ffff00"}).setOrigin(.5)):h>0&&this.add.text(400,500,`High Score: ${h}`,{fontSize:"24px",fill:"#ffffff"}).setOrigin(.5)}retryGame(){M.resetProgress(),this.cameras.main.fadeOut(500),this.time.delayedCall(500,()=>{this.scene.start("sort_selection",{score:0,powerUpBitmask:0,currentMap:1})})}returnToMenu(){M.resetProgress(),this.cameras.main.fadeOut(500),this.time.delayedCall(500,()=>{this.scene.start("mainmenu")})}getHighScore(){try{const e=localStorage.getItem("highScore");return e?parseInt(e):0}catch(e){return console.error("Error getting high score:",e),0}}setHighScore(e){try{localStorage.setItem("highScore",e.toString())}catch(t){console.error("Error setting high score:",t)}}}class S{constructor(e,t=0){this.imageNamerunn=e,this.score=t,this.next=null,this.left=null,this.right=null}}class A{constructor(){this.images=["map1scene164.png","map1scene264.png","map1scene364.png","map1scene464.png","map2scene164.png","map2scene264.png","map2scene364.png","map2scene464.png","map3scene164.png","map3scene264.png","map3scene364.png","map3scene464.png","map4scene364.png","map4scene464.png"],this.sortedImages=[],this.currentStructure="array",this.sortMethod="bubble"}setDataStructure(e){switch(this.currentStructure=e,e){case"linkedList":return this.createLinkedList();case"binaryTree":return this.createBinaryTree();case"heap":return this.createHeap();default:return this.images}}setSortMethod(e){return this.sortMethod=e,this.sort()}sort(){switch(this.sortMethod){case"bubble":return this.bubbleSort([...this.images]);case"quick":return this.quickSort([...this.images]);case"merge":return this.mergeSort([...this.images]);default:return this.images}}createLinkedList(){let e=new S(this.images[0]),t=e;for(let s=1;s<this.images.length;s++)t.next=new S(this.images[s]),t=t.next;return e}createBinaryTree(){const e=new S(this.images[0]);for(let t=1;t<this.images.length;t++)this.insertNode(e,new S(this.images[t]));return e}createHeap(){const e=[...this.images];for(let t=Math.floor(e.length/2)-1;t>=0;t--)this.heapify(e,e.length,t);return e}bubbleSort(e){for(let t=0;t<e.length;t++)for(let s=0;s<e.length-t-1;s++)e[s]>e[s+1]&&([e[s],e[s+1]]=[e[s+1],e[s]]);return e}quickSort(e){if(e.length<=1)return e;const t=e[0],s=e.slice(1).filter(o=>o<t),i=e.slice(1).filter(o=>o>=t);return[...this.quickSort(s),t,...this.quickSort(i)]}mergeSort(e){if(e.length<=1)return e;const t=Math.floor(e.length/2),s=this.mergeSort(e.slice(0,t)),i=this.mergeSort(e.slice(t));return this.merge(s,i)}merge(e,t){let s=[],i=0,o=0;for(;i<e.length&&o<t.length;)e[i]<t[o]?(s.push(e[i]),i++):(s.push(t[o]),o++);return s.concat(e.slice(i)).concat(t.slice(o))}getOrderedImages(){return this.sortedImages.length===0&&(this.sortedImages=[...this.image],this.sort()),this.sortedImages}getNextImage(e){const t=this.sortedImages.indexOf(e);return t!==-1&&t<this.sortedImages.length-1?this.sortedImages[t+1]:"sort_selection"}getSortedImages(){return this.sortedImages}getFirstImage(){return this.sortedImages[0]}}class x{constructor(){this.isTransitioning=!1,this.progressManager=new w,this.sceneManager=new A}fadeIn(e,t=500){e.cameras.main.fadeIn(t)}fadeOut(e,t,s=500){e.cameras.main.fadeOut(s),e.cameras.main.once("camerafadeoutcomplete",()=>{t&&t()})}to(e,t,s={}){this.isTransitioning||(this.isTransitioning=!0,this.progressManager.saveProgress({lastCompletedScene:e.scene.key,score:s.score||0,powerUpBitmask:s.powerUpBitmask||0,currentMap:s.currentMap||1}),e.events.emit("sceneEnd"),this.fadeOut(e,()=>{e.scene.start(t,{...s,fromScene:e.scene.key}),this.isTransitioning=!1}))}toSpaceInvaders(e,t,s={}){const i=this.progressManager.loadProgress(),o={score:s.score||i.score||0,powerUpBitmask:s.powerUpBitmask||i.powerUpBitmask||0,nextScene:t,fromScene:e.scene.key};e.events.emit("scenePause"),this.to(e,"space_invaders",o)}fromSpaceInvaders(e,t={}){const s=t.nextScene;if(!s){console.error("No next scene specified for space invaders transition");return}const i={score:t.score||0,powerUpBitmask:t.powerUpBitmask||0,currentMap:t.currentMap||1,fromScene:"space_invaders"};this.to(e,s,i)}toGameScene(e,t,s,i={}){const o=this.progressManager.loadProgress(),n={score:i.score||o.score||0,powerUpBitmask:i.powerUpBitmask||o.powerUpBitmask||0,currentMap:t,fromScene:e.scene.key};e.events.emit("sceneStart");const h=`map${t}scene${s}`;this.to(e,h,n)}toMainMenu(e,t={}){this.progressManager.resetProgress(),this.to(e,"mainmenu",t)}toGameOver(e,t={}){const s=this.progressManager.loadProgress(),i={score:t.score||s.score||0,powerUpBitmask:t.powerUpBitmask||s.powerUpBitmask||0,currentMap:t.currentMap||s.currentMap||1,fromScene:e.scene.key};this.to(e,"gameover",i)}}class y extends f.Scene{constructor(e){super(e),this.player=null,this.score=0,this.scoreText=null,this.questions=null,this.icons=[],this.answeredQuestions=0,this.isTransitioning=!1,this.clickCooldown=!1,this.progressManager=new w,this.sceneTransition=new x}init(e){this.score=e.score||0,this.powerUpBitmask=e.powerUpBitmask||0,this.currentMap=e.currentMap||1,this.fromScene=e.fromScene,this.answeredQuestions=0}preload(){this.load.json("map-config",a(`data/map${this.currentMap}/map-config.json`)),this.load.json("questions",a("data/questions.json")),this.load.image("checkmark",a("images/checkmark.png")),this.load.image("xmark",a("images/xmark.png")),this.load.bitmapFont("arcade",a("fonts/arcade.png"),a("fonts/arcade.xml"))}create(){this.add.rectangle(400,300,800,600,0,.8),this.setupScore(),this.powerUpText=this.add.text(16,56,this.getPowerUpText(),{fontSize:"24px",fill:"#00ff00",fontFamily:"Arial"});try{this.questions=this.cache.json.get("questions");const e=this.cache.json.get("map-config");if(!e||!e.zones)throw new Error("Invalid map config structure");this.setupMap(e),this.sceneTransition.fadeIn(this)}catch(e){console.error("Error in create():",e)}}setupScore(){this.scoreText=this.add.text(16,16,`Score: ${this.score}`,{fontSize:"32px",fill:"#fff",backgroundColor:"#000",padding:{x:10,y:5}})}getPowerUpText(){const e=[];return this.powerUpBitmask&1&&e.push("Life+"),this.powerUpBitmask&2&&e.push("Size+"),this.powerUpBitmask&4&&e.push("Speed+"),this.powerUpBitmask&8&&e.push("Fire+"),`Power-ups: ${e.join(" ")}`}setupMap(e){throw new Error("setupMap must be implemented by child class")}transitionToNextScene(){this.isTransitioning||(this.isTransitioning=!0,this.progressManager.saveProgress({lastCompletedScene:this.scene.key,score:this.score,powerUpBitmask:this.powerUpBitmask,currentMap:this.currentMap}),this.sceneTransition.toSpaceInvaders(this,this.getNextSceneKey(),{score:this.score,powerUpBitmask:this.powerUpBitmask,currentMap:this.currentMap}))}getNextSceneKey(){const e=parseInt(this.scene.key.slice(-1));return e<4?`map${this.currentMap}scene${e+1}`:this.currentMap<4?`map${this.currentMap+1}scene1`:"gameover"}handleQuestionAnswered(e){e&&(this.score+=100,this.scoreText.setText(`Score: ${this.score}`)),this.answeredQuestions++,this.answeredQuestions>=5&&this.transitionToNextScene()}}class q extends y{constructor(){super({key:"map1scene1"}),this.player=null,this.score=0,this.scoreText=null,this.currentMap=1,this.questions=null,this.icons=[],this.answeredQuestions=0,this.isTransitioning=!1,this.clickCooldown=!1,this.powerUpBitmask=0,this.progressManager=new w,this.sceneTransition=new x}init(e){this.score=(e==null?void 0:e.score)||0,this.powerUpBitmask=(e==null?void 0:e.powerUpBitmask)||0,this.currentMap=(e==null?void 0:e.currentMap)||1,this.isTransitioning=!1,this.progressManager.saveProgress({lastCompletedScene:"map1scene1",currentMap:this.currentMap,powerUpBitmask:this.powerUpBitmask,score:this.score}),this.cameras.main.fadeIn(500)}preload(){super.preload(),this.load.image("map1scene1",a("images/map1scene1.png")),this.load.json("map-config",a("data/map1/map-config.json"))}getNextSceneKey(){return"map1scene2"}create(){this.add.rectangle(400,300,800,600,0,.8),this.sound&&this.sound.context&&(this.sound.pauseOnBlur=!1),this.setupScore(),this.powerUpText=this.add.text(16,56,this.getPowerUpText(),{fontSize:"24px",fill:"#00ff00",fontFamily:"Arial"});try{const e=this.cache.json.get("map-config");if(this.questions=this.cache.json.get("questions"),!e)throw new Error("Error: Map configuration not found");if(!this.questions)throw new Error("Error: Questions not found");if(!e.zones)throw new Error("Invalid map config structure");const t=e.zones[0];if(!t)throw new Error("No valid zone found in config");const s=this.add.image(t.x||400,t.y||300,"map1scene1");s.setOrigin(.5),s.setScale(t.scale||1),this.loadAwsIcons(e),this.sceneTransition.fadeIn()}catch(e){console.error("Error in create:",e),this.add.text(400,300,e.message,{fontSize:"24px",fill:"#fff",backgroundColor:"#ff0000",padding:{x:10,y:5}}).setOrigin(.5),setTimeout(()=>{this.scene.start("map1scene1")},2e3)}}getPowerUpText(){const e=[];return this.powerUpBitmask&1&&e.push("Life+"),this.powerUpBitmask&2&&e.push("Size+"),this.powerUpBitmask&4&&e.push("Speed+"),this.powerUpBitmask&8&&e.push("Fire+"),`Power-ups: ${e.join(" ")}`}loadAwsIcons(e){e.zones.forEach(t=>{t.icons.forEach(s=>{const i=`assets/images/services16/${s.category}/48/${s.name}`;console.log("Loading icon:",s.name,"from path:",i),this.load.image(`icon_${s.name}`,i)})}),this.load.on("loaderror",t=>{console.error("Error loading icon:",t.key);const s=this.add.graphics();s.fillStyle(65280),s.fillRect(0,0,48,48),s.generateTexture(t.key,48,48),s.destroy()}),this.load.once("complete",()=>{e.zones.forEach(t=>{t.icons.forEach(s=>{const i=`icon_${s.name}`;console.log("Creating icon:",i);const o=this.add.image(s.x,s.y,i).setInteractive().setScale(.5),n=this.add.rectangle(s.x,s.y,48,48,65280,0);n.setStrokeStyle(2,65280),o.box=n,this.setupIconInteraction(o,s),this.icons.push(o)})})}),this.load.start()}createIcons(e){e.zones.forEach(t=>{t.icons.forEach(s=>{const i=this.add.image(s.x,s.y,"icon").setInteractive().setScale(.5);console.log("Creating icon sprite:",s.name||s.service),this.setupIconInteraction(i,s),this.icons.push(i)})})}setupIconInteraction(e,t){e.setTint(16777215),e.isAnswered=!1,e.on("pointerover",()=>{e.isAnswered||(e.setScale(1.3),e.setTint(65280),this.showTooltip(t.name||t.service,e.x,e.y))}),e.on("pointerout",()=>{e.isAnswered||(e.setScale(1.3),e.setTint(16777215),this.hideTooltip())}),this.tweens&&this.tweens.add&&this.tweens.add({targets:e,scale:{from:1,to:1.4},duration:1e3,yoyo:!0,repeat:-1,ease:"Sine.easeInOut"}),e.on("pointerdown",()=>this.handleIconClick(e,t))}handleIconClick(e,t){if(e.isAnswered||this.clickCooldown)return;this.clickCooldown=!0,e.setTint(16711680);let s,i=this.questions&&t&&t.questionTypes?this.questions.filter(o=>t.questionTypes.some(n=>o.question.toLowerCase().includes(n.toLowerCase()))):this.questions;(!i||i.length===0)&&(i=this.questions),i&&(s=f.Utils.Array.GetRandom(i),this.showQuestion(s,e)),setTimeout(()=>{this.clickCooldown=!1,e.isAnswered||e.setTint(16777215)},500)}showTooltip(e,t,s){this.tooltip=this.add.text(t,s-60,e,{fontSize:"16px",fill:"#fff",backgroundColor:"#000",padding:{x:5,y:3}}).setOrigin(1).setDepth(150)}hideTooltip(){this.tooltip&&this.tooltip.destroy()}showQuestion(e,t){if(!e||!e.options){console.error("Invalid question format:",e);return}const s=this.add.rectangle(400,300,750,400,0,.85);s.setDepth(2);const i=this.add.text(400,150,e.question,{fontFamily:"Arial",fontSize:"20px",color:"#ffffff",align:"center",wordWrap:{width:700,useAdvancedWrap:!0}});i.setOrigin(.5),i.setDepth(3);const o=Object.entries(e.options),n=220,h=50,r=o.map(([c,d],p)=>{const u=n+p*h,g=this.add.rectangle(400,u,600,40,3355443,.5);g.setDepth(2.5),g.setVisible(!1);const l=this.add.text(400,u,`${c}: ${d}`,{fontFamily:"Arial",fontSize:"18px",color:"#ffffff",align:"center"});return l.setOrigin(.5),l.setInteractive(),l.setDepth(3),l.on("pointerover",()=>{l.setColor("#ffff00"),g.setVisible(!0)}),l.on("pointerout",()=>{l.setColor("#ffffff"),g.setVisible(!1)}),l.on("pointerdown",()=>{const k=c.toLowerCase()===e.answer.toLowerCase();k&&(this.score+=100,this.scoreText.setText(`Score: ${this.score}`));const v=this.add.text(400,n+o.length*h+20,e.explanation,{fontFamily:"Arial",fontSize:"16px",color:k?"#00ff00":"#ff0000",align:"center",wordWrap:{width:600}});v.setOrigin(.5),v.setDepth(3);const C=this.add.image(t.x,t.y,k?"checkMark":"xMark");C.setDepth(2),t.isAnswered=!0,t.box&&t.box.setStrokeStyle(3,k?65280:16711680),r.forEach(T=>{T.disableInteractive(),T.buttonBg.setVisible(!1)}),setTimeout(()=>{[s,i,...r.map(T=>[T,T.buttonBg]).flat(),v,C].forEach(T=>T.destroy())},3e3),this.answeredQuestions++,this.answeredQuestions>=this.icons.length&&setTimeout(()=>{window.sceneManager?(window.sceneManager.updateProgress(),window.sceneManager.startNextScene()):this.scene.start("space_invaders",{nextScene:"map1scene2",score:this.score})},3500)}),l.buttonBg=g,l})}setupScore(){this.scoreText=this.add.text(16,16,"Score: "+this.score,{fontSize:"32px",fill:"#fff"})}transitionToNextScene(){this.isTransitioning||(this.isTransitioning=!0,this.progressManager.saveProgress({lastCompletedScene:"map1scene1",currentMap:this.currentMap,powerUpBitmask:this.powerUpBitmask,score:this.score}),this.sceneTransition.fadeOut(()=>{this.scene.start("sort_selection",{score:this.score,powerUpBitmask:this.powerUpBitmask,currentMap:this.currentMap})}))}}class P extends y{constructor(){super({key:"map1scene2"}),this.player=null,this.score=0,this.scoreText=null,this.currentMap=1,this.questions=null,this.icons=[],this.answeredQuestions=0,this.isTransitioning=!1,this.clickCooldown=!1,this.powerUpBitmask=0,this.progressManager=new w,this.sceneTransition=new x}init(e){this.score=(e==null?void 0:e.score)||0,this.isTransitioning=!1,this.cameras.main.fadeIn(500)}preload(){super.preload(),this.load.image("map1scene2",a("images/map1scene2.png")),this.load.json("map-config",a("data/map1/map-config2.json"))}getNextSceneKey(){return"map1scene3"}create(){this.add.rectangle(400,300,800,600,0,.8),this.sound&&this.sound.context&&(this.sound.pauseOnBlur=!1),this.questions=this.cache.json.get("questions");const e=this.cache.json.get("map-config"),t=e.zones[0];this.add.image(t.x,t.y,"map1scene2").setScale(t.scale),this.loadAwsIcons(e),this.setupScore(),this.powerUpText=this.add.text(16,56,this.getPowerUpText(),{fontSize:"24px",fill:"#00ff00",fontFamily:"Arial"});try{this.questions=this.cache.json.get("questions");const i=this.cache.json.get("map-config2");if(!i||!i.zones)throw new Error("Invalid map config structure");const n=i.zones[1]||i.zones[0];if(!n)throw new Error("No valid zone found in config");const h=this.add.image(n.x||400,n.y||300,"map1gamescene2");h.setOrigin(.5),h.setScale(n.scale||1),this.loadAwsIcons(i),this.sceneTransition.fadeIn()}catch(i){console.error("Error in create:",i),this.add.text(400,300,"Error loading level. Restarting...",{fontSize:"24px",fill:"#fff",backgroundColor:"#ff0000",padding:{x:10,y:5}}).setOrigin(.5),setTimeout(()=>{this.scene.start("map1gamescene2")},2e3)}}loadAwsIcons(e){e.zones.forEach(t=>{t.icons.forEach(s=>{const i=this.questions.find(o=>s.questionTypes.some(n=>o.question.toLowerCase().includes(n.toLowerCase())));if(i&&i.image)console.log("Loading icon from question:",i.image),this.load.image(`icon_${s.name}`,i.image);else{const o=`assets/images/services16/${s.category}/48/${s.name}.png`;console.log("Loading icon with constructed path:",o),this.load.image(`icon_${s.name}`,o)}})}),this.load.on("loaderror",t=>{console.error("Error loading file:",t.key)}),this.load.once("complete",()=>{e.zones.forEach(t=>{t.icons.forEach(s=>{const i=this.add.image(s.x,s.y,`icon_${s.name}`).setInteractive().setScale(1);console.log("Creating icon sprite:",s.name),this.setupIconInteraction(i,s),this.icons.push(i)})})}),this.load.start()}setupIconInteraction(e,t){e.setTint(16777215),e.isAnswered=!1,e.on("pointerover",()=>{e.isAnswered||(e.setScale(1.3),e.setTint(65280),this.showTooltip(t.name,e.x,e.y))}),e.on("pointerout",()=>{e.isAnswered||(e.setScale(1),e.setTint(16777215),this.hideTooltip())}),this.tweens.add({targets:e,scale:{from:1,to:1.4},duration:1e3,yoyo:!0,repeat:-1,ease:"Sine.easeInOut"}),e.on("pointerdown",()=>{if(e.isAnswered||this.clickCooldown)return;this.clickCooldown=!0,this.time.delayedCall(500,()=>{this.clickCooldown=!1});let s,i=this.questions.filter(o=>t.questionTypes.some(n=>o.question.toLowerCase().includes(n.toLowerCase())));i.length===0&&(i=this.questions),s=f.Utils.Array.GetRandom(i),this.showQuestion(s,e)})}showTooltip(e,t,s){this.tooltip=this.add.text(t,s-60,e,{fontSize:"16px",fill:"#fff",backgroundColor:"#000",padding:{x:5,y:3}}).setOrigin(.5).setDepth(150)}hideTooltip(){this.tooltip&&this.tooltip.destroy()}showQuestion(e,t){if(this.isTransitioning)return;const s=document.createElement("div");s.className="question-container";const i=document.createElement("div");i.className="overlay";const o=document.createElement("div");o.className="question",o.textContent=e.question,s.appendChild(o);let n=!1;Object.entries(e.options).forEach(([h,r])=>{const c=document.createElement("div");c.className="option";const d=document.createElement("span");d.className="option-letter",d.textContent=h;const p=document.createElement("span");p.className="option-text",p.textContent=r,c.appendChild(d),c.appendChild(p),c.addEventListener("click",()=>{if(n)return;n=!0;const u=h===e.answer;u&&(this.score+=100,this.scoreText.setText(`Score: ${this.score}`));const g=u?"checkMark":"xMark",l=this.add.image(t.x,t.y,g).setScale(.5).setDepth(150);if(t.isAnswered=!0,t.setAlpha(.5),this.tweens.killTweensOf(t),t.setScale(1),t.disableInteractive(),this.answeredQuestions++,e.explanation){const k=document.createElement("div");k.className="explanation",k.textContent=e.explanation,s.appendChild(k)}this.answeredQuestions===5&&(this.isTransitioning=!0),setTimeout(()=>{document.body.removeChild(i),document.body.removeChild(s),l.destroy(),this.answeredQuestions===5&&(console.log("All 5 questions answered, transitioning to Space Invaders..."),this.cameras.main.fade(1e3,0,0,0,!1,(k,v)=>{v===1&&this.scene.start("map1gamescene2",{nextScene:"space_invaders",score:this.score})}))},2e3)}),s.appendChild(c)}),document.body.appendChild(i),document.body.appendChild(s)}setupScore(){this.scoreText=this.add.text(16,16,`Score: ${this.score}`,{fontSize:"32px",fill:"#fff",backgroundColor:"#000",padding:{x:10,y:5}}).setScrollFactor(0).setDepth(200)}getPowerUpText(){const e=[];return this.powerUpBitmask&1&&e.push("Life+"),this.powerUpBitmask&2&&e.push("Size+"),this.powerUpBitmask&4&&e.push("Speed+"),this.powerUpBitmask&8&&e.push("Fire+"),`Power-ups: ${e.join(" ")}`}transitionToNextScene(){this.isTransitioning||(this.isTransitioning=!0,this.scene.pause(),this.camera.main.fadeOut(500),this.cameras.main.once("camerafadeoutcomplete",()=>{x.toWithLoading(this,"space-invaders",{nextScene:this.getNextSceneKey(),score:this.score})}))}}class O extends y{constructor(){super({key:"map1scene3"}),this.player=null,this.score=0,this.scoreText=null,this.currentMap=1,this.questions=null,this.icons=[],this.answeredQuestions=0,this.isTransitioning=!1,this.clickCooldown=!1,this.powerUpBitmask=0,this.progressManager=new w,this.sceneTransition=new x}init(e){this.score=e.score||0,this.powerUpBitmask=e.powerUpBitmask||0,this.currentMap=e.currentMap||1,this.progressManager.saveProgress({lastCompletedScene:"map1gamescene3",currentMap:this.currentMap,powerUpBitmask:this.powerUpBitmask,score:this.score})}init(e){this.score=(e==null?void 0:e.score)||0,this.isTransitioning=!1,this.cameras.main.fadeIn(500)}preload(){this.load.scene("map1gamescene3",a("images/map1gamescene3.png")),this.load.json("map-config3",a("data/map1/map-config3.json")),this.load.json("questions",a("data/questions.json")),this.load.image("checkMark",a("images/checkmark.png")),this.load.image("xMark",a("images/xmark.png")),this.load.on("loaderror",e=>{if(console.error("Error loading file:",e.key),e.key==="checkMark"){const t=this.add.graphics();t.fillStyle(65280),t.fillCircle(0,0,20),t.generateTexture("checkMark",40,40),t.destroy()}else if(e.key==="xMark"){const t=this.add.graphics();t.lineStyle(4,16711680),t.moveTo(-10,-10),t.lineTo(10,10),t.moveTo(10,-10),t.lineTo(-10,10),t.generateTexture("xMark",40,40),t.destroy()}})}create(){this.add.rectangle(400,300,800,600,0,.8),this.sound&&this.sound.context&&(this.sound.pauseOnBlur=!1),this.setupScore(),this.powerUpText=this.add.text(16,56,this.getPowerUpText(),{fontSize:"24px",fill:"#00ff00",fontFamily:"Arial"});try{this.questions=this.cache.json.get("questions");const e=this.cache.json.get("map-config3");if(!e||!e.zones)throw new Error("Invalid map config structure");const s=e.zones[2]||e.zones[0];if(!s)throw new Error("No valid zone found in config");const i=this.add.image(s.x||400,s.y||300,"map1gamescene3");i.setOrigin(.5),i.setScale(s.scale||1),this.loadAwsIcons(e),this.sceneTransition.fadeIn()}catch(e){console.error("Error in create:",e),this.add.text(400,300,"Error loading level. Restarting...",{fontSize:"24px",fill:"#fff",backgroundColor:"#ff0000",padding:{x:10,y:5}}).setOrigin(.5),setTimeout(()=>{this.scene.start("map1gamescene3")},2e3)}}getPowerUpText(){const e=[];return this.powerUpBitmask&1&&e.push("Life+"),this.powerUpBitmask&2&&e.push("Size+"),this.powerUpBitmask&4&&e.push("Speed+"),this.powerUpBitmask&8&&e.push("Fire+"),`Power-ups: ${e.join(" ")}`}loadAwsIcons(e){e.zones.forEach(t=>{t.icons.forEach(s=>{const i=this.questions.find(n=>s.questionTypes.some(h=>n.question.toLowerCase().includes(h.toLowerCase())));if(i&&i.image)console.log("Loading icon from question:",i.image),this.load.image(`icon_${s.name}`,i.image);else{const n=`assets/images/services16/${s.category}/48/${s.name}`;console.log("Loading icon with constructed path:",n),this.load.image(`icon_${s.name}`,n)}const o=`/assets/images/services16/${s.category}/48/${s.name}`;this.load.image(`icon_${s.name}`,o)})}),this.load.once("complete",()=>{e.zones.forEach(t=>{t.icons.forEach(s=>{const i=this.add.image(s.x,s.y,`icon_${s.name}`).setInteractive().setScale(.5);console.log("Creating icon sprite:",s.name),this.setupIconInteraction(i,s),this.icons.push(i)})})}),this.load.start()}setupIconInteraction(e,t){e.setTint(16777215),e.isAnswered=!1,e.on("pointerover",()=>{e.isAnswered||(e.setScale(1.3),e.setTint(65280),this.showTooltip(t.name,e.x,e.y))}),e.on("pointerout",()=>{e.isAnswered||(e.setScale(1.3),e.setTint(16777215),this.hideTooltip())}),this.tweens.add({targets:e,scale:{from:1,to:1.4},duration:1e3,yoyo:!0,repeat:-1,ease:"Sine.easeInOut"}),e.on("pointerdown",()=>{if(e.isAnswered)return;let s,i=this.questions.filter(o=>t.questionTypes.some(n=>o.question.toLowerCase().includes(n.toLowerCase())));i.length===0&&(i=this.questions),s=f.Utils.Array.GetRandom(i),this.showQuestion(s,e)})}showTooltip(e,t,s){this.tooltip=this.add.text(t,s-60,e,{fontSize:"16px",fill:"#fff",backgroundColor:"#000",padding:{x:5,y:3}}).setOrigin(1).setDepth(150)}hideTooltip(){this.tooltip&&this.tooltip.destroy()}showQuestion(e,t){const s=document.createElement("div");s.className="question-container";const i=document.createElement("div");i.className="overlay";const o=document.createElement("div");o.className="question",o.textContent=e.question,s.appendChild(o),Object.entries(e.options).forEach(([n,h])=>{const r=document.createElement("div");r.className="option";const c=document.createElement("span");c.className="option-letter",c.textContent=n;const d=document.createElement("span");d.className="option-text",d.textContent=h,r.appendChild(c),r.appendChild(d),r.addEventListener("click",()=>{const p=n===e.answer;p&&(this.score+=100,this.scoreText.setText(`Score: ${this.score}`));const u=p?"checkMark":"xMark",g=this.add.image(t.x,t.y,u).setScale(1).setDepth(150);if(t.isAnswered=!0,t.setAlpha(.5),this.tweens.killTweensOf(t),t.setScale(1),t.disableInteractive(),this.answeredQuestions++,e.explanation){const l=document.createElement("div");l.className="explanation",l.textContent=e.explanation,s.appendChild(l)}setTimeout(()=>{document.body.removeChild(i),document.body.removeChild(s),g.destroy(),this.answeredQuestions===5&&(console.log("All 5 questions answered, transitioning to Space Invaders..."),setTimeout(()=>{this.scene.start("space_invaders",{nextScene:"map1gamescene4"})},3e3))},2e3)}),s.appendChild(r)}),document.body.appendChild(i),document.body.appendChild(s)}setupScore(){this.scoreText=this.add.text(16,16,"Score: "+this.score,{fontSize:"32px",fill:"#fff",backgroundColor:"#000",padding:{x:10,y:5}}).setScrollFactor(0).setDepth(200)}transitionToNextScene(){this.isTransitioning||(this.isTransitioning=!0,this.progressManager.saveProgress({lastCompletedScene:"map1gamescene3",currentMap:this.currentMap,powerUpBitmask:this.powerUpBitmask,score:this.score}),this.sceneTransition.fadeOut(()=>{this.scene.start("sort_selection",{score:this.score,powerUpBitmask:this.powerUpBitmask,currentMap:this.currentMap})}))}}class N extends y{constructor(){super({key:"map1scene4"}),this.player=null,this.score=0,this.scoreText=null,this.currentMap=1,this.questions=null,this.icons=[],this.answeredQuestions=0,this.isTransitioning=!1,this.clickCooldown=!1,this.powerUpBitmask=0,this.progressManager=new w,this.sceneTransition=new x}init(e){this.score=e.score||0,this.powerUpBitmask=e.powerUpBitmask||0,this.currentMap=e.currentMap||1,this.progressManager.saveProgress({lastCompletedScene:"map1gamescene4",currentMap:this.currentMap,powerUpBitmask:this.powerUpBitmask,score:this.score})}preload(){this.load.scene("map1gamescene4",a("images/map1gamescene4.png")),this.load.json("map-config4",a("data/map1/map-config4.json")),this.load.json("questions",a("data/questions.json")),this.load.image("checkMark",a("images/checkmark.png")),this.load.image("xMark",a("images/xmark.png")),this.load.on("loaderror",e=>{if(console.error("Error loading file:",e.key),e.key==="checkMark"){const t=this.add.graphics();t.fillStyle(65280),t.fillCircle(0,0,20),t.generateTexture("checkMark",40,40),t.destroy()}else if(e.key==="xMark"){const t=this.add.graphics();t.lineStyle(4,16711680),t.moveTo(-10,-10),t.lineTo(10,10),t.moveTo(10,-10),t.lineTo(-10,10),t.generateTexture("xMark",40,40),t.destroy()}})}create(){this.add.rectangle(400,300,800,600,0,.8),this.sound&&this.sound.context&&(this.sound.pauseOnBlur=!1),this.setupScore(),this.powerUpText=this.add.text(16,56,this.getPowerUpText(),{fontSize:"24px",fill:"#00ff00",fontFamily:"Arial"});try{this.questions=this.cache.json.get("questions");const e=this.cache.json.get("map-config4");if(!e||!e.zones)throw new Error("Invalid map config structure");const s=e.zones[3]||e.zones[0];if(!s)throw new Error("No valid zone found in config");const i=this.add.image(s.x||400,s.y||300,"map1gamescene4");i.setOrigin(.5),i.setScale(s.scale||1),this.loadAwsIcons(e),this.sceneTransition.fadeIn()}catch(e){console.error("Error in create:",e),this.add.text(400,300,"Error loading level. Restarting...",{fontSize:"24px",fill:"#fff",backgroundColor:"#ff0000",padding:{x:10,y:5}}).setOrigin(.5),setTimeout(()=>{this.scene.start("map1gamescene4")},2e3)}}getPowerUpText(){const e=[];return this.powerUpBitmask&1&&e.push("Life+"),this.powerUpBitmask&2&&e.push("Size+"),this.powerUpBitmask&4&&e.push("Speed+"),this.powerUpBitmask&8&&e.push("Fire+"),`Power-ups: ${e.join(" ")}`}loadAwsIcons(e){e.zones.forEach(t=>{t.icons.forEach(s=>{const i=this.questions.find(n=>s.questionTypes.some(h=>n.question.toLowerCase().includes(h.toLowerCase())));if(i&&i.image)console.log("Loading icon from question:",i.image),this.load.image(`icon_${s.name}`,i.image);else{const n=`assets/images/services16/${s.category}/48/${s.name}`;console.log("Loading icon with constructed path:",n),this.load.image(`icon_${s.name}`,n)}const o=`/assets/images/services16/${s.category}/48/${s.name}`;this.load.image(`icon_${s.name}`,o)})}),this.load.once("complete",()=>{e.zones.forEach(t=>{t.icons.forEach(s=>{const i=this.add.image(s.x,s.y,`icon_${s.name}`).setInteractive().setScale(.5);console.log("Creating icon sprite:",s.name),this.setupIconInteraction(i,s),this.icons.push(i)})})}),this.load.start()}setupIconInteraction(e,t){e.setTint(16777215),e.isAnswered=!1,e.on("pointerover",()=>{e.isAnswered||(e.setScale(1.3),e.setTint(65280),this.showTooltip(t.name,e.x,e.y))}),e.on("pointerout",()=>{e.isAnswered||(e.setScale(1.3),e.setTint(16777215),this.hideTooltip())}),this.tweens.add({targets:e,scale:{from:1,to:1.4},duration:1e3,yoyo:!0,repeat:-1,ease:"Sine.easeInOut"}),e.on("pointerdown",()=>{if(e.isAnswered)return;let s,i=this.questions.filter(o=>t.questionTypes.some(n=>o.question.toLowerCase().includes(n.toLowerCase())));i.length===0&&(i=this.questions),s=f.Utils.Array.GetRandom(i),this.showQuestion(s,e)})}showTooltip(e,t,s){this.tooltip=this.add.text(t,s-60,e,{fontSize:"16px",fill:"#fff",backgroundColor:"#000",padding:{x:5,y:3}}).setOrigin(1).setDepth(150)}hideTooltip(){this.tooltip&&this.tooltip.destroy()}showQuestion(e,t){const s=document.createElement("div");s.className="question-container";const i=document.createElement("div");i.className="overlay";const o=document.createElement("div");o.className="question",o.textContent=e.question,s.appendChild(o),Object.entries(e.options).forEach(([n,h])=>{const r=document.createElement("div");r.className="option";const c=document.createElement("span");c.className="option-letter",c.textContent=n;const d=document.createElement("span");d.className="option-text",d.textContent=h,r.appendChild(c),r.appendChild(d),r.addEventListener("click",()=>{const p=n===e.answer;p&&(this.score+=100,this.scoreText.setText(`Score: ${this.score}`));const u=p?"checkMark":"xMark",g=this.add.image(t.x,t.y,u).setScale(1).setDepth(150);if(t.isAnswered=!0,t.setAlpha(.5),this.tweens.killTweensOf(t),t.setScale(1),t.disableInteractive(),this.answeredQuestions++,e.explanation){const l=document.createElement("div");l.className="explanation",l.textContent=e.explanation,s.appendChild(l)}setTimeout(()=>{document.body.removeChild(i),document.body.removeChild(s),g.destroy(),this.answeredQuestions===5&&(console.log("All 5 questions answered, transitioning to Space Invaders..."),setTimeout(()=>{this.scene.start("space_invaders",{nextScene:"map2gamescene1"})},3e3))},2e3)}),s.appendChild(r)}),document.body.appendChild(i),document.body.appendChild(s)}setupScore(){this.scoreText=this.add.text(16,16,"Score: "+this.score,{fontSize:"32px",fill:"#fff",backgroundColor:"#000",padding:{x:10,y:5}}).setScrollFactor(0).setDepth(200)}transitionToNextScene(){this.isTransitioning||(this.isTransitioning=!0,this.progressManager.saveProgress({lastCompletedScene:"map1gamescene4",currentMap:this.currentMap,powerUpBitmask:this.powerUpBitmask,score:this.score}),this.sceneTransition.fadeOut(()=>{this.scene.start("sort_selection",{score:this.score,powerUpBitmask:this.powerUpBitmask,currentMap:this.currentMap})}))}}class $ extends y{constructor(){super({key:"map2scene1"}),this.player=null,this.score=0,this.scoreText=null,this.currentMap=2,this.questions=null,this.icons=[],this.answeredQuestions=0,this.isTransitioning=!1,this.clickCooldown=!1,this.powerUpBitmask=0,this.progressManager=new w,this.sceneTransition=new x}init(e){this.score=e.score||0,this.powerUpBitmask=e.powerUpBitmask||0,this.currentMap=e.currentMap||2,this.progressManager.saveProgress({lastCompletedScene:"map2scene1",currentMap:this.currentMap,powerUpBitmask:this.powerUpBitmask,score:this.score})}preload(){this.load.scene("map2scene1",a("images/map2scene1.png")),this.load.json("map-config",a("data/map2/map-config.json")),this.load.json("questions",a("data/questions.json")),this.load.image("checkMark",a("images/checkmark.png")),this.load.image("xMark",a("images/xmark.png")),this.load.on("loaderror",e=>{if(console.error("Error loading file:",e.key),e.key==="checkMark"){const t=this.add.graphics();t.fillStyle(65280),t.fillCircle(0,0,20),t.generateTexture("checkMark",40,40),t.destroy()}else if(e.key==="xMark"){const t=this.add.graphics();t.lineStyle(4,16711680),t.moveTo(-10,-10),t.lineTo(10,10),t.moveTo(10,-10),t.lineTo(-10,10),t.generateTexture("xMark",40,40),t.destroy()}})}create(){this.add.rectangle(400,300,800,600,0,.8),this.sound&&this.sound.context&&(this.sound.pauseOnBlur=!1),this.setupScore(),this.powerUpText=this.add.text(16,56,this.getPowerUpText(),{fontSize:"24px",fill:"#00ff00",fontFamily:"Arial"});try{this.questions=this.cache.json.get("questions");const e=this.cache.json.get("map-config");if(!e||!e.zones)throw new Error("Invalid map config structure");const s=e.zones[0]||e.zones[0];if(!s)throw new Error("No valid zone found in config");const i=this.add.image(s.x||400,s.y||300,"map2scene1");i.setOrigin(.5),i.setScale(s.scale||1),this.loadAwsIcons(e),this.sceneTransition.fadeIn()}catch(e){console.error("Error in create:",e),this.add.text(400,300,"Error loading level. Restarting...",{fontSize:"24px",fill:"#fff",backgroundColor:"#ff0000",padding:{x:10,y:5}}).setOrigin(.5),setTimeout(()=>{this.scene.start("map2scene1")},2e3)}}getPowerUpText(){const e=[];return this.powerUpBitmask&1&&e.push("Life+"),this.powerUpBitmask&2&&e.push("Size+"),this.powerUpBitmask&4&&e.push("Speed+"),this.powerUpBitmask&8&&e.push("Fire+"),`Power-ups: ${e.join(" ")}`}loadAwsIcons(e){e.zones.forEach(t=>{t.icons.forEach(s=>{const i=this.add.image(s.x,s.y,`icon_${s.name}`).setInteractive().setScale(.5),o=this.add.rectangle(s.x,s.y,48,48,65280,0);o.setStrokeStyle(2,65280),i.box=o,this.setupIconInteraction(i,s),this.icons.push(i)})})}setupIconInteraction(e,t){e.on("pointerover",()=>{e.box.setStrokeStyle(2,16776960),e.setScale(.6)}),e.on("pointerout",()=>{e.box.setStrokeStyle(2,65280),e.setScale(.5)}),e.on("pointerdown",()=>{this.clickCooldown||this.handleIconClick(e,t)})}handleIconClick(e,t){const s=this.questions.find(i=>t.questionTypes.some(o=>i.question.toLowerCase().includes(o.toLowerCase())));s&&this.showQuestion(s,i=>{this.handleQuestionAnswered(i),i&&(e.setTint(65280),e.box.setStrokeStyle(2,65280))})}showQuestion(e,t){}setupScore(){this.scoreText=this.add.text(16,16,"Score: 0",{fontSize:"32px",fill:"#fff",backgroundColor:"#000",padding:{x:10,y:5}}).setScrollFactor(0).setDepth(200)}transitionToNextScene(){this.isTransitioning||(this.isTransitioning=!0,this.progressManager.saveProgress({lastCompletedScene:"map2scene1",currentMap:this.currentMap,powerUpBitmask:this.powerUpBitmask,score:this.score}),this.sceneTransition.fadeOut(()=>{this.scene.start("sort_selection",{score:this.score,powerUpBitmask:this.powerUpBitmask,currentMap:this.currentMap})}))}}class L extends y{constructor(){super({key:"map2scene2"}),this.player=null,this.score=0,this.scoreText=null,this.currentMap=2,this.questions=null,this.icons=[],this.answeredQuestions=0,this.isTransitioning=!1,this.clickCooldown=!1,this.powerUpBitmask=0,this.progressManager=new w,this.sceneTransition=new x}init(e){this.score=e.score||0,this.powerUpBitmask=e.powerUpBitmask||0,this.currentMap=e.currentMap||2,this.progressManager.saveProgress({lastCompletedScene:"map2gamescene2",currentMap:this.currentMap,powerUpBitmask:this.powerUpBitmask,score:this.score})}preload(){this.load.scene("map2gamescene2",a("images/map2gamescene2.png")),this.load.json("map-config2",a("data/map2/map-config2.json")),this.load.json("questions",a("data/questions.json")),this.load.image("checkMark",a("images/checkmark.png")),this.load.image("xMark",a("images/xmark.png")),this.load.on("loaderror",e=>{if(console.error("Error loading file:",e.key),e.key==="checkMark"){const t=this.add.graphics();t.fillStyle(65280),t.fillCircle(0,0,20),t.generateTexture("checkMark",40,40),t.destroy()}else if(e.key==="xMark"){const t=this.add.graphics();t.lineStyle(4,16711680),t.moveTo(-10,-10),t.lineTo(10,10),t.moveTo(10,-10),t.lineTo(-10,10),t.generateTexture("xMark",40,40),t.destroy()}})}create(){this.add.rectangle(400,300,800,600,0,.8),this.sound&&this.sound.context&&(this.sound.pauseOnBlur=!1),this.setupScore(),this.powerUpText=this.add.text(16,56,this.getPowerUpText(),{fontSize:"24px",fill:"#00ff00",fontFamily:"Arial"});try{this.questions=this.cache.json.get("questions");const e=this.cache.json.get("map-config2");if(!e||!e.zones)throw new Error("Invalid map config structure");const s=e.zones[1]||e.zones[0];if(!s)throw new Error("No valid zone found in config");const i=this.add.image(s.x||400,s.y||300,"map2gamescene2");i.setOrigin(.5),i.setScale(s.scale||1),this.loadAwsIcons(e),this.sceneTransition.fadeIn()}catch(e){console.error("Error in create:",e),this.add.text(400,300,"Error loading level. Restarting...",{fontSize:"24px",fill:"#fff",backgroundColor:"#ff0000",padding:{x:10,y:5}}).setOrigin(.5),setTimeout(()=>{this.scene.start("map2gamescene2")},2e3)}}getPowerUpText(){const e=[];return this.powerUpBitmask&1&&e.push("Life+"),this.powerUpBitmask&2&&e.push("Size+"),this.powerUpBitmask&4&&e.push("Speed+"),this.powerUpBitmask&8&&e.push("Fire+"),`Power-ups: ${e.join(" ")}`}loadAwsIcons(e){e.zones.forEach(t=>{t.icons.forEach(s=>{const i=a(`images/services16/${s.category}/48/${s.name}`);this.load.image(`icon_${s.name}`,i)})}),this.load.once("complete",()=>{e.zones.forEach(t=>{t.icons.forEach(s=>{const i=`icon_${s.name}`,o=this.add.image(s.x,s.y,i).setInteractive().setScale(.5),n=this.add.rectangle(s.x,s.y,48,48,65280,0);n.setStrokeStyle(2,65280),o.box=n,this.setupIconInteraction(o,s),this.icons.push(o)})})}),this.load.start()}setupIconInteraction(e,t){e.setTint(16777215),e.isAnswered=!1,e.on("pointerover",()=>{e.isAnswered||(e.setScale(1.3),e.setTint(65280),this.showTooltip(t.name,e.x,e.y))}),e.on("pointerout",()=>{e.isAnswered||(e.setScale(1.3),e.setTint(16777215),this.hideTooltip())}),this.tweens.add({targets:e,scale:{from:1,to:1.4},duration:1e3,yoyo:!0,repeat:-1,ease:"Sine.easeInOut"}),e.on("pointerdown",()=>{if(e.isAnswered)return;let s,i=this.questions.filter(o=>t.questionTypes.some(n=>o.question.toLowerCase().includes(n.toLowerCase())));i.length===0&&(i=this.questions),s=f.Utils.Array.GetRandom(i),this.showQuestion(s,e)})}showTooltip(e,t,s){this.tooltip=this.add.text(t,s-60,e,{fontSize:"16px",fill:"#fff",backgroundColor:"#000",padding:{x:5,y:3}}).setOrigin(1).setDepth(150)}hideTooltip(){this.tooltip&&this.tooltip.destroy()}showQuestion(e,t){const s=document.createElement("div");s.className="question-container";const i=document.createElement("div");i.className="overlay";const o=document.createElement("div");o.className="question",o.textContent=e.question,s.appendChild(o),Object.entries(e.options).forEach(([n,h])=>{const r=document.createElement("div");r.className="option";const c=document.createElement("span");c.className="option-letter",c.textContent=n;const d=document.createElement("span");d.className="option-text",d.textContent=h,r.appendChild(c),r.appendChild(d),r.addEventListener("click",()=>{const p=n===e.answer;p&&(this.score+=100,this.scoreText.setText(`Score: ${this.score}`));const u=p?"checkMark":"xMark",g=this.add.image(t.x,t.y,u).setScale(1).setDepth(150);if(t.isAnswered=!0,t.setAlpha(.5),this.tweens.killTweensOf(t),t.setScale(1),t.disableInteractive(),this.answeredQuestions++,e.explanation){const l=document.createElement("div");l.className="explanation",l.textContent=e.explanation,s.appendChild(l)}setTimeout(()=>{document.body.removeChild(i),document.body.removeChild(s),g.destroy(),this.answeredQuestions===5&&(console.log("All 5 questions answered, transitioning to Space Invaders..."),setTimeout(()=>{this.scene.start("space_invaders",{nextScene:"map2gamescene3"})},3e3))},2e3)}),s.appendChild(r)}),document.body.appendChild(i),document.body.appendChild(s)}setupScore(){this.scoreText=this.add.text(16,16,"Score: "+this.score,{fontSize:"32px",fill:"#fff",backgroundColor:"#000",padding:{x:10,y:5}}).setScrollFactor(0).setDepth(200)}transitionToNextScene(){this.isTransitioning||(this.isTransitioning=!0,this.progressManager.saveProgress({lastCompletedScene:"map2gamescene2",currentMap:this.currentMap,powerUpBitmask:this.powerUpBitmask,score:this.score}),this.sceneTransition.fadeOut(()=>{this.scene.start("sort_selection",{score:this.score,powerUpBitmask:this.powerUpBitmask,currentMap:this.currentMap})}))}}class Q extends y{constructor(){super({key:"map2scene3"}),this.player=null,this.score=0,this.scoreText=null,this.currentMap=2,this.questions=null,this.icons=[],this.answeredQuestions=0,this.isTransitioning=!1,this.clickCooldown=!1,this.powerUpBitmask=0,this.progressManager=new w,this.sceneTransition=new x}init(e){this.score=e.score||0,this.powerUpBitmask=e.powerUpBitmask||0,this.currentMap=e.currentMap||2,this.progressManager.saveProgress({lastCompletedScene:"map2gamescene3",currentMap:this.currentMap,powerUpBitmask:this.powerUpBitmask,score:this.score})}preload(){this.load.scene("map2gamescene3",a("images/map2gamescene3.png")),this.load.json("map-config3",a("data/map2/map-config3.json")),this.load.json("questions",a("data/questions.json")),this.load.image("checkMark",a("images/checkmark.png")),this.load.image("xMark",a("images/xmark.png")),this.load.on("loaderror",e=>{if(console.error("Error loading file:",e.key),e.key==="checkMark"){const t=this.add.graphics();t.fillStyle(65280),t.fillCircle(0,0,20),t.generateTexture("checkMark",40,40),t.destroy()}else if(e.key==="xMark"){const t=this.add.graphics();t.lineStyle(4,16711680),t.moveTo(-10,-10),t.lineTo(10,10),t.moveTo(10,-10),t.lineTo(-10,10),t.generateTexture("xMark",40,40),t.destroy()}})}create(){this.add.rectangle(400,300,800,600,0,.8),this.sound&&this.sound.context&&(this.sound.pauseOnBlur=!1),this.setupScore(),this.powerUpText=this.add.text(16,56,this.getPowerUpText(),{fontSize:"24px",fill:"#00ff00",fontFamily:"Arial"});try{this.questions=this.cache.json.get("questions");const e=this.cache.json.get("map-config3");if(!e||!e.zones)throw new Error("Invalid map config structure");const s=e.zones[2]||e.zones[0];if(!s)throw new Error("No valid zone found in config");const i=this.add.image(s.x||400,s.y||300,"map2gamescene3");i.setOrigin(.5),i.setScale(s.scale||1),this.loadAwsIcons(e),this.sceneTransition.fadeIn()}catch(e){console.error("Error in create:",e),this.add.text(400,300,"Error loading level. Restarting...",{fontSize:"24px",fill:"#fff",backgroundColor:"#ff0000",padding:{x:10,y:5}}).setOrigin(.5),setTimeout(()=>{this.scene.start("map2gamescene3")},2e3)}}getPowerUpText(){const e=[];return this.powerUpBitmask&1&&e.push("Life+"),this.powerUpBitmask&2&&e.push("Size+"),this.powerUpBitmask&4&&e.push("Speed+"),this.powerUpBitmask&8&&e.push("Fire+"),`Power-ups: ${e.join(" ")}`}loadAwsIcons(e){e.zones.forEach(t=>{t.icons.forEach(s=>{const i=a(`images/services16/${s.category}/48/${s.name}`);this.load.image(`icon_${s.name}`,i)})}),this.load.once("complete",()=>{e.zones.forEach(t=>{t.icons.forEach(s=>{const i=`icon_${s.name}`,o=this.add.image(s.x,s.y,i).setInteractive().setScale(.5),n=this.add.rectangle(s.x,s.y,48,48,65280,0);n.setStrokeStyle(2,65280),o.box=n,this.setupIconInteraction(o,s),this.icons.push(o)})})}),this.load.start()}setupIconInteraction(e,t){e.setTint(16777215),e.isAnswered=!1,e.on("pointerover",()=>{e.isAnswered||(e.setScale(1.3),e.setTint(65280),this.showTooltip(t.name,e.x,e.y))}),e.on("pointerout",()=>{e.isAnswered||(e.setScale(1.3),e.setTint(16777215),this.hideTooltip())}),this.tweens.add({targets:e,scale:{from:1,to:1.4},duration:1e3,yoyo:!0,repeat:-1,ease:"Sine.easeInOut"}),e.on("pointerdown",()=>{if(e.isAnswered)return;let s,i=this.questions.filter(o=>t.questionTypes.some(n=>o.question.toLowerCase().includes(n.toLowerCase())));i.length===0&&(i=this.questions),s=f.Utils.Array.GetRandom(i),this.showQuestion(s,e)})}showTooltip(e,t,s){this.tooltip=this.add.text(t,s-60,e,{fontSize:"16px",fill:"#fff",backgroundColor:"#000",padding:{x:5,y:3}}).setOrigin(1).setDepth(150)}hideTooltip(){this.tooltip&&this.tooltip.destroy()}showQuestion(e,t){const s=document.createElement("div");s.className="question-container";const i=document.createElement("div");i.className="overlay";const o=document.createElement("div");o.className="question",o.textContent=e.question,s.appendChild(o),Object.entries(e.options).forEach(([n,h])=>{const r=document.createElement("div");r.className="option";const c=document.createElement("span");c.className="option-letter",c.textContent=n;const d=document.createElement("span");d.className="option-text",d.textContent=h,r.appendChild(c),r.appendChild(d),r.addEventListener("click",()=>{const p=n===e.answer;p&&(this.score+=100,this.scoreText.setText(`Score: ${this.score}`));const u=p?"checkMark":"xMark",g=this.add.image(t.x,t.y,u).setScale(1).setDepth(150);if(t.isAnswered=!0,t.setAlpha(.5),this.tweens.killTweensOf(t),t.setScale(1),t.disableInteractive(),this.answeredQuestions++,e.explanation){const l=document.createElement("div");l.className="explanation",l.textContent=e.explanation,s.appendChild(l)}setTimeout(()=>{document.body.removeChild(i),document.body.removeChild(s),g.destroy(),this.answeredQuestions===5&&(console.log("All 5 questions answered, transitioning to Space Invaders..."),setTimeout(()=>{this.scene.start("space_invaders",{nextScene:"map2gamescene4"})},3e3))},2e3)}),s.appendChild(r)}),document.body.appendChild(i),document.body.appendChild(s)}setupScore(){this.scoreText=this.add.text(16,16,"Score: "+this.score,{fontSize:"32px",fill:"#fff",backgroundColor:"#000",padding:{x:10,y:5}}).setScrollFactor(0).setDepth(200)}transitionToNextScene(){this.isTransitioning||(this.isTransitioning=!0,this.progressManager.saveProgress({lastCompletedScene:"map2gamescene3",currentMap:this.currentMap,powerUpBitmask:this.powerUpBitmask,score:this.score}),this.sceneTransition.fadeOut(()=>{this.scene.start("sort_selection",{score:this.score,powerUpBitmask:this.powerUpBitmask,currentMap:this.currentMap})}))}}class j extends y{constructor(){super({key:"map2scene4"}),this.player=null,this.score=0,this.scoreText=null,this.currentMap=2,this.questions=null,this.icons=[],this.answeredQuestions=0,this.isTransitioning=!1,this.clickCooldown=!1,this.powerUpBitmask=0,this.progressManager=new w,this.sceneTransition=new x}init(e){this.score=e.score||0,this.powerUpBitmask=e.powerUpBitmask||0,this.currentMap=e.currentMap||2,this.progressManager.saveProgress({lastCompletedScene:"map2gamescene4",currentMap:this.currentMap,powerUpBitmask:this.powerUpBitmask,score:this.score})}preload(){this.load.scene("map2gamescene4",a("images/map2gamescene4.png")),this.load.json("map-config4",a("data/map2/map-config4.json")),this.load.json("questions",a("data/questions.json")),this.load.image("checkMark",a("images/checkmark.png")),this.load.image("xMark",a("images/xmark.png")),this.load.on("loaderror",e=>{if(console.error("Error loading file:",e.key),e.key==="checkMark"){const t=this.add.graphics();t.fillStyle(65280),t.fillCircle(0,0,20),t.generateTexture("checkMark",40,40),t.destroy()}else if(e.key==="xMark"){const t=this.add.graphics();t.lineStyle(4,16711680),t.moveTo(-10,-10),t.lineTo(10,10),t.moveTo(10,-10),t.lineTo(-10,10),t.generateTexture("xMark",40,40),t.destroy()}})}create(){this.add.rectangle(400,300,800,600,0,.8),this.sound&&this.sound.context&&(this.sound.pauseOnBlur=!1),this.setupScore(),this.powerUpText=this.add.text(16,56,this.getPowerUpText(),{fontSize:"24px",fill:"#00ff00",fontFamily:"Arial"});try{this.questions=this.cache.json.get("questions");const e=this.cache.json.get("map-config4");if(!e||!e.zones)throw new Error("Invalid map config structure");const s=e.zones[3]||e.zones[0];if(!s)throw new Error("No valid zone found in config");const i=this.add.image(s.x||400,s.y||300,"map2gamescene4");i.setOrigin(.5),i.setScale(s.scale||1),this.loadAwsIcons(e),this.sceneTransition.fadeIn()}catch(e){console.error("Error in create:",e),this.add.text(400,300,"Error loading level. Restarting...",{fontSize:"24px",fill:"#fff",backgroundColor:"#ff0000",padding:{x:10,y:5}}).setOrigin(.5),setTimeout(()=>{this.scene.start("map2gamescene4")},2e3)}}getPowerUpText(){const e=[];return this.powerUpBitmask&1&&e.push("Life+"),this.powerUpBitmask&2&&e.push("Size+"),this.powerUpBitmask&4&&e.push("Speed+"),this.powerUpBitmask&8&&e.push("Fire+"),`Power-ups: ${e.join(" ")}`}loadAwsIcons(e){e.zones.forEach(t=>{t.icons.forEach(s=>{const i=a(`images/services16/${s.category}/48/${s.name}`);this.load.image(`icon_${s.name}`,i)})}),this.load.once("complete",()=>{e.zones.forEach(t=>{t.icons.forEach(s=>{const i=`icon_${s.name}`,o=this.add.image(s.x,s.y,i).setInteractive().setScale(.5),n=this.add.rectangle(s.x,s.y,48,48,65280,0);n.setStrokeStyle(2,65280),o.box=n,this.setupIconInteraction(o,s),this.icons.push(o)})})}),this.load.start()}setupIconInteraction(e,t){e.setTint(16777215),e.isAnswered=!1,e.on("pointerover",()=>{e.isAnswered||(e.setScale(1.3),e.setTint(65280),this.showTooltip(t.name,e.x,e.y))}),e.on("pointerout",()=>{e.isAnswered||(e.setScale(1.3),e.setTint(16777215),this.hideTooltip())}),this.tweens.add({targets:e,scale:{from:1,to:1.4},duration:1e3,yoyo:!0,repeat:-1,ease:"Sine.easeInOut"}),e.on("pointerdown",()=>{if(e.isAnswered)return;let s,i=this.questions.filter(o=>t.questionTypes.some(n=>o.question.toLowerCase().includes(n.toLowerCase())));i.length===0&&(i=this.questions),s=f.Utils.Array.GetRandom(i),this.showQuestion(s,e)})}showTooltip(e,t,s){this.tooltip=this.add.text(t,s-60,e,{fontSize:"16px",fill:"#fff",backgroundColor:"#000",padding:{x:5,y:3}}).setOrigin(1).setDepth(150)}hideTooltip(){this.tooltip&&this.tooltip.destroy()}showQuestion(e,t){const s=document.createElement("div");s.className="question-container";const i=document.createElement("div");i.className="overlay";const o=document.createElement("div");o.className="question",o.textContent=e.question,s.appendChild(o),Object.entries(e.options).forEach(([n,h])=>{const r=document.createElement("div");r.className="option";const c=document.createElement("span");c.className="option-letter",c.textContent=n;const d=document.createElement("span");d.className="option-text",d.textContent=h,r.appendChild(c),r.appendChild(d),r.addEventListener("click",()=>{const p=n===e.answer;p&&(this.score+=100,this.scoreText.setText(`Score: ${this.score}`));const u=p?"checkMark":"xMark",g=this.add.image(t.x,t.y,u).setScale(1).setDepth(150);if(t.isAnswered=!0,t.setAlpha(.5),this.tweens.killTweensOf(t),t.setScale(1),t.disableInteractive(),this.answeredQuestions++,e.explanation){const l=document.createElement("div");l.className="explanation",l.textContent=e.explanation,s.appendChild(l)}setTimeout(()=>{document.body.removeChild(i),document.body.removeChild(s),g.destroy(),this.answeredQuestions===5&&(console.log("All 5 questions answered, transitioning to Space Invaders..."),setTimeout(()=>{this.scene.start("space_invaders",{nextScene:"map3gamescene1"})},3e3))},2e3)}),s.appendChild(r)}),document.body.appendChild(i),document.body.appendChild(s)}setupScore(){this.scoreText=this.add.text(16,16,"Score: "+this.score,{fontSize:"32px",fill:"#fff",backgroundColor:"#000",padding:{x:10,y:5}}).setScrollFactor(0).setDepth(200)}transitionToNextScene(){this.isTransitioning||(this.isTransitioning=!0,this.progressManager.saveProgress({lastCompletedScene:"map2gamescene4",currentMap:this.currentMap,powerUpBitmask:this.powerUpBitmask,score:this.score}),this.sceneTransition.fadeOut(()=>{this.scene.start("sort_selection",{score:this.score,powerUpBitmask:this.powerUpBitmask,currentMap:this.currentMap})}))}}class D extends y{constructor(){super({key:"map3scene1"}),this.player=null,this.score=0,this.scoreText=null,this.currentMap=3,this.questions=null,this.icons=[],this.answeredQuestions=0,this.isTransitioning=!1,this.clickCooldown=!1,this.powerUpBitmask=0,this.progressManager=new w,this.sceneTransition=new x}init(e){this.score=(e==null?void 0:e.score)||0,this.powerUpBitmask=(e==null?void 0:e.powerUpBitmask)||0,this.currentMap=(e==null?void 0:e.currentMap)||3,this.isTransitioning=!1,this.progressManager.saveProgress({lastCompletedScene:"map3scene1",currentMap:this.currentMap,powerUpBitmask:this.powerUpBitmask,score:this.score}),this.cameras.main.fadeIn(500)}preload(){this.load.scene("map3gamescene1",a("images/map3gamescene1.png")),this.load.json("map-config",a("data/map3/map-config.json")),this.load.json("questions",a("data/questions.json")),this.load.image("checkMark",a("images/checkmark.png")),this.load.image("xMark",a("images/xmark.png")),this.load.on("loaderror",e=>{if(console.error("Error loading file:",e.key),e.key==="checkMark"){const t=this.add.graphics();t.fillStyle(65280),t.fillCircle(0,0,20),t.generateTexture("checkMark",40,40),t.destroy()}else if(e.key==="xMark"){const t=this.add.graphics();t.lineStyle(4,16711680),t.moveTo(-10,-10),t.lineTo(10,10),t.moveTo(10,-10),t.lineTo(-10,10),t.generateTexture("xMark",40,40),t.destroy()}})}create(){this.add.rectangle(400,300,800,600,0,.8),this.sound&&this.sound.context&&(this.sound.pauseOnBlur=!1),this.setupScore(),this.powerUpText=this.add.text(16,56,this.getPowerUpText(),{fontSize:"24px",fill:"#00ff00",fontFamily:"Arial"});try{this.questions=this.cache.json.get("questions");const e=this.cache.json.get("map-config");if(!e||!e.zones)throw new Error("Invalid map config structure");const s=e.zones[0]||e.zones[0];if(!s)throw new Error("No valid zone found in config");const i=this.add.image(s.x||400,s.y||300,"map3gamescene1");i.setOrigin(.5),i.setScale(s.scale||1),this.loadAwsIcons(e),this.sceneTransition.fadeIn()}catch(e){console.error("Error in create:",e),this.add.text(400,300,"Error loading level. Restarting...",{fontSize:"24px",fill:"#fff",backgroundColor:"#ff0000",padding:{x:10,y:5}}).setOrigin(.5),setTimeout(()=>{this.scene.start("map3gamescene1")},2e3)}}getPowerUpText(){const e=[];return this.powerUpBitmask&1&&e.push("Life+"),this.powerUpBitmask&2&&e.push("Size+"),this.powerUpBitmask&4&&e.push("Speed+"),this.powerUpBitmask&8&&e.push("Fire+"),`Power-ups: ${e.join(" ")}`}loadAwsIcons(e){e.zones.forEach(t=>{t.icons.forEach(s=>{const i=this.questions.find(o=>s.questionTypes.some(n=>o.question.toLowerCase().includes(n.toLowerCase())));if(i&&i.image)this.load.image(`icon_${s.name}`,a(i.image));else{const o=`images/services16/${s.category}/48/${s.name}`;this.load.image(`icon_${s.name}`,a(o))}})}),this.load.once("complete",()=>{e.zones.forEach(t=>{t.icons.forEach(s=>{const i=this.add.image(s.x,s.y,`icon_${s.name}`).setInteractive().setScale(.5),o=this.add.rectangle(s.x,s.y,48,48,65280,0);o.setStrokeStyle(2,65280),i.box=o,this.setupIconInteraction(i,s),this.icons.push(i)})})}),this.load.start()}setupIconInteraction(e,t){e.setTint(16777215),e.isAnswered=!1,e.on("pointerover",()=>{e.isAnswered||(e.setScale(1.3),e.setTint(65280),this.showTooltip(t.name,e.x,e.y))}),e.on("pointerout",()=>{e.isAnswered||(e.setScale(1.3),e.setTint(16777215),this.hideTooltip())}),this.tweens.add({targets:e,scale:{from:1,to:1.4},duration:1e3,yoyo:!0,repeat:-1,ease:"Sine.easeInOut"}),e.on("pointerdown",()=>{if(e.isAnswered)return;let s,i=this.questions.filter(o=>t.questionTypes.some(n=>o.question.toLowerCase().includes(n.toLowerCase())));i.length===0&&(i=this.questions),s=f.Utils.Array.GetRandom(i),this.showQuestion(s,e)})}showTooltip(e,t,s){this.tooltip=this.add.text(t,s-60,e,{fontSize:"16px",fill:"#fff",backgroundColor:"#000",padding:{x:5,y:3}}).setOrigin(1).setDepth(150)}hideTooltip(){this.tooltip&&this.tooltip.destroy()}showQuestion(e,t){const s=document.createElement("div");s.className="question-container";const i=document.createElement("div");i.className="overlay";const o=document.createElement("div");o.className="question",o.textContent=e.question,s.appendChild(o),Object.entries(e.options).forEach(([n,h])=>{const r=document.createElement("div");r.className="option";const c=document.createElement("span");c.className="option-letter",c.textContent=n;const d=document.createElement("span");d.className="option-text",d.textContent=h,r.appendChild(c),r.appendChild(d),r.addEventListener("click",()=>{const p=n===e.answer;p&&(this.score+=100,this.scoreText.setText(`Score: ${this.score}`));const u=p?"checkMark":"xMark",g=this.add.image(t.x,t.y,u).setScale(1).setDepth(150);if(t.isAnswered=!0,t.setAlpha(.5),this.tweens.killTweensOf(t),t.setScale(1),t.disableInteractive(),this.answeredQuestions++,e.explanation){const l=document.createElement("div");l.className="explanation",l.textContent=e.explanation,s.appendChild(l)}setTimeout(()=>{document.body.removeChild(i),document.body.removeChild(s),g.destroy(),this.answeredQuestions===5&&(console.log("All 5 questions answered, transitioning to Space Invaders..."),setTimeout(()=>{this.scene.start("space_invaders",{nextScene:"map3gamescene2"})},3e3))},2e3)}),s.appendChild(r)}),document.body.appendChild(i),document.body.appendChild(s)}setupScore(){this.scoreText=this.add.text(16,16,"Score: 0",{fontSize:"32px",fill:"#fff",backgroundColor:"#000",padding:{x:10,y:5}}).setScrollFactor(0).setDepth(200)}transitionToNextScene(){this.isTransitioning||(this.isTransitioning=!0,this.progressManager.saveProgress({lastCompletedScene:"map3scene1",currentMap:this.currentMap,powerUpBitmask:this.powerUpBitmask,score:this.score}),this.sceneTransition.fadeOut(()=>{this.scene.start("sort_selection",{score:this.score,powerUpBitmask:this.powerUpBitmask,currentMap:this.currentMap})}))}}class _ extends y{constructor(){super({key:"map3scene2"}),this.player=null,this.score=0,this.scoreText=null,this.currentMap=3,this.questions=null,this.icons=[],this.answeredQuestions=0,this.isTransitioning=!1,this.clickCooldown=!1,this.powerUpBitmask=0,this.progressManager=new w,this.sceneTransition=new x}init(e){this.score=(e==null?void 0:e.score)||0,this.powerUpBitmask=(e==null?void 0:e.powerUpBitmask)||0,this.currentMap=(e==null?void 0:e.currentMap)||3,this.isTransitioning=!1,this.progressManager.saveProgress({lastCompletedScene:"map3scene2",currentMap:this.currentMap,powerUpBitmask:this.powerUpBitmask,score:this.score}),this.cameras.main.fadeIn(500)}preload(){this.load.scene("map3gamescene2",a("images/map3gamescene2.png")),this.load.json("map-config2",a("data/map3/map-config2.json")),this.load.json("questions",a("data/questions.json")),this.load.image("checkMark",a("images/checkmark.png")),this.load.image("xMark",a("images/xmark.png")),this.load.on("loaderror",e=>{if(console.error("Error loading file:",e.key),e.key==="checkMark"){const t=this.add.graphics();t.fillStyle(65280),t.fillCircle(0,0,20),t.generateTexture("checkMark",40,40),t.destroy()}else if(e.key==="xMark"){const t=this.add.graphics();t.lineStyle(4,16711680),t.moveTo(-10,-10),t.lineTo(10,10),t.moveTo(10,-10),t.lineTo(-10,10),t.generateTexture("xMark",40,40),t.destroy()}})}create(){this.add.rectangle(400,300,800,600,0,.8),this.sound&&this.sound.context&&(this.sound.pauseOnBlur=!1),this.setupScore(),this.powerUpText=this.add.text(16,56,this.getPowerUpText(),{fontSize:"24px",fill:"#00ff00",fontFamily:"Arial"});try{this.questions=this.cache.json.get("questions");const e=this.cache.json.get("map-config2");if(!e||!e.zones)throw new Error("Invalid map config structure");const s=e.zones[1]||e.zones[0];if(!s)throw new Error("No valid zone found in config");const i=this.add.image(s.x||400,s.y||300,"map3gamescene2");i.setOrigin(.5),i.setScale(s.scale||1),this.loadAwsIcons(e),this.sceneTransition.fadeIn()}catch(e){console.error("Error in create:",e),this.add.text(400,300,"Error loading level. Restarting...",{fontSize:"24px",fill:"#fff",backgroundColor:"#ff0000",padding:{x:10,y:5}}).setOrigin(.5),setTimeout(()=>{this.scene.start("map3gamescene2")},2e3)}}getPowerUpText(){const e=[];return this.powerUpBitmask&1&&e.push("Life+"),this.powerUpBitmask&2&&e.push("Size+"),this.powerUpBitmask&4&&e.push("Speed+"),this.powerUpBitmask&8&&e.push("Fire+"),`Power-ups: ${e.join(" ")}`}loadAwsIcons(e){e.zones.forEach(t=>{t.icons.forEach(s=>{const i=a(`images/services16/${s.category}/48/${s.name}`);this.load.image(`icon_${s.name}`,i)})}),this.load.once("complete",()=>{e.zones.forEach(t=>{t.icons.forEach(s=>{const i=`icon_${s.name}`,o=this.add.image(s.x,s.y,i).setInteractive().setScale(.5),n=this.add.rectangle(s.x,s.y,48,48,65280,0);n.setStrokeStyle(2,65280),o.box=n,this.setupIconInteraction(o,s),this.icons.push(o)})})}),this.load.start()}setupIconInteraction(e,t){e.setTint(16777215),e.isAnswered=!1,e.on("pointerover",()=>{e.isAnswered||(e.setScale(1.3),e.setTint(65280),this.showTooltip(t.name,e.x,e.y))}),e.on("pointerout",()=>{e.isAnswered||(e.setScale(1.3),e.setTint(16777215),this.hideTooltip())}),this.tweens.add({targets:e,scale:{from:1,to:1.4},duration:1e3,yoyo:!0,repeat:-1,ease:"Sine.easeInOut"}),e.on("pointerdown",()=>{if(e.isAnswered)return;let s,i=this.questions.filter(o=>t.questionTypes.some(n=>o.question.toLowerCase().includes(n.toLowerCase())));i.length===0&&(i=this.questions),s=f.Utils.Array.GetRandom(i),this.showQuestion(s,e)})}showTooltip(e,t,s){this.tooltip=this.add.text(t,s-60,e,{fontSize:"16px",fill:"#fff",backgroundColor:"#000",padding:{x:5,y:3}}).setOrigin(1).setDepth(150)}hideTooltip(){this.tooltip&&this.tooltip.destroy()}showQuestion(e,t){const s=document.createElement("div");s.className="question-container";const i=document.createElement("div");i.className="overlay";const o=document.createElement("div");o.className="question",o.textContent=e.question,s.appendChild(o),Object.entries(e.options).forEach(([n,h])=>{const r=document.createElement("div");r.className="option";const c=document.createElement("span");c.className="option-letter",c.textContent=n;const d=document.createElement("span");d.className="option-text",d.textContent=h,r.appendChild(c),r.appendChild(d),r.addEventListener("click",()=>{const p=n===e.answer;p&&(this.score+=100,this.scoreText.setText(`Score: ${this.score}`));const u=p?"checkMark":"xMark",g=this.add.image(t.x,t.y,u).setScale(1).setDepth(150);if(t.isAnswered=!0,t.setAlpha(.5),this.tweens.killTweensOf(t),t.setScale(1),t.disableInteractive(),this.answeredQuestions++,e.explanation){const l=document.createElement("div");l.className="explanation",l.textContent=e.explanation,s.appendChild(l)}setTimeout(()=>{document.body.removeChild(i),document.body.removeChild(s),g.destroy(),this.answeredQuestions===5&&(console.log("All 5 questions answered, transitioning to Space Invaders..."),setTimeout(()=>{this.scene.start("space_invaders",{nextScene:"map3gamescene3"})},3e3))},2e3)}),s.appendChild(r)}),document.body.appendChild(i),document.body.appendChild(s)}setupScore(){this.scoreText=this.add.text(16,16,"Score: "+this.score,{fontSize:"32px",fill:"#fff",backgroundColor:"#000",padding:{x:10,y:5}}).setScrollFactor(0).setDepth(200)}transitionToNextScene(){this.isTransitioning||(this.isTransitioning=!0,this.progressManager.saveProgress({lastCompletedScene:"map3scene2",currentMap:this.currentMap,powerUpBitmask:this.powerUpBitmask,score:this.score}),this.sceneTransition.fadeOut(()=>{this.scene.start("sort_selection",{score:this.score,powerUpBitmask:this.powerUpBitmask,currentMap:this.currentMap})}))}}class F extends y{constructor(){super({key:"map3scene3"}),this.player=null,this.score=0,this.scoreText=null,this.currentMap=3,this.questions=null,this.icons=[],this.answeredQuestions=0,this.isTransitioning=!1,this.clickCooldown=!1,this.powerUpBitmask=0,this.progressManager=new w,this.sceneTransition=new x}init(e){this.score=(e==null?void 0:e.score)||0,this.powerUpBitmask=(e==null?void 0:e.powerUpBitmask)||0,this.currentMap=(e==null?void 0:e.currentMap)||3,this.isTransitioning=!1,this.progressManager.saveProgress({lastCompletedScene:"map3scene3",currentMap:this.currentMap,powerUpBitmask:this.powerUpBitmask,score:this.score}),this.cameras.main.fadeIn(500)}preload(){this.load.scene("map3gamescene3",a("images/map3gamescene3.png")),this.load.json("map-config3",a("data/map3/map-config3.json")),this.load.json("questions",a("data/questions.json")),this.load.image("checkMark",a("images/checkmark.png")),this.load.image("xMark",a("images/xmark.png")),this.load.on("loaderror",e=>{if(console.error("Error loading file:",e.key),e.key==="checkMark"){const t=this.add.graphics();t.fillStyle(65280),t.fillCircle(0,0,20),t.generateTexture("checkMark",40,40),t.destroy()}else if(e.key==="xMark"){const t=this.add.graphics();t.lineStyle(4,16711680),t.moveTo(-10,-10),t.lineTo(10,10),t.moveTo(10,-10),t.lineTo(-10,10),t.generateTexture("xMark",40,40),t.destroy()}})}create(){this.add.rectangle(400,300,800,600,0,.8),this.sound&&this.sound.context&&(this.sound.pauseOnBlur=!1),this.setupScore(),this.powerUpText=this.add.text(16,56,this.getPowerUpText(),{fontSize:"24px",fill:"#00ff00",fontFamily:"Arial"});try{this.questions=this.cache.json.get("questions");const e=this.cache.json.get("map-config3");if(!e||!e.zones)throw new Error("Invalid map config structure");const s=e.zones[2]||e.zones[0];if(!s)throw new Error("No valid zone found in config");const i=this.add.image(s.x||400,s.y||300,"map3gamescene3");i.setOrigin(.5),i.setScale(s.scale||1),this.loadAwsIcons(e),this.sceneTransition.fadeIn()}catch(e){console.error("Error in create:",e),this.add.text(400,300,"Error loading level. Restarting...",{fontSize:"24px",fill:"#fff",backgroundColor:"#ff0000",padding:{x:10,y:5}}).setOrigin(.5),setTimeout(()=>{this.scene.start("map3gamescene3")},2e3)}}getPowerUpText(){const e=[];return this.powerUpBitmask&1&&e.push("Life+"),this.powerUpBitmask&2&&e.push("Size+"),this.powerUpBitmask&4&&e.push("Speed+"),this.powerUpBitmask&8&&e.push("Fire+"),`Power-ups: ${e.join(" ")}`}loadAwsIcons(e){e.zones.forEach(t=>{t.icons.forEach(s=>{const i=a(`images/services16/${s.category}/48/${s.name}`);this.load.image(`icon_${s.name}`,i)})}),this.load.once("complete",()=>{e.zones.forEach(t=>{t.icons.forEach(s=>{const i=`icon_${s.name}`,o=this.add.image(s.x,s.y,i).setInteractive().setScale(.5),n=this.add.rectangle(s.x,s.y,48,48,65280,0);n.setStrokeStyle(2,65280),o.box=n,this.setupIconInteraction(o,s),this.icons.push(o)})})}),this.load.start()}setupIconInteraction(e,t){e.setTint(16777215),e.isAnswered=!1,e.on("pointerover",()=>{e.isAnswered||(e.setScale(1.3),e.setTint(65280),this.showTooltip(t.name,e.x,e.y))}),e.on("pointerout",()=>{e.isAnswered||(e.setScale(1.3),e.setTint(16777215),this.hideTooltip())}),this.tweens.add({targets:e,scale:{from:1,to:1.4},duration:1e3,yoyo:!0,repeat:-1,ease:"Sine.easeInOut"}),e.on("pointerdown",()=>{if(e.isAnswered)return;let s,i=this.questions.filter(o=>t.questionTypes.some(n=>o.question.toLowerCase().includes(n.toLowerCase())));i.length===0&&(i=this.questions),s=f.Utils.Array.GetRandom(i),this.showQuestion(s,e)})}showTooltip(e,t,s){this.tooltip=this.add.text(t,s-60,e,{fontSize:"16px",fill:"#fff",backgroundColor:"#000",padding:{x:5,y:3}}).setOrigin(1).setDepth(150)}hideTooltip(){this.tooltip&&this.tooltip.destroy()}showQuestion(e,t){const s=document.createElement("div");s.className="question-container";const i=document.createElement("div");i.className="overlay";const o=document.createElement("div");o.className="question",o.textContent=e.question,s.appendChild(o),Object.entries(e.options).forEach(([n,h])=>{const r=document.createElement("div");r.className="option";const c=document.createElement("span");c.className="option-letter",c.textContent=n;const d=document.createElement("span");d.className="option-text",d.textContent=h,r.appendChild(c),r.appendChild(d),r.addEventListener("click",()=>{const p=n===e.answer;p&&(this.score+=100,this.scoreText.setText(`Score: ${this.score}`));const u=p?"checkMark":"xMark",g=this.add.image(t.x,t.y,u).setScale(1).setDepth(150);if(t.isAnswered=!0,t.setAlpha(.5),this.tweens.killTweensOf(t),t.setScale(1),t.disableInteractive(),this.answeredQuestions++,e.explanation){const l=document.createElement("div");l.className="explanation",l.textContent=e.explanation,s.appendChild(l)}setTimeout(()=>{document.body.removeChild(i),document.body.removeChild(s),g.destroy(),this.answeredQuestions===5&&(console.log("All 5 questions answered, transitioning to Space Invaders..."),setTimeout(()=>{this.scene.start("space_invaders",{nextScene:"map3gamescene4"})},3e3))},2e3)}),s.appendChild(r)}),document.body.appendChild(i),document.body.appendChild(s)}setupScore(){this.scoreText=this.add.text(16,16,"Score: "+this.score,{fontSize:"32px",fill:"#fff",backgroundColor:"#000",padding:{x:10,y:5}}).setScrollFactor(0).setDepth(200)}transitionToNextScene(){this.isTransitioning||(this.isTransitioning=!0,this.progressManager.saveProgress({lastCompletedScene:"map3scene3",currentMap:this.currentMap,powerUpBitmask:this.powerUpBitmask,score:this.score}),this.sceneTransition.fadeOut(()=>{this.scene.start("sort_selection",{score:this.score,powerUpBitmask:this.powerUpBitmask,currentMap:this.currentMap})}))}}class R extends y{constructor(){super({key:"map3scene4"}),this.player=null,this.score=0,this.scoreText=null,this.currentMap=3,this.questions=null,this.icons=[],this.answeredQuestions=0,this.isTransitioning=!1,this.clickCooldown=!1,this.powerUpBitmask=0,this.progressManager=new w,this.sceneTransition=new x}init(e){this.score=(e==null?void 0:e.score)||0,this.powerUpBitmask=(e==null?void 0:e.powerUpBitmask)||0,this.currentMap=(e==null?void 0:e.currentMap)||3,this.isTransitioning=!1,this.progressManager.saveProgress({lastCompletedScene:"map3scene4",currentMap:this.currentMap,powerUpBitmask:this.powerUpBitmask,score:this.score}),this.cameras.main.fadeIn(500)}preload(){this.load.scene("map3gamescene4",a("images/map3gamescene4.png")),this.load.json("map-config4",a("data/map3/map-config4.json")),this.load.json("questions",a("data/questions.json")),this.load.image("checkMark",a("images/checkmark.png")),this.load.image("xMark",a("images/xmark.png")),this.load.on("loaderror",e=>{if(console.error("Error loading file:",e.key),e.key==="checkMark"){const t=this.add.graphics();t.fillStyle(65280),t.fillCircle(0,0,20),t.generateTexture("checkMark",40,40),t.destroy()}else if(e.key==="xMark"){const t=this.add.graphics();t.lineStyle(4,16711680),t.moveTo(-10,-10),t.lineTo(10,10),t.moveTo(10,-10),t.lineTo(-10,10),t.generateTexture("xMark",40,40),t.destroy()}})}create(){this.add.rectangle(400,300,800,600,0,.8),this.sound&&this.sound.context&&(this.sound.pauseOnBlur=!1),this.setupScore(),this.powerUpText=this.add.text(16,56,this.getPowerUpText(),{fontSize:"24px",fill:"#00ff00",fontFamily:"Arial"});try{this.questions=this.cache.json.get("questions");const e=this.cache.json.get("map-config4");if(!e||!e.zones)throw new Error("Invalid map config structure");const s=e.zones[3]||e.zones[0];if(!s)throw new Error("No valid zone found in config");const i=this.add.image(s.x||400,s.y||300,"map3gamescene4");i.setOrigin(.5),i.setScale(s.scale||1),this.loadAwsIcons(e),this.sceneTransition.fadeIn()}catch(e){console.error("Error in create:",e),this.add.text(400,300,"Error loading level. Restarting...",{fontSize:"24px",fill:"#fff",backgroundColor:"#ff0000",padding:{x:10,y:5}}).setOrigin(.5),setTimeout(()=>{this.scene.start("map3gamescene4")},2e3)}}getPowerUpText(){const e=[];return this.powerUpBitmask&1&&e.push("Life+"),this.powerUpBitmask&2&&e.push("Size+"),this.powerUpBitmask&4&&e.push("Speed+"),this.powerUpBitmask&8&&e.push("Fire+"),`Power-ups: ${e.join(" ")}`}loadAwsIcons(e){e.zones.forEach(t=>{t.icons.forEach(s=>{const i=a(`images/services16/${s.category}/48/${s.name}`);this.load.image(`icon_${s.name}`,i)})}),this.load.once("complete",()=>{e.zones.forEach(t=>{t.icons.forEach(s=>{const i=`icon_${s.name}`,o=this.add.image(s.x,s.y,i).setInteractive().setScale(.5),n=this.add.rectangle(s.x,s.y,48,48,65280,0);n.setStrokeStyle(2,65280),o.box=n,this.setupIconInteraction(o,s),this.icons.push(o)})})}),this.load.start()}setupIconInteraction(e,t){e.setTint(16777215),e.isAnswered=!1,e.on("pointerover",()=>{e.isAnswered||(e.setScale(1.3),e.setTint(65280),this.showTooltip(t.name,e.x,e.y))}),e.on("pointerout",()=>{e.isAnswered||(e.setScale(1.3),e.setTint(16777215),this.hideTooltip())}),this.tweens.add({targets:e,scale:{from:1,to:1.4},duration:1e3,yoyo:!0,repeat:-1,ease:"Sine.easeInOut"}),e.on("pointerdown",()=>{if(e.isAnswered)return;let s,i=this.questions.filter(o=>t.questionTypes.some(n=>o.question.toLowerCase().includes(n.toLowerCase())));i.length===0&&(i=this.questions),s=f.Utils.Array.GetRandom(i),this.showQuestion(s,e)})}showTooltip(e,t,s){this.tooltip=this.add.text(t,s-60,e,{fontSize:"16px",fill:"#fff",backgroundColor:"#000",padding:{x:5,y:3}}).setOrigin(1).setDepth(150)}hideTooltip(){this.tooltip&&this.tooltip.destroy()}showQuestion(e,t){const s=document.createElement("div");s.className="question-container";const i=document.createElement("div");i.className="overlay";const o=document.createElement("div");o.className="question",o.textContent=e.question,s.appendChild(o),Object.entries(e.options).forEach(([n,h])=>{const r=document.createElement("div");r.className="option";const c=document.createElement("span");c.className="option-letter",c.textContent=n;const d=document.createElement("span");d.className="option-text",d.textContent=h,r.appendChild(c),r.appendChild(d),r.addEventListener("click",()=>{const p=n===e.answer;p&&(this.score+=100,this.scoreText.setText(`Score: ${this.score}`));const u=p?"checkMark":"xMark",g=this.add.image(t.x,t.y,u).setScale(1).setDepth(150);if(t.isAnswered=!0,t.setAlpha(.5),this.tweens.killTweensOf(t),t.setScale(1),t.disableInteractive(),this.answeredQuestions++,e.explanation){const l=document.createElement("div");l.className="explanation",l.textContent=e.explanation,s.appendChild(l)}setTimeout(()=>{document.body.removeChild(i),document.body.removeChild(s),g.destroy(),this.answeredQuestions===5&&(console.log("All 5 questions answered, transitioning to Space Invaders..."),setTimeout(()=>{this.scene.start("space_invaders",{nextScene:"map4gamescene1"})},3e3))},2e3)}),s.appendChild(r)}),document.body.appendChild(i),document.body.appendChild(s)}setupScore(){this.scoreText=this.add.text(16,16,"Score: "+this.score,{fontSize:"32px",fill:"#fff",backgroundColor:"#000",padding:{x:10,y:5}}).setScrollFactor(0).setDepth(200)}transitionToNextScene(){this.isTransitioning||(this.isTransitioning=!0,this.progressManager.saveProgress({lastCompletedScene:"map3scene4",currentMap:this.currentMap,powerUpBitmask:this.powerUpBitmask,score:this.score}),this.sceneTransition.fadeOut(()=>{this.scene.start("sort_selection",{score:this.score,powerUpBitmask:this.powerUpBitmask,currentMap:this.currentMap})}))}}class G extends y{constructor(){super({key:"map4scene1"}),this.player=null,this.score=0,this.scoreText=null,this.currentMap=4,this.questions=null,this.icons=[],this.answeredQuestions=0,this.isTransitioning=!1,this.clickCooldown=!1,this.powerUpBitmask=0,this.progressManager=new w,this.sceneTransition=new x}init(e){this.score=(e==null?void 0:e.score)||0,this.powerUpBitmask=(e==null?void 0:e.powerUpBitmask)||0,this.currentMap=(e==null?void 0:e.currentMap)||4,this.isTransitioning=!1,this.progressManager.saveProgress({lastCompletedScene:"map4scene1",currentMap:this.currentMap,powerUpBitmask:this.powerUpBitmask,score:this.score}),this.cameras.main.fadeIn(500)}preload(){this.load.scene("map4gamescene1",a("images/map4gamescene1.png")),this.load.json("map-config",a("data/map4/map-config.json")),this.load.json("questions",a("data/questions.json")),this.load.image("checkMark",a("images/checkmark.png")),this.load.image("xMark",a("images/xmark.png")),this.load.on("loaderror",e=>{if(console.error("Error loading file:",e.key),e.key==="checkMark"){const t=this.add.graphics();t.fillStyle(65280),t.fillCircle(0,0,20),t.generateTexture("checkMark",40,40),t.destroy()}else if(e.key==="xMark"){const t=this.add.graphics();t.lineStyle(4,16711680),t.moveTo(-10,-10),t.lineTo(10,10),t.moveTo(10,-10),t.lineTo(-10,10),t.generateTexture("xMark",40,40),t.destroy()}})}create(){this.sound&&this.sound.context&&(this.sound.pauseOnBlur=!1);try{this.questions=this.cache.json.get("questions");const e=this.cache.json.get("map-config");if(!e||!e.zones)throw new Error("Invalid map config structure");const s=e.zones[0]||e.zones[0];if(!s)throw new Error("No valid zone found in config");const i=this.add.image(s.x||400,s.y||300,"map4gamescene1");i.setOrigin(.5),i.setScale(s.scale||1),this.loadAwsIcons(e),this.setupScore(),this.progressManager.saveProgress({lastCompletedScene:"map4scene1",currentMap:this.currentMap})}catch(e){console.error("Error in create:",e),this.add.text(400,300,"Error loading level. Restarting...",{fontSize:"24px",fill:"#fff",backgroundColor:"#ff0000",padding:{x:10,y:5}}).setOrigin(.5),setTimeout(()=>{this.scene.start("map4scene1")},2e3)}}loadAwsIcons(e){e.zones.forEach(t=>{t.icons.forEach(s=>{const i=this.questions.find(o=>s.questionTypes.some(n=>o.question.toLowerCase().includes(n.toLowerCase())));if(i&&i.image)console.log("Loading icon from question:",i.image),this.load.image(`icon_${s.name}`,a(i.image));else{const o=`images/services16/${s.category}/48/${s.name}`;console.log("Loading icon with constructed path:",o),this.load.image(`icon_${s.name}`,a(o))}})}),this.load.once("complete",()=>{e.zones.forEach(t=>{t.icons.forEach(s=>{const i=this.add.image(s.x,s.y,`icon_${s.name}`).setInteractive().setScale(.5);console.log("Creating icon sprite:",s.name),this.setupIconInteraction(i,s),this.icons.push(i)})})}),this.load.start()}setupIconInteraction(e,t){e.setTint(16777215),e.isAnswered=!1,e.on("pointerover",()=>{e.isAnswered||(e.setScale(1.3),e.setTint(65280),this.showTooltip(t.name,e.x,e.y))}),e.on("pointerout",()=>{e.isAnswered||(e.setScale(1.3),e.setTint(16777215),this.hideTooltip())}),this.tweens.add({targets:e,scale:{from:1,to:1.4},duration:1e3,yoyo:!0,repeat:-1,ease:"Sine.easeInOut"}),e.on("pointerdown",()=>{if(e.isAnswered)return;let s,i=this.questions.filter(o=>t.questionTypes.some(n=>o.question.toLowerCase().includes(n.toLowerCase())));i.length===0&&(i=this.questions),s=f.Utils.Array.GetRandom(i),this.showQuestion(s,e)})}showTooltip(e,t,s){this.tooltip=this.add.text(t,s-60,e,{fontSize:"16px",fill:"#fff",backgroundColor:"#000",padding:{x:5,y:3}}).setOrigin(1).setDepth(150)}hideTooltip(){this.tooltip&&this.tooltip.destroy()}showQuestion(e,t){const s=document.createElement("div");s.className="question-container";const i=document.createElement("div");i.className="overlay";const o=document.createElement("div");o.className="question",o.textContent=e.question,s.appendChild(o),Object.entries(e.options).forEach(([n,h])=>{const r=document.createElement("div");r.className="option";const c=document.createElement("span");c.className="option-letter",c.textContent=n;const d=document.createElement("span");d.className="option-text",d.textContent=h,r.appendChild(c),r.appendChild(d),r.addEventListener("click",()=>{const p=n===e.answer;p&&(this.score+=100,this.scoreText.setText(`Score: ${this.score}`));const u=p?"checkMark":"xMark",g=this.add.image(t.x,t.y,u).setScale(1).setDepth(150);if(t.isAnswered=!0,t.setAlpha(.5),this.tweens.killTweensOf(t),t.setScale(1),t.disableInteractive(),this.answeredQuestions++,e.explanation){const l=document.createElement("div");l.className="explanation",l.textContent=e.explanation,s.appendChild(l)}setTimeout(()=>{document.body.removeChild(i),document.body.removeChild(s),g.destroy(),this.answeredQuestions===5&&(console.log("All 5 questions answered, transitioning to Space Invaders..."),setTimeout(()=>{this.scene.start("space_invaders",{nextScene:"map4scene2"})},3e3))},2e3)}),s.appendChild(r)}),document.body.appendChild(i),document.body.appendChild(s)}setupScore(){this.scoreText=this.add.text(16,16,"Score: 0",{fontSize:"32px",fill:"#fff",backgroundColor:"#000",padding:{x:10,y:5}}).setScrollFactor(0).setDepth(200)}transitionToNextScene(){this.isTransitioning||(this.isTransitioning=!0,this.sceneTransition.to(this,"space_invaders",{nextScene:"map4scene2",score:this.score}))}}class K extends y{constructor(){super({key:"map4gamescene2"}),this.player=null,this.score=0,this.scoreText=null,this.currentMap=4,this.questions=null,this.icons=[],this.answeredQuestions=0,this.isTransitioning=!1,this.clickCooldown=!1,this.powerUpBitmask=0,this.progressManager=new w,this.sceneTransition=new x}preload(){this.load.scene("map4gamescene2",a("images/map4gamescene2.png")),this.load.json("map-config2",a("data/map4/map-config2.json")),this.load.json("questions",a("data/questions.json")),this.load.image("checkMark",a("images/checkmark.png")),this.load.image("xMark",a("images/xmark.png")),this.load.on("loaderror",e=>{if(console.error("Error loading file:",e.key),e.key==="checkMark"){const t=this.add.graphics();t.fillStyle(65280),t.fillCircle(0,0,20),t.generateTexture("checkMark",40,40),t.destroy()}else if(e.key==="xMark"){const t=this.add.graphics();t.lineStyle(4,16711680),t.moveTo(-10,-10),t.lineTo(10,10),t.moveTo(10,-10),t.lineTo(-10,10),t.generateTexture("xMark",40,40),t.destroy()}})}create(){this.sound&&this.sound.context&&(this.sound.pauseOnBlur=!1);try{this.questions=this.cache.json.get("questions");const e=this.cache.json.get("map-config2");if(console.log("MapConfig loaded:",e),!e||!e.zones)throw new Error("Invalid map config structure");const s=e.zones[1]||e.zones[0];if(!s)throw new Error("No valid zone found in config");const i=this.add.image(s.x||400,s.y||300,"map4gamescene2");i.setOrigin(.5),i.setScale(s.scale||1),this.loadAwsIcons(e),this.setupScore(),this.progressManager.saveProgress({lastCompletedScene:"map4gamescene2",currentMap:4})}catch(e){console.error("Error in create:",e),this.add.text(400,300,"Error loading level. Restarting...",{fontSize:"24px",fill:"#fff",backgroundColor:"#ff0000",padding:{x:10,y:5}}).setOrigin(.5),setTimeout(()=>{this.scene.start("map4gamescene2")},2e3)}}loadAwsIcons(e){e.zones.forEach(t=>{t.icons.forEach(s=>{const i=this.questions.find(o=>s.questionTypes.some(n=>o.question.toLowerCase().includes(n.toLowerCase())));if(i&&i.image)console.log("Loading icon from question:",i.image),this.load.image(`icon_${s.name}`,i.image);else{const o=`assets/images/services16/${s.category}/48/${s.name}`;console.log("Loading icon with constructed path:",o),this.load.image(`icon_${s.name}`,o)}})}),this.load.once("complete",()=>{e.zones.forEach(t=>{t.icons.forEach(s=>{const i=this.add.image(s.x,s.y,`icon_${s.name}`).setInteractive().setScale(.5);console.log("Creating icon sprite:",s.name),this.setupIconInteraction(i,s),this.icons.push(i)})})}),this.load.start()}setupIconInteraction(e,t){e.setTint(16777215),e.isAnswered=!1,e.on("pointerover",()=>{e.isAnswered||(e.setScale(1.3),e.setTint(65280),this.showTooltip(t.name,e.x,e.y))}),e.on("pointerout",()=>{e.isAnswered||(e.setScale(1.3),e.setTint(16777215),this.hideTooltip())}),this.tweens.add({targets:e,scale:{from:1,to:1.4},duration:1e3,yoyo:!0,repeat:-1,ease:"Sine.easeInOut"}),e.on("pointerdown",()=>{if(e.isAnswered)return;let s,i=this.questions.filter(o=>t.questionTypes.some(n=>o.question.toLowerCase().includes(n.toLowerCase())));i.length===0&&(i=this.questions),s=f.Utils.Array.GetRandom(i),this.showQuestion(s,e)})}showTooltip(e,t,s){this.tooltip=this.add.text(t,s-60,e,{fontSize:"16px",fill:"#fff",backgroundColor:"#000",padding:{x:5,y:3}}).setOrigin(1).setDepth(150)}hideTooltip(){this.tooltip&&this.tooltip.destroy()}showQuestion(e,t){const s=document.createElement("div");s.className="question-container";const i=document.createElement("div");i.className="overlay";const o=document.createElement("div");o.className="question",o.textContent=e.question,s.appendChild(o),Object.entries(e.options).forEach(([n,h])=>{const r=document.createElement("div");r.className="option";const c=document.createElement("span");c.className="option-letter",c.textContent=n;const d=document.createElement("span");d.className="option-text",d.textContent=h,r.appendChild(c),r.appendChild(d),r.addEventListener("click",()=>{const p=n===e.answer;p&&(this.score+=100,this.scoreText.setText(`Score: ${this.score}`));const u=p?"checkMark":"xMark",g=this.add.image(t.x,t.y,u).setScale(1).setDepth(150);if(t.isAnswered=!0,t.setAlpha(.5),this.tweens.killTweensOf(t),t.setScale(1),t.disableInteractive(),this.answeredQuestions++,e.explanation){const l=document.createElement("div");l.className="explanation",l.textContent=e.explanation,s.appendChild(l)}setTimeout(()=>{document.body.removeChild(i),document.body.removeChild(s),g.destroy(),this.answeredQuestions===5&&(console.log("All 5 questions answered, transitioning to Space Invaders..."),setTimeout(()=>{this.scene.start("space_invaders",{nextScene:"map4gamescene3"})},3e3))},2e3)}),s.appendChild(r)}),document.body.appendChild(i),document.body.appendChild(s)}setupScore(){this.scoreText=this.add.text(16,16,"Score: 0",{fontSize:"32px",fill:"#fff",backgroundColor:"#000",padding:{x:10,y:5}}).setScrollFactor(0).setDepth(200)}transitionToNextScene(){this.isTransitioning||(this.isTransitioning=!0,x.to(this,"space_invaders",{nextScene:"map4scene3",score:this.score}))}}class H extends y{constructor(){super({key:"map4gamescene3"}),this.player=null,this.score=0,this.scoreText=null,this.currentMap=4,this.questions=null,this.icons=[],this.answeredQuestions=0,this.isTransitioning=!1,this.clickCooldown=!1,this.powerUpBitmask=0,this.progressManager=new w,this.sceneTransition=new x}preload(){this.load.scene("map4gamescene3",a("images/map4gamescene3.png")),this.load.json("map-config3",a("data/map4/map-config3.json")),this.load.json("questions",a("data/questions.json")),this.load.image("checkMark",a("images/checkmark.png")),this.load.image("xMark",a("images/xmark.png")),this.load.on("loaderror",e=>{if(console.error("Error loading file:",e.key),e.key==="checkMark"){const t=this.add.graphics();t.fillStyle(65280),t.fillCircle(0,0,20),t.generateTexture("checkMark",40,40),t.destroy()}else if(e.key==="xMark"){const t=this.add.graphics();t.lineStyle(4,16711680),t.moveTo(-10,-10),t.lineTo(10,10),t.moveTo(10,-10),t.lineTo(-10,10),t.generateTexture("xMark",40,40),t.destroy()}})}create(){this.sound&&this.sound.context&&(this.sound.pauseOnBlur=!1);try{this.questions=this.cache.json.get("questions");const e=this.cache.json.get("map-config3");if(console.log("MapConfig loaded:",e),!e||!e.zones)throw new Error("Invalid map config structure");const s=e.zones[2]||e.zones[0];if(!s)throw new Error("No valid zone found in config");const i=this.add.image(s.x||400,s.y||300,"map4gamescene3");i.setOrigin(.5),i.setScale(s.scale||1),this.loadAwsIcons(e),this.setupScore(),this.progressManager.saveProgress({lastCompletedScene:"map4gamescene3",currentMap:4})}catch(e){console.error("Error in create:",e),this.add.text(400,300,"Error loading level. Restarting...",{fontSize:"24px",fill:"#fff",backgroundColor:"#ff0000",padding:{x:10,y:5}}).setOrigin(.5),setTimeout(()=>{this.scene.start("map4gamescene3")},2e3)}}loadAwsIcons(e){e.zones.forEach(t=>{t.icons.forEach(s=>{const i=this.questions.find(n=>s.questionTypes.some(h=>n.question.toLowerCase().includes(h.toLowerCase())));if(i&&i.image)console.log("Loading icon from question:",i.image),this.load.image(`icon_${s.name}`,i.image);else{const n=`assets/images/services16/${s.category}/48/${s.name}`;console.log("Loading icon with constructed path:",n),this.load.image(`icon_${s.name}`,n)}const o=`/assets/images/services16/${s.category}/48/${s.name}`;this.load.image(`icon_${s.name}`,o)})}),this.load.once("complete",()=>{e.zones.forEach(t=>{t.icons.forEach(s=>{const i=this.add.image(s.x,s.y,`icon_${s.name}`).setInteractive().setScale(.5);console.log("Creating icon sprite:",s.name),this.setupIconInteraction(i,s),this.icons.push(i)})})}),this.load.start()}setupIconInteraction(e,t){e.setTint(16777215),e.isAnswered=!1,e.on("pointerover",()=>{e.isAnswered||(e.setScale(1.3),e.setTint(65280),this.showTooltip(t.name,e.x,e.y))}),e.on("pointerout",()=>{e.isAnswered||(e.setScale(1.3),e.setTint(16777215),this.hideTooltip())}),this.tweens.add({targets:e,scale:{from:1,to:1.4},duration:1e3,yoyo:!0,repeat:-1,ease:"Sine.easeInOut"}),e.on("pointerdown",()=>{if(e.isAnswered)return;let s,i=this.questions.filter(o=>t.questionTypes.some(n=>o.question.toLowerCase().includes(n.toLowerCase())));i.length===0&&(i=this.questions),s=f.Utils.Array.GetRandom(i),this.showQuestion(s,e)})}showTooltip(e,t,s){this.tooltip=this.add.text(t,s-60,e,{fontSize:"16px",fill:"#fff",backgroundColor:"#000",padding:{x:5,y:3}}).setOrigin(1).setDepth(150)}hideTooltip(){this.tooltip&&this.tooltip.destroy()}showQuestion(e,t){const s=document.createElement("div");s.className="question-container";const i=document.createElement("div");i.className="overlay";const o=document.createElement("div");o.className="question",o.textContent=e.question,s.appendChild(o),Object.entries(e.options).forEach(([n,h])=>{const r=document.createElement("div");r.className="option";const c=document.createElement("span");c.className="option-letter",c.textContent=n;const d=document.createElement("span");d.className="option-text",d.textContent=h,r.appendChild(c),r.appendChild(d),r.addEventListener("click",()=>{const p=n===e.answer;p&&(this.score+=100,this.scoreText.setText(`Score: ${this.score}`));const u=p?"checkMark":"xMark",g=this.add.image(t.x,t.y,u).setScale(1).setDepth(150);if(t.isAnswered=!0,t.setAlpha(.5),this.tweens.killTweensOf(t),t.setScale(1),t.disableInteractive(),this.answeredQuestions++,e.explanation){const l=document.createElement("div");l.className="explanation",l.textContent=e.explanation,s.appendChild(l)}setTimeout(()=>{document.body.removeChild(i),document.body.removeChild(s),g.destroy(),this.answeredQuestions===5&&(console.log("All 5 questions answered, transitioning to Space Invaders..."),setTimeout(()=>{this.scene.start("space_invaders",{nextScene:"map4scene4"})},3e3))},2e3)}),s.appendChild(r)}),document.body.appendChild(i),document.body.appendChild(s)}setupScore(){this.scoreText=this.add.text(16,16,"Score: 0",{fontSize:"32px",fill:"#fff",backgroundColor:"#000",padding:{x:10,y:5}}).setScrollFactor(0).setDepth(200)}transitionToNextScene(){this.isTransitioning||(this.isTransitioning=!0,x.to(this,"space_invaders",{nextScene:"map4scene4",score:this.score}))}}class X extends y{constructor(){super({key:"map4gamescene4"}),this.player=null,this.score=0,this.scoreText=null,this.currentMap=4,this.questions=null,this.icons=[],this.answeredQuestions=0,this.isTransitioning=!1,this.clickCooldown=!1,this.powerUpBitmask=0,this.progressManager=new w,this.sceneTransition=new x}preload(){this.load.scene("map4gamescene4",a("images/map4gamescene4.png")),this.load.json("map-config4",a("data/map4/map-config4.json")),this.load.json("questions",a("data/questions.json")),this.load.image("checkMark",a("images/checkmark.png")),this.load.image("xMark",a("images/xmark.png")),this.load.on("loaderror",e=>{if(console.error("Error loading file:",e.key),e.key==="checkMark"){const t=this.add.graphics();t.fillStyle(65280),t.fillCircle(0,0,20),t.generateTexture("checkMark",40,40),t.destroy()}else if(e.key==="xMark"){const t=this.add.graphics();t.lineStyle(4,16711680),t.moveTo(-10,-10),t.lineTo(10,10),t.moveTo(10,-10),t.lineTo(-10,10),t.generateTexture("xMark",40,40),t.destroy()}})}create(){this.sound&&this.sound.context&&(this.sound.pauseOnBlur=!1);try{this.questions=this.cache.json.get("questions");const e=this.cache.json.get("map-config4");if(console.log("MapConfig loaded:",e),!e||!e.zones)throw new Error("Invalid map config structure");const s=e.zones[3]||e.zones[0];if(!s)throw new Error("No valid zone found in config");const i=this.add.image(s.x||400,s.y||300,"map4gamescene4");i.setOrigin(.5),i.setScale(s.scale||1),this.loadAwsIcons(e),this.setupScore(),this.progressManager.saveProgress({lastCompletedScene:"map4gamescene4",currentMap:4})}catch(e){console.error("Error in create:",e),this.add.text(400,300,"Error loading level. Restarting...",{fontSize:"24px",fill:"#fff",backgroundColor:"#ff0000",padding:{x:10,y:5}}).setOrigin(.5),setTimeout(()=>{this.scene.start("map4gamescene4")},2e3)}}loadAwsIcons(e){e.zones.forEach(t=>{t.icons.forEach(s=>{const i=this.questions.find(n=>s.questionTypes.some(h=>n.question.toLowerCase().includes(h.toLowerCase())));if(i&&i.image)console.log("Loading icon from question:",i.image),this.load.image(`icon_${s.name}`,i.image);else{const n=`assets/images/services16/${s.category}/48/${s.name}`;console.log("Loading icon with constructed path:",n),this.load.image(`icon_${s.name}`,n)}const o=`/assets/images/services16/${s.category}/48/${s.name}`;this.load.image(`icon_${s.name}`,o)})}),this.load.once("complete",()=>{e.zones.forEach(t=>{t.icons.forEach(s=>{const i=this.add.image(s.x,s.y,`icon_${s.name}`).setInteractive().setScale(.5);console.log("Creating icon sprite:",s.name),this.setupIconInteraction(i,s),this.icons.push(i)})})}),this.load.start()}setupIconInteraction(e,t){e.setTint(16777215),e.isAnswered=!1,e.on("pointerover",()=>{e.isAnswered||(e.setScale(1.3),e.setTint(65280),this.showTooltip(t.name,e.x,e.y))}),e.on("pointerout",()=>{e.isAnswered||(e.setScale(1.3),e.setTint(16777215),this.hideTooltip())}),this.tweens.add({targets:e,scale:{from:1,to:1.4},duration:1e3,yoyo:!0,repeat:-1,ease:"Sine.easeInOut"}),e.on("pointerdown",()=>{if(e.isAnswered)return;let s,i=this.questions.filter(o=>t.questionTypes.some(n=>o.question.toLowerCase().includes(n.toLowerCase())));i.length===0&&(i=this.questions),s=f.Utils.Array.GetRandom(i),this.showQuestion(s,e)})}showTooltip(e,t,s){this.tooltip=this.add.text(t,s-60,e,{fontSize:"16px",fill:"#fff",backgroundColor:"#000",padding:{x:5,y:3}}).setOrigin(1).setDepth(150)}hideTooltip(){this.tooltip&&this.tooltip.destroy()}showQuestion(e,t){const s=document.createElement("div");s.className="question-container";const i=document.createElement("div");i.className="overlay";const o=document.createElement("div");o.className="question",o.textContent=e.question,s.appendChild(o),Object.entries(e.options).forEach(([n,h])=>{const r=document.createElement("div");r.className="option";const c=document.createElement("span");c.className="option-letter",c.textContent=n;const d=document.createElement("span");d.className="option-text",d.textContent=h,r.appendChild(c),r.appendChild(d),r.addEventListener("click",()=>{const p=n===e.answer;p&&(this.score+=100,this.scoreText.setText(`Score: ${this.score}`));const u=p?"checkMark":"xMark",g=this.add.image(t.x,t.y,u).setScale(1).setDepth(150);if(t.isAnswered=!0,t.setAlpha(.5),this.tweens.killTweensOf(t),t.setScale(1),t.disableInteractive(),this.answeredQuestions++,e.explanation){const l=document.createElement("div");l.className="explanation",l.textContent=e.explanation,s.appendChild(l)}setTimeout(()=>{document.body.removeChild(i),document.body.removeChild(s),g.destroy(),this.answeredQuestions===5&&(console.log("All 5 questions answered, transitioning to Space Invaders..."),setTimeout(()=>{this.scene.start("space_invaders",{nextScene:"game_over"})},3e3))},2e3)}),s.appendChild(r)}),document.body.appendChild(i),document.body.appendChild(s)}setupScore(){this.scoreText=this.add.text(16,16,"Score: 0",{fontSize:"32px",fill:"#fff",backgroundColor:"#000",padding:{x:10,y:5}}).setScrollFactor(0).setDepth(200)}transitionToNextScene(){this.isTransitioning||(this.isTransitioning=!0,x.to(this,"space_invaders",{nextScene:"gameover",score:this.score}))}}class Z extends f.Scene{constructor(){super({key:"space_invaders"}),this.player=null,this.score=0,this.scoreText=null,this.currentMap=1,this.powerUpBitmask=0,this.progressManager=new w,this.sceneTransition=new x}init(e){this.score=(e==null?void 0:e.score)||0,this.powerUpBitmask=(e==null?void 0:e.powerUpBitmask)||0,this.currentMap=(e==null?void 0:e.currentMap)||1,this.nextScene=e==null?void 0:e.nextScene,this.isTransitioning=!1,this.cameras.main.fadeIn(500)}resetGame(){this.player={x:this.width/2,y:this.height-80,width:60,height:40,lives:this.upgrades.health,shield:this.upgrades.shield,score:0,speed:300,fireRate:this.upgrades.fireRate,bulletSpeed:this.upgrades.bulletSpeed,multiShot:this.upgrades.multiShot},this.bullets=[],this.asteroids=[],this.satellites=[],this.powerUps=[],this.score=0,this.scoreText=null,this.powerUpText=null,this.gameOver=!1,this.nextScene=null,this.powerUpBitmask=0,this.powerUpTypes={LIFE:1,CRAFT:2,SPEED:4,BULLETS:8},this.powerUpStats={life:3,craftSize:1,speed:200,bulletSpeed:400,fireRate:2},this.sceneTransition=new x}preload(){this.load.image("player",a("images/player.png")),this.load.image("asteroid",a("images/asteroid.png")),this.load.image("satellite",a("images/satellite.png")),this.load.image("bullet",a("images/bullet.png")),this.load.image("powerup",a("images/powerup.png")),this.load.audio("shoot",a("sounds/shoot.wav")),this.load.audio("explosion",a("sounds/explosion.wav")),this.load.audio("powerup",a("sounds/powerup.wav"))}create(){this.add.rectangle(400,300,800,600,0,.8),this.player=this.add.sprite(400,500,"player"),this.player.setScale(this.powerUpStats.craftSize),this.cursors=this.input.keyboard.createCursorKeys(),this.wasdKeys={up:this.input.keyboard.addKey(f.Input.Keyboard.KeyCodes.W),down:this.input.keyboard.addKey(f.Input.Keyboard.KeyCodes.S),left:this.input.keyboard.addKey(f.Input.Keyboard.KeyCodes.A),right:this.input.keyboard.addKey(f.Input.Keyboard.KeyCodes.D)},this.spaceKey=this.input.keyboard.addKey(f.Input.Keyboard.KeyCodes.SPACE),this.lastShot=0,this.createHUD(),this.startGameLoop(),this.sceneTransition.fadeIn()}createHUD(){this.add.rectangle(400,40,780,60,0,.5).setDepth(100),this.scoreText=this.add.text(16,16,`Score: ${this.score}`,{fontSize:"32px",fill:"#fff"}).setDepth(101),this.powerUpText=this.add.text(16,56,"",{fontSize:"24px",fill:"#00ff00",fontFamily:"Arial"}).setDepth(101),this.healthText=this.add.text(16,96,`Health: ${this.powerUpStats.life}`,{fontSize:"24px",fill:"#ff0000",fontFamily:"Arial"}).setDepth(101)}startGameLoop(){this.time.addEvent({delay:2e3,callback:this.spawnAsteroid,callbackScope:this,loop:!0}),this.time.addEvent({delay:3e3,callback:this.spawnSatellite,callbackScope:this,loop:!0}),this.powerUpTimer=this.time.addEvent({delay:1e4,callback:this.spawnPowerUp,callbackScope:this,loop:!0}),this.progressManager.loadProgress(),this.gameStarted=!0}spawnPowerUp(){const e=["fireRate","multiShot","bulletSpeed","health","shield"],t=e[f.Math.Between(0,e.length-1)],s=this.add.text(f.Math.Between(40,this.width-40),-50,this.getPowerUpSymbol(t),{fontSize:"24px",fill:this.getPowerUpColor(t)}).setOrigin(.5);s.type=t,s.speed=100,this.powerUps.push(s)}getPowerUpSymbol(e){return{fireRate:"",multiShot:"",bulletSpeed:"",health:"",shield:""}[e]||""}getPowerUpColor(e){return{fireRate:"#ffff00",multiShot:"#00ffff",bulletSpeed:"#ff00ff",health:"#ff0000",shield:"#0000ff"}[e]||"#ffffff"}collectPowerUp(e){switch(e.type){case"fireRate":this.player.fireRate=Math.min(this.player.fireRate+.2,5);break;case"multiShot":this.player.multiShot=Math.min(this.player.multiShot+1,5);break;case"bulletSpeed":this.player.bulletSpeed=Math.min(this.player.bulletSpeed+100,800);break;case"health":this.player.lives++,this.healthText.setText(`Health: ${this.player.lives}`);break;case"shield":this.player.shield=Math.min(this.player.shield+1,3),this.powerUpText.setText(`Shield: ${this.player.shield}`);break}this.updatePowerUpText(),e.destroy()}update(e,t){if(this.gameOver)return;this.stars.forEach(i=>{const o=this.add.rectangle(i.x,i.y,i.size,i.size,16777215);this.time.delayedCall(16,()=>o.destroy())});const s=this.powerUpStats.speed*t/1e3;(this.cursors.left.isDown||this.wasdKeys.left.isDown)&&this.player.x>40&&(this.player.x-=s),(this.cursors.right.isDown||this.wasdKeys.right.isDown)&&this.player.x<760&&(this.player.x+=s),(this.cursors.up.isDown||this.wasdKeys.up.isDown)&&this.player.y>40&&(this.player.y-=s),(this.cursors.down.isDown||this.wasdKeys.down.isDown)&&this.player.y<560&&(this.player.y+=s),this.spaceKey.isDown&&e>this.lastShot+1e3/this.powerUpStats.fireRate&&(this.shoot(),this.lastShot=e),this.updateBullets(t),this.updateAsteroids(t),this.updateSatellites(t),this.checkCollisions(),this.scoreText.setText(`Score: ${this.score}`),this.healthText.setText(`Health: ${this.powerUpStats.life}`)}applyPowerUps(){this.powerUpStats={life:3,craftSize:1,speed:200,bulletSpeed:400,fireRate:2},this.powerUpBitmask&this.powerUpTypes.LIFE&&(this.powerUpStats.life+=2),this.powerUpBitmask&this.powerUpTypes.CRAFT&&(this.powerUpStats.craftSize=1.2),this.powerUpBitmask&this.powerUpTypes.SPEED&&(this.powerUpStats.speed+=100),this.powerUpBitmask&this.powerUpTypes.BULLETS&&(this.powerUpStats.bulletSpeed+=200,this.powerUpStats.fireRate+=2),this.updatePowerUpText()}updatePowerUpText(){const e=[];this.powerUpBitmask&this.powerUpTypes.LIFE&&e.push("Life+"),this.powerUpBitmask&this.powerUpTypes.CRAFT&&e.push("Size+"),this.powerUpBitmask&this.powerUpTypes.SPEED&&e.push("Speed+"),this.powerUpBitmask&this.powerUpTypes.BULLETS&&e.push("Fire+"),this.powerUpText&&this.powerUpText.setText("Power-ups: "+e.join(" "))}shoot(){const e=this.add.rectangle(this.player.x,this.player.y-20,4,10,16777215),t=this.powerUpStats.bulletSpeed;this.bullets.push({sprite:e,speed:t,damage:1})}updateBullets(e){for(let t=this.bullets.length-1;t>=0;t--){const s=this.bullets[t];s.sprite.y-=s.speed*e/1e3,s.sprite.y<-10&&(s.sprite.destroy(),this.bullets.splice(t,1))}}spawnAsteroid(){const e=f.Math.Between(40,760),t=this.add.sprite(e,-20,"asteroid");t.setScale(.5),this.asteroids.push({sprite:t,speed:f.Math.Between(100,200),rotationSpeed:f.Math.Between(-2,2)})}updateAsteroids(e){for(let t=this.asteroids.length-1;t>=0;t--){const s=this.asteroids[t];s.sprite.y+=s.speed*e/1e3,s.sprite.rotation+=s.rotationSpeed*e/1e3,s.sprite.y>620&&(s.sprite.destroy(),this.asteroids.splice(t,1))}}spawnSatellite(){const e=f.Math.Between(40,760),t=this.add.sprite(e,-20,"satellite");t.setScale(.4),this.satellites.push({sprite:t,speed:f.Math.Between(150,250),horizontalSpeed:f.Math.Between(-100,100)})}updateSatellites(e){for(let t=this.satellites.length-1;t>=0;t--){const s=this.satellites[t];s.sprite.y+=s.speed*e/1e3,s.sprite.x+=s.horizontalSpeed*e/1e3,(s.sprite.x<40||s.sprite.x>760)&&(s.horizontalSpeed*=-1),s.sprite.y>620&&(s.sprite.destroy(),this.satellites.splice(t,1))}}updatePowerUps(e){for(let t=this.powerUps.length-1;t>=0;t--){const s=this.powerUps[t];s.y+=s.speed*(e/1e3),s.y>this.height+50&&(s.destroy(),this.powerUps.splice(t,1))}}checkCollisions(){for(let e=this.bullets.length-1;e>=0;e--){const t=this.bullets[e];for(let s=this.asteroids.length-1;s>=0;s--){const i=this.asteroids[s];if(this.checkOverlap(t.sprite,i.sprite)){this.handleCollision(t,i,10);break}}for(let s=this.satellites.length-1;s>=0;s--){const i=this.satellites[s];if(this.checkOverlap(t.sprite,i.sprite)){this.handleCollision(t,i,20);break}}}if(!this.gameOver){for(let e=this.asteroids.length-1;e>=0;e--){const t=this.asteroids[e];this.checkOverlap(this.player,t.sprite)&&(this.handlePlayerHit(),t.sprite.destroy(),this.asteroids.splice(e,1))}for(let e=this.satellites.length-1;e>=0;e--){const t=this.satellites[e];this.checkOverlap(this.player,t.sprite)&&(this.handlePlayerHit(),t.sprite.destroy(),this.satellites.splice(e,1))}}}handleCollision(e,t,s){e.sprite.destroy(),t.sprite.destroy();const i=this.bullets.indexOf(e);i>-1&&this.bullets.splice(i,1);const o=t.type==="asteroid"?this.asteroids.indexOf(t):this.satellites.indexOf(t);o>-1&&(t.type==="asteroid"?this.asteroids.splice(o,1):this.satellites.splice(o,1)),this.score+=s,this.scoreText.setText(`Score: ${this.score}`)}handlePlayerHit(){if(this.player.shield>0)this.player.shield--,this.powerUpText.setText(`Shield: ${this.player.shield}`),this.showShieldEffect();else{if(this.player.lives--,this.healthText.setText(`Health: ${this.player.lives}`),this.player.lives<=0){this.gameOver=!0,this.showGameOver();return}this.showDamageEffect()}}showDamageEffect(){this.player.setTint(16711680),this.time.delayedCall(100,()=>{this.player.clearTint()})}checkOverlap(e,t){const s=e.getBounds(),i=t.getBounds();return f.Geom.Rectangle.Overlaps(s,i)}showGameOver(){this.gameOver=!0,this.progressManager.saveProgress({lastCompletedScene:"space_invaders",currentMap:this.currentMap,powerUpBitmask:this.powerUpBitmask,score:this.score}),this.add.text(400,300,"GAME OVER",{fontSize:"64px",fill:"#ff0000"}).setOrigin(.5),this.add.text(400,380,`Final Score: ${this.score}`,{fontSize:"32px",fill:"#ffffff"}).setOrigin(.5);const e=this.add.rectangle(400,450,200,50,65280);this.add.text(400,450,"Continue",{fontSize:"24px",fill:"#000000"}).setOrigin(.5),e.setInteractive(),e.on("pointerdown",()=>{this.cameras.main.fadeOut(500),this.cameras.main.once("camerafadeoutcomplete",()=>{this.nextScene?this.scene.start(this.nextScene,{score:this.score,powerUpBitmask:this.powerUpBitmask}):this.scene.start("mainmenu")})})}endMiniGame(){const e={score:this.score,powerUps:this.powerUpBitmask,nextScene:this.nextScene};this.cameras.main.fadeOut(500),this.time.delayedCall(500,()=>{this.scene.start(this.nextScene,e)})}}class Y extends f.Scene{constructor(){super({key:"sort_selection"}),this.score=0,this.currentMap=1,this.powerUpBitmask=0,this.progressManager=new w,this.sceneTransition=new x,this.selected=null,this.thumbnails=[],this.connections=[],this.isAnimating=!1,this.sortSpeed=500,this.container=null,this.gridSize={x:4,y:4,spacing:150,startX:200,startY:100}}init(e){this.score=(e==null?void 0:e.score)||0,this.powerUpBitmask=(e==null?void 0:e.powerUpBitmask)||0,this.currentMap=(e==null?void 0:e.currentMap)||1,this.nextScene=e==null?void 0:e.nextScene,this.isTransitioning=!1,this.cameras.main.fadeIn(500)}preload(){for(let e=1;e<=4;e++)for(let t=1;t<=4;t++){const s=`map${e}scene${t}64`;this.load.image(s,a(`images/${s}.png`))}this.load.image("checkmark",a("images/checkmark.png")),this.load.image("xmark",a("images/xmark.png"))}create(){this.add.rectangle(400,300,800,600,0,.8),this.createThumbnailGrid(),this.createSortButtons(),this.createSpeedControl(),this.createScoreDisplay(),this.cameras.main.fadeIn(500)}createThumbnailGrid(){const{startX:e,startY:t,spacing:s}=this.gridSize,i=[];for(let o=1;o<=4;o++)i.push(`map${this.currentMap}scene${o}64`);i.forEach((o,n)=>{const h=Math.floor(n/2),r=n%2,c=e+r*s,d=t+h*s,p=this.add.image(c,d,o).setScale(.8).setInteractive(),u=this.add.rectangle(c,d,100,80,65280,0).setStrokeStyle(2,65280);p.highlight=u,p.originalX=c,p.originalY=d,p.currentIndex=n,p.value=scene,this.thumbnails.push(p)})}createSortButtons(){[{text:"Bubble Sort",method:"bubble",color:4886754},{text:"Quick Sort",method:"quick",color:5301186},{text:"Merge Sort",method:"merge",color:14897263},{text:"Insertion Sort",method:"insertion",color:14917968}].forEach((t,s)=>{const i=200+s*200,o=500,n=this.add.rectangle(i,o,150,40,t.color,.8).setStrokeStyle(2,16777215).setInteractive();this.add.text(i,o,t.text,{fontSize:"18px",fill:"#ffffff",fontFamily:"Arial"}).setOrigin(.5),n.on("pointerdown",()=>{this.isAnimating||this.selectSort(t.method)})})}createSpeedControl(){this.add.text(550,550,"Speed:",{fontSize:"18px",fill:"#ffffff",fontFamily:"Arial"}).setOrigin(0,.5),this.add.rectangle(650,550,200,10,6710886).setInteractive();const s=this.add.circle(650,550,10,16777215).setInteractive();this.input.setDraggable(s),s.on("drag",(i,o)=>{const n=f.Math.Clamp(o,550,750);s.x=n,this.sortSpeed=1e3-(n-550)/200*900})}createScoreDisplay(){this.add.text(16,16,`Score: ${this.score}`,{fontSize:"32px",fill:"#fff",backgroundColor:"#000",padding:{x:10,y:5}})}async animateSwap(e,t){if(!e||!t)return;const s=e.x,i=e.y,o=e.currentIndex;return new Promise(n=>{this.tweens.add({targets:[e,e.highlight],x:t.x,y:t.y,duration:this.sortSpeed,ease:"Power2"}),this.tweens.add({targets:[t,t.highlight],x:s,y:i,duration:this.sortSpeed,ease:"Power2",onComplete:()=>{e.currentIndex=t.currentIndex,t.currentIndex=o,n()}})})}async animateBubbleSort(e){const t=e.length;for(let s=0;s<t-1;s++)for(let i=0;i<t-s-1;i++)e[i].highlight.setStrokeStyle(2,16776960),e[i+1].highlight.setStrokeStyle(2,16776960),e[i].value>e[i+1].value&&(await this.animateSwap(e[i],e[i+1]),[e[i],e[i+1]]=[e[i+1],e[i]]),e[i].highlight.setStrokeStyle(2,65280),e[i+1].highlight.setStrokeStyle(2,65280)}async animateQuickSort(e,t,s){if(t<s){const i=await this.partition(e,t,s);await this.animateQuickSort(e,t,i-1),await this.animateQuickSort(e,i+1,s)}}async partition(e,t,s){const i=e[s];i.highlight.setStrokeStyle(2,16711680);let o=t-1;for(let n=t;n<s;n++)e[n].highlight.setStrokeStyle(2,16776960),e[n].value<i.value&&(o++,o!==n&&(await this.animateSwap(e[o],e[n]),[e[o],e[n]]=[e[n],e[o]])),e[n].highlight.setStrokeStyle(2,65280);return o+1!==s&&(await this.animateSwap(e[o+1],e[s]),[e[o+1],e[s]]=[e[s],e[o+1]]),i.highlight.setStrokeStyle(2,65280),o+1}async animateMergeSort(e){if(e.length<=1)return e;const t=Math.floor(e.length/2),s=e.slice(0,t),i=e.slice(t);await this.animateMergeSort(s),await this.animateMergeSort(i);let o=0,n=0,h=0;const r=[...e];for(;o<s.length&&n<i.length;){s[o].highlight.setStrokeStyle(2,16776960),i[n].highlight.setStrokeStyle(2,16776960),s[o].value<=i[n].value?(r[h]=s[o],o++):(r[h]=i[n],n++);const c=e[h].originalX,d=e[h].originalY;await new Promise(p=>{this.tweens.add({targets:[r[h],r[h].highlight],x:c,y:d,duration:this.sortSpeed,ease:"Power2",onComplete:p})}),h++}for(;o<s.length;)r[h]=s[o],await new Promise(c=>{this.tweens.add({targets:[r[h],r[h].highlight],x:e[h].originalX,y:e[h].originalY,duration:this.sortSpeed,ease:"Power2",onComplete:c})}),o++,h++;for(;n<i.length;)r[h]=i[n],await new Promise(c=>{this.tweens.add({targets:[r[h],r[h].highlight],x:e[h].originalX,y:e[h].originalY,duration:this.sortSpeed,ease:"Power2",onComplete:c})}),n++,h++;for(let c=0;c<r.length;c++)e[c]=r[c],e[c].highlight.setStrokeStyle(2,65280)}async animateInsertionSort(e){for(let t=1;t<e.length;t++){const s=e[t];s.highlight.setStrokeStyle(2,16711680);let i=t-1;for(;i>=0&&e[i].value>s.value;)e[i].highlight.setStrokeStyle(2,16776960),await this.animateSwap(e[i],e[i+1]),[e[i+1],e[i]]=[e[i],e[i+1]],e[i+1].highlight.setStrokeStyle(2,65280),i--;s.highlight.setStrokeStyle(2,65280)}}async selectSort(e){if(this.isAnimating)return;this.isAnimating=!0;const t=[...this.thumbnails].sort((s,i)=>s.currentIndex-i.currentIndex);switch(e){case"bubble":await this.animateBubbleSort(t);break;case"quick":await this.animateQuickSort(t,0,t.length-1);break;case"merge":await this.animateMergeSort(t);break;case"insertion":await this.animateInsertionSort(t);break}this.isAnimating=!1,await this.finishSorting()}async finishSorting(){this.progressManager.saveProgress({lastCompletedScene:"sort_selection",score:this.score,powerUpBitmask:this.powerUpBitmask,currentMap:this.currentMap}),this.events.emit("sceneEnd"),this.sceneTransition.toSpaceInvaders(this,`map${this.currentMap}scene1`,{score:this.score,powerUpBitmask:this.powerUpBitmask,currentMap:this.currentMap})}}class W extends f.Scene{constructor(){super({key:"mainmenu"}),this.progressManager=new w,this.sceneTransition=new x}init(){this.progressManager.resetProgress(),this.cameras.main.fadeIn(500)}create(){this.add.rectangle(0,0,800,600,0).setOrigin(0,0),this.add.text(400,100,"AWS Cloud Game",{fontSize:"48px",fill:"#fff",fontFamily:"Arial"}).setOrigin(.5);const t=this.add.container(400,300),s=this.createButton(0,0,"Start Game",()=>{this.sceneTransition.fadeOut(()=>{this.scene.start("map1scene1",{score:0,powerUpBitmask:0,currentMap:1})})}),i=this.createButton(0,60,"Continue",()=>{const n=this.progressManager.loadProgress();n&&this.sceneTransition.fadeOut(()=>{this.scene.start(n.lastCompletedScene,{score:n.score,powerUpBitmask:n.powerUpBitmask,currentMap:n.currentMap})})}),o=this.createButton(0,120,"Space Invaders",()=>{this.sceneTransition.fadeOut(()=>{this.scene.start("space_invaders",{score:0,powerUpBitmask:0,currentMap:1,nextScene:"mainmenu"})})});t.add([s,i,o])}createButton(e,t,s,i){const o=this.add.container(e,t),n=this.add.rectangle(0,0,300,50,3355443),h=this.add.text(0,0,s,{fontSize:"24px",fill:"#fff",fontFamily:"Arial"}).setOrigin(.5);return o.add([n,h]),n.setInteractive().on("pointerover",()=>n.setFillStyle(6710886)).on("pointerout",()=>n.setFillStyle(3355443)).on("pointerdown",i),o}}const V={type:f.AUTO,width:800,height:600,parent:"game-container",backgroundColor:"#000000",dom:{createContainer:!0},audio:{context:new(window.AudioContext||window.webkitAudioContext)},scale:{mode:f.Scale.FIT,autoCenter:f.Scale.CENTER_BOTH,width:800,height:600},physics:{default:"arcade",arcade:{gravity:{y:0},debug:!1}},render:{pixelArt:!0,powerPreference:"high-performance",antialias:!0,antialiasGL:!0},scene:[B,W,Y,Z,q,P,O,N,$,L,Q,j,D,_,F,R,G,K,H,X,z]},J=new w;new x;window.addEventListener("load",()=>{window.game=new f.Game(V),document.addEventListener("click",function m(){window.game.sound&&window.game.sound.context.state==="suspended"&&window.game.sound.context.resume(),document.removeEventListener("click",m)}),window.addEventListener("blur",()=>{window.game.scene.scenes.length>0&&window.game.scene.scenes.forEach(m=>{m.scene.isActive()&&m.scene.pause()})}),window.addEventListener("focus",()=>{window.game.scene.scenes.length>0&&window.game.scene.scenes.forEach(m=>{m.scene.isPaused()&&m.scene.resume()})}),window.addEventListener("beforeunload",()=>{const m=window.game.scene.scenes.find(e=>e.scene.isActive());m&&J.saveProgress({lastCompletedScene:m.scene.key})})});
